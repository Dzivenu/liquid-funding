!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=97)}([function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),i=n(26),o=n(54),u=n(5),s=n(39),a=n(15),c=n(35),l=function(t){function e(n,r,i){var u=t.call(this)||this;switch(u.syncErrorValue=null,u.syncErrorThrown=!1,u.syncErrorThrowable=!1,u.isStopped=!1,arguments.length){case 0:u.destination=o.a;break;case 1:if(!n){u.destination=o.a;break}if("object"===typeof n){n instanceof e?(u.syncErrorThrowable=n.syncErrorThrowable,u.destination=n,n.add(u)):(u.syncErrorThrowable=!0,u.destination=new f(u,n));break}default:u.syncErrorThrowable=!0,u.destination=new f(u,n,r,i)}return u}return r.a(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(u.a),f=function(t){function e(e,n,r,u){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,u=n.complete,n!==o.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=r,a._complete=u,a}return r.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},function(t,e,n){"use strict";var r=n(51),i=n(1),o=n(39),u=n(54);var s=n(22),a=n(38),c=n(15);n.d(e,"a",function(){return l});var l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(u.a)}(t,e,n);if(r?s.add(r.call(s,this.source)):s.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=f(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[s.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(a.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=f(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function f(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(14),i=n(41),o=n(2);function u(t,e,n,u,s){if(void 0===s&&(s=new r.a(t,n,u)),!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(7),i=n(50),o=n(26),u=n(40),s=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,s=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l){n[l].remove(this)}if(Object(o.a)(s))try{s.call(this)}catch(p){e=p instanceof u.a?a(p.errors):[p]}if(Object(r.a)(c)){l=-1;for(var f=c.length;++l<f;){var h=c[l];if(Object(i.a)(h))try{h.unsubscribe()}catch(p){e=e||[],p instanceof u.a?e=e.concat(a(p.errors)):e.push(p)}}}if(e)throw new u.a(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function a(t){return t.reduce(function(t,e){return t.concat(e instanceof u.a?e.errors:e)},[])}},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var r=n(0),i=n(2),o=n(1),u=n(5),s=n(23),a=n(69),c=n(39),l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(e,t),e}(o.a),f=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),u.a.EMPTY):this.isStopped?(t.complete(),u.a.EMPTY):(this.observers.push(t),new a.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(i.a),h=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):u.a.EMPTY},e}(f)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return Array.isArray||function(t){return t&&"number"===typeof t.length}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(31),i=new(n(29).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1);function o(t,e){return function(n){if("function"!==typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new u(t,e))}}var u=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.a)},function(t,e,n){"use strict";function r(t){return t&&"function"===typeof t.schedule}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(2),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n(41),o=n(67);function u(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},function(t,e,n){t.exports=n(105)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1);function o(t,e){return function(n){return n.lift(new u(t,e))}}var u=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s});var r,i=n(11),o=n(36),u=n(45);r||(r={});var s=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"===typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(u.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!==typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});var i=r()},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),i=n(3),o=n(4),u=n(14),s=n(9),a=n(12);function c(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof e?function(r){return r.pipe(c(function(n,r){return Object(a.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))},n))}:("number"===typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.project,this.concurrent))},t}(),f=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new u.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";function r(t){return"function"===typeof t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n(70),o=n(52);function u(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(57),o=function(t){function e(n,r){void 0===r&&(r=i.a.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.a(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),i=n(6),o=n(5),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},function(t,e,n){"use strict";var r=n(0),i=function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).a);n.d(e,"a",function(){return o});var o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(7);function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";function r(t,e,n,r,i,o,u){try{var s=t[o](u),a=s.value}catch(c){return void n(c)}s.done?e(a):Promise.resolve(a).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var u=t.apply(e,n);function s(t){r(u,i,o,s,a,"next",t)}function a(t){r(u,i,o,s,a,"throw",t)}s(void 0)})}}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(36),i=n(63);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.a)()(r.a.apply(void 0,t))}},function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t},0)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(10),i=n(28),o=n(52);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(o.a)(t,n)):Object(i.a)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!t){var n=(0,i.default)(e||"Broken invariant");throw n.framesToPop+=1,n}};var r,i=(r=n(80))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(16);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";var r=n(70),i=n(35),o=n(20),u=n(22),s=n(71),a=n(72),c=n(50);n.d(e,"a",function(){return l});var l=function(t){if(t&&"function"===typeof t[u.a])return l=t,function(t){var e=l[u.a]();if("function"!==typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(a.a)(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t};if(t&&"function"===typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"===typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,l,f=Object(c.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+f+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1);function o(){return function(t){return t.lift(new u(t))}}var u=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),i=n(6),o=n(68),u=n(5),s=n(61),a=n(23),c=n(69),l=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new f(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new a.a;if(this.isStopped||this.hasError?e=u.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new s.a(t,i)),n)for(var l=0;l<o&&!t.closed;l++)t.next(r[l]);else for(l=0;l<o&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),f=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(2);function i(t,e){return e?new r.a(function(n){return e.schedule(o,0,{error:t,subscriber:n})}):new r.a(function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var r=n(0),i=n(10),o=n(7),u=n(4),s=n(3),a=n(28),c={};function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"===typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(a.a)(t,r).lift(new f(n))}var f=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(s.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,u=o[n],s=this.toRespond?u===c?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(24),i=n(19);function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n(12),o=n(11);function u(t){return new r.a(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return f});var r=n(0),i=n(28),o=n(7),u=n(1),s=n(4),a=n(3),c=n(20);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"===typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new f(n))}var f=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:null,i.values=r,i}return r.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new d(t)):"function"===typeof t[c.a]?e.push(new p(t[c.a]())):e.push(new y(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"===typeof(u=t[r]).hasValue&&!u.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var u,s=(u=t[r]).next();if(u.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(u.a),p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),y=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.a(e,t),e.prototype[c.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(a.a)(this,this.observable,this,e)},e}(s.a)},function(t,e,n){"use strict";function r(t){return null!==t&&"object"===typeof t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(1);function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(2),i=n(5);function o(t,e){return new r.a(function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},function(t,e,n){"use strict";var r=n(0),i=1,o={};var u=function(t){var e=i++;return o[e]=t,Promise.resolve().then(function(){return function(t){var e=o[t];e&&e()}(e)}),e},s=function(t){delete o[t]},a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=u(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(s(n),e.scheduled=void 0)},e}(n(31).a),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(29).a);n.d(e,"a",function(){return l});var l=new c(a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(15),i=n(35),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},function(t,e,n){var r=n(99),i=n(100),o=n(101);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"DELAY",function(){return ai}),n.d(e,"F",function(){return Qn}),n.d(e,"T",function(){return Kr}),n.d(e,"add",function(){return Dn}),n.d(e,"adjust",function(){return Nn}),n.d(e,"all",function(){return fe}),n.d(e,"allFalse",function(){return d}),n.d(e,"allPass",function(){return Tn}),n.d(e,"allTrue",function(){return y}),n.d(e,"allType",function(){return v}),n.d(e,"always",function(){return Mn}),n.d(e,"any",function(){return Ht}),n.d(e,"anyFalse",function(){return b}),n.d(e,"anyPass",function(){return Vn}),n.d(e,"anyTrue",function(){return g}),n.d(e,"anyType",function(){return m}),n.d(e,"append",function(){return Rn}),n.d(e,"assoc",function(){return Ln}),n.d(e,"both",function(){return Fn}),n.d(e,"change",function(){return gt}),n.d(e,"clone",function(){return ir}),n.d(e,"compact",function(){return _t}),n.d(e,"complement",function(){return qn}),n.d(e,"compose",function(){return St}),n.d(e,"composeAsync",function(){return Ot}),n.d(e,"composed",function(){return Et}),n.d(e,"concat",function(){return $n}),n.d(e,"contains",function(){return p}),n.d(e,"count",function(){return Pt}),n.d(e,"curry",function(){return We}),n.d(e,"debounce",function(){return At}),n.d(e,"dec",function(){return Bn}),n.d(e,"defaultTo",function(){return Wn}),n.d(e,"defaultToStrict",function(){return Dt}),n.d(e,"defaultToWhen",function(){return Nt}),n.d(e,"delay",function(){return Tt}),n.d(e,"dissoc",function(){return Un}),n.d(e,"divide",function(){return Jn}),n.d(e,"drop",function(){return Kn}),n.d(e,"dropLast",function(){return Yn}),n.d(e,"either",function(){return Gn}),n.d(e,"endsWith",function(){return Hn}),n.d(e,"equals",function(){return h}),n.d(e,"filter",function(){return An}),n.d(e,"find",function(){return Xn}),n.d(e,"findInObject",function(){return Mt}),n.d(e,"findIndex",function(){return Zn}),n.d(e,"findModify",function(){return Vt}),n.d(e,"flatMap",function(){return Rt}),n.d(e,"flatten",function(){return tr}),n.d(e,"flip",function(){return er}),n.d(e,"forEach",function(){return or}),n.d(e,"fromPairs",function(){return rr}),n.d(e,"getter",function(){return $t}),n.d(e,"glue",function(){return Wt}),n.d(e,"groupBy",function(){return ur}),n.d(e,"groupWith",function(){return sr}),n.d(e,"has",function(){return ar}),n.d(e,"hasPath",function(){return Jt}),n.d(e,"head",function(){return ee}),n.d(e,"headObject",function(){return Kt}),n.d(e,"identity",function(){return cr}),n.d(e,"ifElse",function(){return lr}),n.d(e,"ifElseAsync",function(){return Gt}),n.d(e,"inc",function(){return fr}),n.d(e,"includes",function(){return ce}),n.d(e,"includesType",function(){return Qt}),n.d(e,"indexBy",function(){return hr}),n.d(e,"indexOf",function(){return pr}),n.d(e,"init",function(){return kt}),n.d(e,"inject",function(){return Zt}),n.d(e,"interval",function(){return se}),n.d(e,"is",function(){return dr}),n.d(e,"isAttach",function(){return be}),n.d(e,"isFalsy",function(){return me}),n.d(e,"isFunction",function(){return ge}),n.d(e,"isNil",function(){return yr}),n.d(e,"isPromise",function(){return we}),n.d(e,"isPrototype",function(){return he}),n.d(e,"isType",function(){return xe}),n.d(e,"isValid",function(){return ve}),n.d(e,"join",function(){return vr}),n.d(e,"keys",function(){return br}),n.d(e,"last",function(){return jt}),n.d(e,"lastIndexOf",function(){return gr}),n.d(e,"length",function(){return mr}),n.d(e,"map",function(){return Ee}),n.d(e,"mapAsync",function(){return Se}),n.d(e,"mapFastAsync",function(){return ke}),n.d(e,"mapToObject",function(){return De}),n.d(e,"match",function(){return wr}),n.d(e,"max",function(){return xr}),n.d(e,"maxBy",function(){return _r}),n.d(e,"maybe",function(){return Ne}),n.d(e,"memoize",function(){return Fe}),n.d(e,"merge",function(){return Ft}),n.d(e,"mergeAll",function(){return Pe}),n.d(e,"mergeDeep",function(){return $e}),n.d(e,"mergeRight",function(){return qe}),n.d(e,"min",function(){return Or}),n.d(e,"minBy",function(){return Sr}),n.d(e,"modulo",function(){return jr}),n.d(e,"multiply",function(){return Ir}),n.d(e,"nextIndex",function(){return Be}),n.d(e,"none",function(){return kr}),n.d(e,"not",function(){return Er}),n.d(e,"nth",function(){return Pr}),n.d(e,"ok",function(){return Ce}),n.d(e,"omit",function(){return sn}),n.d(e,"once",function(){return Je}),n.d(e,"opposite",function(){return qn}),n.d(e,"otherwise",function(){return Ke}),n.d(e,"partial",function(){return Ar}),n.d(e,"partialCurry",function(){return Cr}),n.d(e,"partition",function(){return vt}),n.d(e,"pass",function(){return ze}),n.d(e,"path",function(){return Ut}),n.d(e,"pathEq",function(){return Ye}),n.d(e,"pathOr",function(){return Dr}),n.d(e,"pick",function(){return Lt}),n.d(e,"pickAll",function(){return Nr}),n.d(e,"pipe",function(){return Ge}),n.d(e,"piped",function(){return He}),n.d(e,"pipedAsync",function(){return Qe}),n.d(e,"pluck",function(){return Tr}),n.d(e,"prepend",function(){return Mr}),n.d(e,"prevIndex",function(){return Ze}),n.d(e,"produce",function(){return en}),n.d(e,"promiseAllObject",function(){return nn}),n.d(e,"prop",function(){return Vr}),n.d(e,"propEq",function(){return Rr}),n.d(e,"prototypeToString",function(){return pe}),n.d(e,"pushUniq",function(){return rn}),n.d(e,"random",function(){return on}),n.d(e,"range",function(){return te}),n.d(e,"reduce",function(){return Lr}),n.d(e,"reject",function(){return Fr}),n.d(e,"remove",function(){return un}),n.d(e,"renameProps",function(){return an}),n.d(e,"repeat",function(){return qr}),n.d(e,"replace",function(){return Xt}),n.d(e,"reset",function(){return zt}),n.d(e,"resolve",function(){return cn}),n.d(e,"reverse",function(){return $r}),n.d(e,"s",function(){return ln}),n.d(e,"setter",function(){return Bt}),n.d(e,"shuffle",function(){return ne}),n.d(e,"sort",function(){return Te}),n.d(e,"sortBy",function(){return Br}),n.d(e,"split",function(){return zr}),n.d(e,"splitEvery",function(){return Wr}),n.d(e,"startsWith",function(){return Ur}),n.d(e,"subtract",function(){return Jr}),n.d(e,"switcher",function(){return dn}),n.d(e,"tail",function(){return Yr}),n.d(e,"take",function(){return Me}),n.d(e,"takeLast",function(){return Gr}),n.d(e,"tap",function(){return Hr}),n.d(e,"tapAsync",function(){return yn}),n.d(e,"template",function(){return mn}),n.d(e,"test",function(){return le}),n.d(e,"throttle",function(){return wn}),n.d(e,"times",function(){return Qr}),n.d(e,"toDecimal",function(){return xn}),n.d(e,"toLower",function(){return ae}),n.d(e,"toPairs",function(){return nr}),n.d(e,"toString",function(){return Xr}),n.d(e,"toUpper",function(){return Zr}),n.d(e,"toggle",function(){return _n}),n.d(e,"trim",function(){return ti}),n.d(e,"tryCatch",function(){return On}),n.d(e,"type",function(){return f}),n.d(e,"uniq",function(){return ei}),n.d(e,"uniqWith",function(){return ni}),n.d(e,"unless",function(){return Sn}),n.d(e,"update",function(){return ri}),n.d(e,"uuid",function(){return oe}),n.d(e,"values",function(){return ii}),n.d(e,"wait",function(){return jn}),n.d(e,"waitFor",function(){return In}),n.d(e,"when",function(){return kn}),n.d(e,"whenAsync",function(){return En}),n.d(e,"where",function(){return Pn}),n.d(e,"whereEq",function(){return Cn}),n.d(e,"without",function(){return oi}),n.d(e,"zip",function(){return ui}),n.d(e,"zipObj",function(){return si});var r=n(94),i=n(95),o=n(96),u=n(21),s=n(13),a=n.n(s),c=n(33),l=n(42);function f(t){var e=typeof t;if(null===t)return"Null";if(void 0===t)return"Undefined";if("boolean"===e)return"Boolean";if("number"===e)return Number.isNaN(t)?"NaN":"Number";if("string"===e)return"String";if(Array.isArray(t))return"Array";if(t instanceof RegExp)return"RegExp";var n=t.toString();return n.startsWith("async")?"Async":"[object Promise]"===n?"Promise":"function"===e?"Function":"Object"}function h(t,e){if(1===arguments.length)return function(e){return h(t,e)};if(t===e)return!0;var n=f(t);if(n!==f(e))return!1;if("Array"===n){var r=Array.from(t),i=Array.from(e);if(r.toString()!==i.toString())return!1;var o=!0;return r.forEach(function(t,e){o&&(t===i[e]||h(t,i[e])||(o=!1))}),o}if("Object"===n){var u=Object.keys(t);if(u.length!==Object.keys(e).length)return!1;var s=!0;return u.forEach(function(n){if(s){var r=t[n],i=e[n];r===i||h(r,i)||(s=!1)}}),s}return!1}function p(t,e){if(1===arguments.length)return function(e){return p(t,e)};for(var n=-1;++n<e.length;)if(h(e[n],t))return!0;return!1}function d(){for(var t=0,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(;t<n.length;){if("Function"===f(n[t])){if(n[t]())return!1}else if(n[t])return!1;t++}return!0}function y(){for(var t=0,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(;t<n.length;){if("Function"===f(n[t])){if(!n[t]())return!1}else if(!n[t])return!1;t++}return!0}function v(t){return function(){for(var e=0,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;e<r.length;){if(f(r[e])!==t)return!1;e++}return!0}}function b(){for(var t=0,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(;t<n.length;){if(!n[t])return!0;t++}return!1}function g(){for(var t=0,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(;t<n.length;){if(n[t])return!0;t++}return!1}function m(t){return function(){for(var e=0,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;e<r.length;){if(f(r[e])===t)return!0;e++}return!1}}var w="Expected a function",x="__lodash_hash_undefined__",_=1/0,O=9007199254740991,S="[object Function]",j="[object GeneratorFunction]",I="[object Symbol]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,P=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,D=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,T="object"===typeof t&&t&&t.Object===Object&&t,M="object"===typeof self&&self&&self.Object===Object&&self,V=T||M||Function("return this")();var R=Array.prototype,L=Function.prototype,F=Object.prototype,q=V["__core-js_shared__"],$=function(){var t=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),B=L.toString,z=F.hasOwnProperty,W=F.toString,U=RegExp("^"+B.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=V.Symbol,K=R.splice,Y=ut(V,"Map"),G=ut(Object,"create"),H=J?J.prototype:void 0,Q=H?H.toString:void 0;function X(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Z(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function et(t,e,n){var r=t[e];z.call(t,e)&&ft(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function nt(t,e){for(var n=t.length;n--;)if(ft(t[n][0],e))return n;return-1}function rt(t){return!(!pt(t)||(e=t,Boolean($)&&$ in e))&&(function(t){var e=pt(t)?W.call(t):"";return e==S||e==j}(t)||function(t){var e=!1;if(null!=t&&"function"!==typeof t.toString)try{e=Boolean(String(t))}catch(n){}return e}(t)?U:D).test(function(t){if(null!=t){try{return B.call(t)}catch(e){}try{return String(t)}catch(e){}}return""}(t));var e}function it(t,e,n,r){if(!pt(t))return t;for(var i=-1,o=t,u=(e=function(t,e){if(ht(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||dt(t))return!0;return E.test(t)||!k.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return ht(t)?t:at(t)}(e)).length,s=u-1;null!=o&&++i<u;){var a=ct(e[i]),c=n;if(i!=s){var l=o[a];void 0===(c=r?r(l,a,o):void 0)&&(c=pt(l)?l:st(e[i+1])?[]:{})}et(o,a,c),o=o[a]}return t}function ot(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"===typeof e?"string":"hash"]:n.map}function ut(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return rt(n)?n:void 0}function st(t,e){return e=null==e?O:e,Boolean(e)&&("number"===typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}X.prototype.clear=function(){this.__data__=G?G(null):{}},X.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},X.prototype.get=function(t){var e=this.__data__;if(G){var n=e[t];return n===x?void 0:n}return z.call(e,t)?e[t]:void 0},X.prototype.has=function(t){var e=this.__data__;return G?void 0!==e[t]:z.call(e,t)},X.prototype.set=function(t,e){return this.__data__[t]=G&&void 0===e?x:e,this},Z.prototype.clear=function(){this.__data__=[]},Z.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():K.call(e,n,1),!0)},Z.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},Z.prototype.has=function(t){return nt(this.__data__,t)>-1},Z.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},tt.prototype.clear=function(){this.__data__={hash:new X,map:new(Y||Z),string:new X}},tt.prototype.delete=function(t){return ot(this,t).delete(t)},tt.prototype.get=function(t){return ot(this,t).get(t)},tt.prototype.has=function(t){return ot(this,t).has(t)},tt.prototype.set=function(t,e){return ot(this,t).set(t,e),this};var at=lt(function(t){var e;t=null==(e=t)?"":function(t){if("string"===typeof t)return t;if(dt(t))return Q?Q.call(t):"";var e=String(t);return"0"==e&&1/t==-_?"-0":e}(e);var n=[];return P.test(t)&&n.push(""),t.replace(A,function(t,e,r,i){n.push(r?i.replace(C,"$1"):e||t)}),n});function ct(t){if("string"===typeof t||dt(t))return t;var e=String(t);return"0"==e&&1/t==-_?"-0":e}function lt(t,e){if("function"!==typeof t||e&&"function"!==typeof e)throw new TypeError(w);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return n.cache=o.set(i,u),u};return n.cache=new(lt.Cache||tt),n}function ft(t,e){return t===e||t!==t&&e!==e}lt.Cache=tt;var ht=Array.isArray;function pt(t){var e=typeof t;return Boolean(t)&&("object"==e||"function"==e)}function dt(t){return"symbol"===typeof t||function(t){return Boolean(t)&&"object"===typeof t}(t)&&W.call(t)==I}function yt(t,e,n){return null==t?t:it(t,e,n)}function vt(t,e){if(1===arguments.length)return function(e){return vt(t,e)};if(!Array.isArray(e))return function(t,e){var n={},r={};return Object.entries(e).forEach(function(e){var i=Object(l.a)(e,2),o=i[0],u=i[1];t(u,o)?n[o]=u:r[o]=u}),[n,r]}(t,e);for(var n=[],r=[],i=-1;i++<e.length-1;)t(e[i],i)?n.push(e[i]):r.push(e[i]);return[n,r]}var bt=function(t){return!(null===t||Array.isArray(t)||"object"!==typeof t)&&Object.keys(t).length>0};function gt(t,e,n){var r=JSON.parse(JSON.stringify(t));if(!bt(n))return yt(r,e,n),r;for(var i=""===e?"":"".concat(e,"."),o=function(){var t=s[u],e=n[t];if(!bt(e))return yt(r,"".concat(i).concat(t),e),"continue";var o=vt(function(t){return bt(e[t])},Object.keys(e)),a=Object(l.a)(o,2),c=a[0];a[1].forEach(function(n){var o=e[n];yt(r,"".concat(i).concat(t,".").concat(n),o)}),c.forEach(function(n){var o=e[n];Object.keys(o).forEach(function(o){var u=e[n][o];if(!bt(u))return yt(r,"".concat(i).concat(t,".").concat(n,".").concat(o),u);Object.keys(u).forEach(function(u){var s=e[n][o][u];yt(r,"".concat(i).concat(t,".").concat(n,".").concat(o,".").concat(u),s)})})})},u=0,s=Object.keys(n);u<s.length;u++)o();return r}var mt=["Null","Undefined","RegExp"],wt=["Number","Boolean"],xt=["Array","String"];function _t(t){var e=[];return t.forEach(function(t){var n=f(t);if(!mt.includes(n))return wt.includes(n)?e.push(t):void("Object"!==n?xt.includes(n)&&0!==t.length&&e.push(t):h(t,{})||e.push(t))}),e}function Ot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){var t=Object(c.a)(a.a.mark(function t(n){var r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n;case 1:if(0===e.length){t.next=13;break}if(i=e.pop(),"Async"!==f(i)){t.next=10;break}return t.next=7,i(r);case 7:r=t.sent,t.next=11;break;case 10:r=i(r);case 11:t.next=1;break;case 13:return t.abrupt("return",r);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}function St(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){var t=e.slice();if(t.length>0){for(var n=t.pop().apply(void 0,arguments);t.length>0;)n=t.pop()(n);return n}}}function jt(t){return"string"===typeof t?t[t.length-1]||"":t[t.length-1]}function It(t,e,n){var r=-1,i=t.length;(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function kt(t){return"string"===typeof t?t.slice(0,-1):t.length?It(t,0,-1):[]}function Et(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return St.apply(void 0,Object(u.a)(kt(e)))(jt(e))}function Pt(t,e){return 1===arguments.length?function(e){return Pt(t,e)}:Array.isArray(e)?e.filter(function(e){return h(e,t)}).length:0}function At(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];var s=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||t.apply(null,o)},e),s&&t.apply(null,o)}}function Ct(t,e){return!!e&&(f(e)===t&&("Array"===t?!h([],e):"Object"!==t||!h({},e)))}function Dt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(1===arguments.length)return function(e){return Dt(t,e)};if(2===arguments.length)return Ct(f(t),n[0])?n[0]:t;for(var i,o=f(t),u=n.length-1,s=u+1,a=!1;!a;){var c=n[u-s+1];0===s?a=!0:Ct(o,c)?(i=c,a=!0):s-=1}return void 0===i?t:i}function Nt(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(2===arguments.length)return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Nt.apply(void 0,[t,e].concat(r))};for(var o,u=r.length-1,s=u+1,a=!1;!a;){var c=r[u-s+1];0===s?a=!0:!0===e(c)?(o=c,a=!0):s-=1}return void 0===o?t:o}function Tt(t){return new Promise(function(e){setTimeout(function(){e("RAMBDAX_DELAY")},t)})}function Mt(t,e){if(1===arguments.length)return function(e){return Mt(t,e)};var n={fallback:!0};return Object.entries(e).forEach(function(e){var r=Object(l.a)(e,2),i=r[0],o=r[1];n.fallback&&t(o,i)&&(n={prop:i,value:o})}),n}function Vt(t,e){if(1===arguments.length)return function(e){return Vt(t,e)};var n=e.length;if(0===n)return!1;for(var r=-1;++r<n;){var i=t(e[r],r);if(!1!==i)return i}return!1}function Rt(t,e){var n;return 1===arguments.length?function(e){return Rt(t,e)}:(n=[]).concat.apply(n,Object(u.a)(e.map(t)))}function Lt(t,e){if(1===arguments.length)return function(e){return Lt(t,e)};if(null!==e&&void 0!==e){for(var n="string"===typeof t?t.split(","):t,r={},i=0;i<n.length;)n[i]in e&&(r[n[i]]=e[n[i]]),i++;return r}}function Ft(t,e){return 1===arguments.length?function(e){return Ft(t,e)}:Object.assign({},t||{},e||{})}var qt={};function $t(t){var e=f(t);return"String"===e?qt[t]:"Array"===e?Lt(t,qt):qt}function Bt(t,e){var n=f(t),r=f(e);if("String"===n)return qt[t]="Function"===r?e(qt[t]):e;"Object"===n&&(qt=Ft(qt,t))}function zt(){qt={}}function Wt(t,e){return t.split("\n").filter(function(t){return t.trim().length>0}).map(function(t){return t.trim()}).join(void 0===e?" ":e)}function Ut(t,e){if(1===arguments.length)return function(e){return Ut(t,e)};if(null!==e&&void 0!==e){for(var n=e,r=0,i="string"===typeof t?t.split("."):t;r<i.length;){if(null===n||void 0===n)return;n=n[i[r]],r++}return n}}function Jt(t,e){return 1===arguments.length?function(e){return Jt(t,e)}:void 0!==Ut(t,e)}function Kt(t){var e=Object.entries(t),n=Object(l.a)(e,2),r=n[0],i=n[1];if(!r)return{prop:void 0,value:void 0};if(i)throw new Error("R.headObject expects object with only one key");return{prop:r[0],value:r[1]}}function Yt(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}function Gt(t,e,n){return function(r){return new Promise(function(i,o){var u=Yt(t),s=Yt(e),a=Yt(n);u(r).then(function(t){(!0===t?s:a)(r).then(i).catch(o)}).catch(o)})}}function Ht(t,e){if(1===arguments.length)return function(e){return Ht(t,e)};for(var n=0;n<e.length;){if(t(e[n],n))return!0;n++}return!1}function Qt(t,e){return 1===arguments.length?function(e){return Qt(t,e)}:Ht(function(e){return f(e)===t},e)}function Xt(t,e,n){return void 0===e?function(e,n){return Xt(t,e,n)}:void 0===n?function(n){return Xt(t,e,n)}:n.replace(t,e)}function Zt(t,e,n){return Xt(e,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?"".concat(t).concat(e):"".concat(e).concat(t),n)}function te(t,e){if(1===arguments.length)return function(e){return te(t,e)};for(var n=e-t,r=Array(n),i=0;i<n;i++)r[i]=t+i;return r}function ee(t){return"string"===typeof t?t[0]||"":t[0]}function ne(t){for(var e=t.concat(),n=e.length;n>0;){var r=Math.floor(Math.random()*n),i=e[--n];e[n]=e[r],e[r]=i}return e}var re=[].concat(Object(u.a)(te(49,57)),Object(u.a)(te(65,90)),Object(u.a)(te(97,122))),ie=te(0,8);function oe(){return ie.map(function(t){return String.fromCharCode(ee(ne(re)))}).join("")}var ue={};function se(t){var e=t.fn,n=t.ms,r=t.stopWhen,i=oe();return new Promise(function(t){ue[i]=setInterval(function(){!0===r()?(clearInterval(ue[i]),t()):e()},n)})}function ae(t){return t.toLowerCase()}function ce(t,e){if(1===arguments.length)return function(e){return ce(t,e)};if("string"===typeof e)return e.includes(t);if(!Array.isArray(e))return!1;for(var n=-1;++n<e.length;)if(h(e[n],t))return!0;return!1}function le(t,e){return 1===arguments.length?function(e){return le(t,e)}:-1!==e.search(t)}function fe(t,e){if(1===arguments.length)return function(e){return fe(t,e)};for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}function he(t){for(var e=t.prototype,n=[Number,String,Boolean,Promise],r=!1,i=-1;++i<n.length&&!r;)e===n[i].prototype&&(r=!0);return r}function pe(t){for(var e,n=t.prototype,r=[Number,String,Boolean,Promise],i=-1;++i<r.length;)n===r[i].prototype&&(e=i);return["Number","String","Boolean","Promise"][e]}var de=["any","promise","async","function"];function ye(t,e){var n=t[e],r=f(n),i=function(t){return Array.isArray(t)||void 0===t||null===t||void 0===t.prototype||de.includes(t)?{rule:t,parsed:!1}:String.prototype===t.prototype?{rule:"string",parsed:!0}:Boolean.prototype===t.prototype?{rule:"boolean",parsed:!0}:Number.prototype===t.prototype?{rule:"number",parsed:!0}:{rule:f(t.prototype).toLowerCase(),parsed:!0}}(n);return{rule:i.rule,ruleType:i.parsed?"String":r}}function ve(t){var e=t.input,n=t.schema;if(void 0===e||void 0===n)return!1;var r=!0,i=function(t){t||(r=!1)};for(var o in n)if(r){var u=o.endsWith("?"),s=u?kt(o):o,a=ye(n,o),c=a.rule,h=a.ruleType,p=e[s],d=f(e[s]);if(!(u&&void 0!==p||!u)||"any"===c&&null!=p||c===p)continue;if("Object"===h){var y=ve({input:p,schema:c});i(y)}else"String"===h?i(ae(d)===c):"function"===typeof c?i(c(p)):"Array"===h&&"String"===d?i(ce(p,c)):"Array"===h&&1===c.length&&"Array"===d?function(){var t=Object(l.a)(c,1)[0],e=f(t);if(i("String"===e||"Object"===e||he(t)),"Object"===e&&r){var n=fe(function(e){return ve({input:e,schema:t})},p);i(n)}else if(r){var o="String"===e?t:pe(t),u=Ht(function(t){return f(t).toLowerCase()!==o.toLowerCase()},p);i(!u)}}():i("RegExp"===h&&"String"===d&&le(c,p))}return r}function be(){return void 0===Object.prototype.is&&(Object.defineProperty(Object.prototype,"is",{value:function(t){return ve({input:{isProp:this},schema:{isProp:t}})},writable:!0,configurable:!0}),!0)}function ge(t){return["Async","Promise","Function"].includes(f(t))}function me(t){var e=f(t);return["Array","String"].includes(e)?0===t.length:"Object"===e?0===Object.keys(t).length:!!["Null","Undefined"].includes(e)}function we(t){return["Async","Promise"].includes(f(t))}function xe(t,e){return 1===arguments.length?function(e){return xe(t,e)}:f(e)===t}function _e(t,e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(c.a)(a.a.mark(function t(e,n){var r,i,o,u,s,c,l,f,h;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Array.isArray(n)){t.next=32;break}r=[],i=!0,o=!1,u=void 0,t.prev=5,s=n[Symbol.iterator]();case 7:if(i=(c=s.next()).done){t.next=17;break}return l=c.value,t.t0=r,t.next=12,e(l);case 12:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 14:i=!0,t.next=7;break;case 17:t.next=23;break;case 19:t.prev=19,t.t2=t.catch(5),o=!0,u=t.t2;case 23:t.prev=23,t.prev=24,i||null==s.return||s.return();case 26:if(t.prev=26,!o){t.next=29;break}throw u;case 29:return t.finish(26);case 30:return t.finish(23);case 31:return t.abrupt("return",r);case 32:f={},t.t3=a.a.keys(n);case 34:if((t.t4=t.t3()).done){t.next=41;break}return h=t.t4.value,t.next=38,e(n[h],h);case 38:f[h]=t.sent,t.next=34;break;case 41:return t.abrupt("return",f);case 42:case"end":return t.stop()}},t,null,[[5,19,23,31],[24,,26,30]])}))).apply(this,arguments)}function Se(t,e){return 1===arguments.length?function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_e(t,n));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}():new Promise(function(n,r){_e(t,e).then(n).catch(r)})}function je(t,e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(c.a)(a.a.mark(function t(e,n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map(function(t){return e(t)}),t.abrupt("return",Promise.all(r));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ke(t,e){return 1===arguments.length?function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je(t,n));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}():new Promise(function(n,r){je(t,e).then(n).catch(r)})}function Ee(t,e){if(1===arguments.length)return function(e){return Ee(t,e)};if(void 0===e)return[];if(!Array.isArray(e))return function(t,e){var n={};for(var r in e)n[r]=t(e[r],r,e);return n}(t,e);for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n);return i}function Pe(t){var e={};return Ee(function(t){e=Ft(e,t)},t),e}function Ae(t,e){return ve({input:{singleInput:t},schema:{singleInput:e}})}function Ce(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;if(!(!1===Ht(function(t,e){var r=void 0===n[e]?n[0]:n[e],o=Ae(t,r);return o||(i=JSON.stringify({input:t,schema:r})),!o},e)))throw new Error("Failed R.ok with schema ".concat(i));return!0}}function De(t,e){return 1===arguments.length?function(e){return De(t,e)}:(Ce(f(t),f(e))("Function","Array"),Pe(Ee(t,e)))}function Ne(t,e,n){var r=t&&"Function"===f(e)?e():e,i=t||"Function"!==f(n)?n:n();return t?r:i}function Te(t,e){return 1===arguments.length?function(e){return Te(t,e)}:e.concat().sort(t)}function Me(t,e){return 1===arguments.length?function(e){return Me(t,e)}:"string"===typeof e?e.slice(0,t):It(e,0,t)}var Ve={},Re=function(t){if("String"===f(t))return t;if(["Function","Async"].includes(f(t))){var e=Xt(/\s{1,}/g," ",t.toString());return Xt(/\s/g,"_",Me(15,e))}return"Object"===f(t)?JSON.stringify(function(t){var e={};return St(Ee(function(n){return e[n]=t[n]}),Te(function(t,e){return t>e?1:-1}))(Object.keys(t)),e}(t)):JSON.stringify(t)},Le=function(t){for(var e="",n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(t){e+="".concat(Re(t),"_")}),"".concat(e).concat(Re(t))};function Fe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(1===arguments.length)return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Fe.apply(void 0,[t].concat(n))};var i=Le.apply(void 0,[t].concat(n));if(i in Ve)return Ve[i];if("Async"===f(t))return new Promise(function(e){t.apply(void 0,n).then(function(t){Ve[i]=t,e(t)})});var o=t.apply(void 0,n);return Ve[i]=o,o}function qe(t,e){return Ft(e,t)}function $e(t,e){if(1===arguments.length)return function(e){return $e(t,e)};var n=JSON.parse(JSON.stringify(t));return Object.keys(e).forEach(function(r){"Object"===f(e[r])&&"Object"===f(t[r])?n[r]=$e(t[r],e[r]):n[r]=e[r]}),n}function Be(t,e){return t>=("number"===typeof e?e:e.length)-1?0:t+1}function ze(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return!1===Ht(function(t,e){return!Ae(t,void 0===n[e]?n[0]:n[e])},e)}}function We(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(o=[].concat(Object(u.a)(e),r)).length>=t.length?t.apply(void 0,Object(u.a)(o)):We(t,o);var o}}function Ue(t,e){var n;return function(){return t&&(n=t.apply(e||this,arguments),t=null),n}}function Je(t,e){return 1===arguments.length?We(Ue(t,e)):Ue(t,e)}function Ke(t,e){return 1===arguments.length?function(e){return Ke(t,e)}:new Promise(function(n){e.then(n).catch(function(e){return n(t(e))})})}function Ye(t,e,n){return 2===arguments.length?function(n){return Ye(t,e,n)}:Ut(t,n)===e}function Ge(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return St.apply(void 0,Object(u.a)(e.reverse()))}function He(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e.slice(1);return Ge.apply(void 0,Object(u.a)(i))(r)}function Qe(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(c.a)(a.a.mark(function t(){var e,n,r,i,o,u,s,c=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=c.length,n=new Array(e),r=0;r<e;r++)n[r]=c[r];i=n[0],o=n.slice(1),u=i;case 3:if(0===o.length){t.next=15;break}if(s=o.shift(),"Async"!==f(s)){t.next=12;break}return t.next=9,s(u);case 9:u=t.sent,t.next=13;break;case 12:u=s(u);case 13:t.next=3;break;case 15:return t.abrupt("return",u);case 16:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ze(t,e){var n="number"===typeof e?e:e.length;return 0===t?n-1:t-1}function tn(t){var e=t.condition,n=t.inputArgument,r=t.prop;return new Promise(function(t,i){if("Async"!==f(e))return t({type:r,payload:e(n)});e(n).then(function(e){t({type:r,payload:e})}).catch(function(t){return i(t)})})}function en(t,e){if(1===arguments.length)return function(e){return en(t,e)};var n=!1;for(var r in t)!1===n&&"Async"===f(t[r])&&(n=!0);if(!1===n){var i={};for(var o in t)i[o]=t[o](e);return i}var u=[];for(var s in t){var a=t[s];u.push(tn({inputArgument:e,condition:a,prop:s}))}return new Promise(function(t,e){Promise.all(u).then(function(e){var n={};Ee(function(t){return n[t.type]=t.payload},e),t(n)}).catch(function(t){return e(t)})})}function nn(t){return new Promise(function(e,n){var r=0,i={},o=[];for(var u in t)i[r]=u,o.push(t[u]),r++;Promise.all(o).then(function(t){var n={};t.map(function(t,e){var r=i[e];n[r]=t}),e(n)}).catch(n)})}function rn(t,e){e.includes(t)||e.push(t)}function on(t,e){return Math.floor(Math.random()*(e-t+1))+t}function un(t,e){if(1===arguments.length)return function(e){return un(t,e)};if("String"!==f(e))throw new Error("R.remove requires string not ".concat(f(e)));if("Array"!==f(t))return Xt(t,"",e).trim();var n=e;return t.forEach(function(t){n=Xt(t,"",n).trim()}),n}function sn(t,e){if(1===arguments.length)return function(e){return sn(t,e)};if(null!==e&&void 0!==e){var n="string"===typeof t?t.split(","):t,r={};for(var i in e)n.includes(i)||(r[i]=e[i]);return r}}function an(t,e){if(void 0===e)return function(e){return an(t,e)};var n={};return Object.keys(t).forEach(function(r){Object.keys(e).includes(r)&&(n[t[r]]=e[r])}),Ft(n,sn(Object.keys(t),e))}function cn(t,e){return 1===arguments.length?function(e){return cn(t,e)}:new Promise(function(n){e.then(function(e){return n(t(e))})})}function ln(){return void 0===Object.prototype.s&&(Object.defineProperty(Object.prototype,"s",{value:function(t){return t(this.valueOf())},writable:!0,configurable:!0}),!0)}var fn=Symbol?Symbol("NO_MATCH_FOUND"):void 0,hn=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{key:t,test:function(n){return function(t,e){return"function"===typeof t?t(e):h(t,e)}(t,n)?e:fn}}},pn=function(){function t(e,n,r){return Object(i.a)(this,t),void 0!==e&&void 0===n&&void 0===r?(this.cases=[],this.defaultValue=void 0,this.willMatch=e):(this.cases=n,this.defaultValue=e,this.willMatch=r),this}return Object(o.a)(t,[{key:"default",value:function(e){return new t(e,this.cases,this.willMatch).match(this.willMatch)}},{key:"is",value:function(e,n){return new t(this.defaultValue,[].concat(Object(u.a)(this.cases),[hn(e,n)]),this.willMatch)}},{key:"match",value:function(t){return function(t,e,n){for(var r,i=0;i<t.length;i++)if((r=t[i].test(e))!==fn)return r;return n}(this.cases,t,this.defaultValue)}}]),t}();function dn(t){return new pn(t)}function yn(t,e){return 1===arguments.length?function(e){return yn(t,e)}:!0===we(t)?new Promise(function(n,r){t(e).then(function(){n(e)}).catch(r)}):(t(e),e)}var vn=function(t){return t.match(/{{[_a-zA-Z0-9]+}}/g)},bn=function(t){return t.replace(/{{|}}/g,"")},gn=function(t){var e=t.inputHolder,n=t.prop,r=t.replacer;return e.replace("{{".concat(n,"}}"),r)};function mn(t,e){if(1===arguments.length)return function(e){return mn(t,e)};var n=vn(t);if(null===n)return t;var r=t,i=!0,o=!1,u=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var c=s.value,l=bn(c),f=e[l];void 0!==f&&(r=gn({inputHolder:r,prop:l,replacer:f}))}}catch(h){o=!0,u=h}finally{try{i||null==a.return||a.return()}finally{if(o)throw u}}return r}function wn(t,e){var n=!1;return function(){if(!n){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.apply(null,i),n=!0,setTimeout(function(){n=!1},e)}}}function xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(parseFloat(String(t)).toFixed(e))}function _n(t,e){return t===e[0]?e[1]:e[0]}function On(t,e){if(!ge(t))throw new Error("R.tryCatch | fn '".concat(t,"'"));var n=ge(e);return we(t)?function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return new Promise(function(r){t.apply(void 0,i).then(r).catch(function(){return n?we(e)?void e.apply(void 0,i).then(r):r(e.apply(void 0,i)):r(e)})})}:function(){try{return t.apply(void 0,arguments)}catch(r){return n?e.apply(void 0,arguments):e}}}function Sn(t,e){return 1===arguments.length?function(e){return Sn(t,e)}:function(n){return("boolean"===typeof t?t:t(n))?n:ge(e)?e(n):e}}function jn(t){return new Promise(function(e){t.then(function(t){return e([t,void 0])}).catch(function(t){return e([void 0,t])})})}function In(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=f(t),i="Async"===r,o="Function"===r,u=Math.floor(e/n);if(!i&&!o)throw new Error("R.waitFor");return Object(c.a)(a.a.mark(function e(){var r,i,o,s,c,l,f=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,o=void 0,e.prev=3,s=te(0,n)[Symbol.iterator]();case 5:if(r=(c=s.next()).done){e.next=19;break}return c.value,e.next=9,t.apply(void 0,f);case 9:if(!1!==(l=e.sent)){e.next=15;break}return e.next=13,Tt(u);case 13:e.next=16;break;case 15:return e.abrupt("return",l);case 16:r=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),i=!0,o=e.t0;case 25:e.prev=25,e.prev=26,r||null==s.return||s.return();case 28:if(e.prev=28,!i){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.abrupt("return",!1);case 34:case"end":return e.stop()}},e,null,[[3,21,25,33],[26,,28,32]])}))}function kn(t,e){return 1===arguments.length?function(e){return kn(t,e)}:function(n){return("boolean"===typeof t?t:t(n))?ge(e)?e(n):e:n}}function En(t,e){return 1===arguments.length?function(e){return En(t,e)}:function(n){return new Promise(function(r,i){if("boolean"===typeof t){if(!1===t)return r(n);e(n).then(r).catch(i)}else{(o=t,function(){var t=Object(c.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o(e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())(n).then(function(t){if(!1===t)return r(n);e(n).then(r).catch(i)}).catch(i)}var o})}}function Pn(t,e){if(void 0===e)return function(e){return Pn(t,e)};var n=!0;for(var r in t){var i=t[r](e[r]);n&&!1===i&&(n=!1)}return n}function An(t,e){if(1===arguments.length)return function(e){return An(t,e)};if(void 0===e)return[];if(!Array.isArray(e))return function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}(t,e);for(var n=-1,r=0,i=e.length,o=[];++n<i;){var u=e[n];t(u,n)&&(o[r++]=u)}return o}function Cn(t,e){if(1===arguments.length)return function(e){return Cn(t,e)};if("Object"!==f(e))return!1;var n=An(function(t,n){return h(t,e[n])},t);return Object.keys(n).length===Object.keys(t).length}function Dn(t,e){return 1===arguments.length?function(e){return Dn(t,e)}:t+e}var Nn=We(function(t,e,n){var r=n.slice(),i=e<0?r.length+e:e;return r[i]=t(r[i]),r});function Tn(t,e){return 1===arguments.length?function(e){return Tn(t,e)}:!Ht(function(t){return!t(e)},t)}function Mn(t){return function(){return t}}function Vn(t,e){return 1===arguments.length?function(e){return Vn(t,e)}:Ht(function(t){return t(e)})(t)}function Rn(t,e){if(1===arguments.length)return function(e){return Rn(t,e)};if("string"===typeof e)return"".concat(e).concat(t);var n=e.concat();return n.push(t),n}var Ln=We(function(t,e,n){return Object.assign({},n,Object(r.a)({},t,e))});function Fn(t,e){return 1===arguments.length?function(e){return Fn(t,e)}:function(n){return t(n)&&e(n)}}function qn(t){return function(e){return!t(e)}}function $n(t,e){return 1===arguments.length?function(e){return $n(t,e)}:"string"===typeof t?"".concat(t).concat(e):[].concat(Object(u.a)(t),Object(u.a)(e))}var Bn=function(t){return t-1};function zn(t){return void 0===t||null===t||!0===Number.isNaN(t)}function Wn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(1===arguments.length)return function(e){return Wn(t,e)};if(2===arguments.length)return zn(n[0])?t:n[0];for(var i,o=n.length-1,u=o+1,s=!1;!s;){var a=n[o-u+1];0===u?s=!0:zn(a)?u-=1:(i=a,s=!0)}return void 0===i?t:i}function Un(t,e){if(1===arguments.length)return function(e){return Un(t,e)};if(null===e||void 0===e)return{};var n={};for(var r in e)n[r]=e[r];return delete n[t],n}function Jn(t,e){return 1===arguments.length?function(e){return Jn(t,e)}:t/e}function Kn(t,e){return 1===arguments.length?function(e){return Kn(t,e)}:e.slice(t)}function Yn(t,e){return 1===arguments.length?function(e){return Yn(t,e)}:e.slice(0,-t)}function Gn(t,e){return 1===arguments.length?function(e){return Gn(t,e)}:function(n){return t(n)||e(n)}}function Hn(t,e){return 1===arguments.length?function(e){return Hn(t,e)}:e.endsWith(t)}function Qn(){return!1}function Xn(t,e){return 1===arguments.length?function(e){return Xn(t,e)}:e.find(t)}function Zn(t,e){if(1===arguments.length)return function(e){return Zn(t,e)};for(var n=e.length,r=-1;++r<n;)if(t(e[r],r))return r;return-1}function tr(t,e){for(var n=void 0===e?[]:e,r=0;r<t.length;r++)Array.isArray(t[r])?tr(t[r],n):n.push(t[r]);return n}function er(t){return function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 1===n.length?function(e){return t(e,n[0])}:2===n.length?t(n[1],n[0]):void 0}}(t)}function nr(t){return Object.entries(t)}function rr(t){var e={};return t.forEach(function(t){var n=Object(l.a)(t,2),r=n[0],i=n[1];return e[r]=i}),e}function ir(t){var e=Array.isArray(t)?Array(t.length):{};for(var n in t){var r=t[n];e[n]="object"===typeof r&&null!==r?r.getTime?new Date(r.getTime()):ir(r):r}return e}function or(t,e){return 1===arguments.length?function(e){return or(t,e)}:(Ee(t,e),e)}function ur(t,e){if(1===arguments.length)return function(e){return ur(t,e)};for(var n={},r=0;r<e.length;r++){var i=e[r],o=t(i);n[o]||(n[o]=[]),n[o].push(i)}return n}function sr(t,e){var n=[],r=[];return e.reduce(function(i,o,u){return u>0&&t(i,o)?0===r.length?(r.push(i),r.push(o)):r.push(o):u>0&&(0===r.length?(n.push([i]),u===e.length-1&&r.push(o)):(n.push(r),r=[])),o},void 0),0===r.length?n:[].concat(n,[r])}function ar(t,e){return 1===arguments.length?function(e){return ar(t,e)}:void 0!==e[t]}function cr(t){return t}function lr(t,e,n){return void 0===e?function(e,n){return lr(t,e,n)}:void 0===n?function(n){return lr(t,e,n)}:function(r){return!0===("boolean"===typeof t?t:t(r))?e(r):n(r)}}var fr=function(t){return t+1};function hr(t,e){if(1===arguments.length)return function(e){return hr(t,e)};for(var n={},r=0;r<e.length;r++){var i=e[r];n[t(i)]=i}return n}function pr(t,e){if(1===arguments.length)return function(e){return pr(t,e)};for(var n=-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}function dr(t,e){return 1===arguments.length?function(e){return dr(t,e)}:null!=e&&e.constructor===t||e instanceof t}function yr(t){return void 0===t||null===t}function vr(t,e){return 1===arguments.length?function(e){return vr(t,e)}:e.join(t)}function br(t){return Object.keys(t)}function gr(t,e){if(1===arguments.length)return function(e){return gr(t,e)};for(var n=e.length;--n>0;)if(h(e[n],t))return n;return-1}function mr(t){return t.length}function wr(t,e){if(1===arguments.length)return function(e){return wr(t,e)};var n=e.match(t);return null===n?[]:n}function xr(t,e){return 1===arguments.length?function(e){return xr(t,e)}:e>t?e:t}function _r(t,e,n){return 2===arguments.length?function(n){return _r(t,e,n)}:1===arguments.length?function(e,n){return _r(t,e,n)}:t(n)>t(e)?n:e}function Or(t,e){return 1===arguments.length?function(e){return Or(t,e)}:e<t?e:t}function Sr(t,e,n){return 2===arguments.length?function(n){return Sr(t,e,n)}:1===arguments.length?function(e,n){return Sr(t,e,n)}:t(n)<t(e)?n:e}function jr(t,e){return 1===arguments.length?function(e){return jr(t,e)}:t%e}function Ir(t,e){return 1===arguments.length?function(e){return Ir(t,e)}:t*e}function kr(t,e){return 1===arguments.length?function(e){return kr(t,e)}:0===e.filter(t).length}function Er(t){return!t}function Pr(t,e){if(1===arguments.length)return function(e){return Pr(t,e)};var n=t<0?e.length+t:t;return"[object String]"===Object.prototype.toString.call(e)?e.charAt(n):e[n]}function Ar(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.length;return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n.length+r.length>=i?t.apply(void 0,n.concat(r)):Ar.apply(void 0,[t].concat([].concat(n,r)))}}function Cr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return"Async"===f(t)||"Promise"===f(t)?new Promise(function(r,i){t(Ft(n,e)).then(r).catch(i)}):t(Ft(n,e))}}var Dr=We(function(t,e,n){return Wn(t,Ut(e,n))});function Nr(t,e){if(1===arguments.length)return function(e){return Nr(t,e)};if(null!==e&&void 0!==e){for(var n="string"===typeof t?t.split(","):t,r={},i=0;i<n.length;)n[i]in e?r[n[i]]=e[n[i]]:r[n[i]]=void 0,i++;return r}}function Tr(t,e){if(1===arguments.length)return function(e){return Tr(t,e)};var n=[];return Ee(function(e){void 0!==e[t]&&n.push(e[t])},e),n}function Mr(t,e){return 1===arguments.length?function(e){return Mr(t,e)}:"string"===typeof e?"".concat(t).concat(e):[t].concat(e)}function Vr(t,e){return 1===arguments.length?function(e){return Vr(t,e)}:e?e[t]:void 0}function Rr(t,e,n){return void 0===e?function(e,n){return Rr(t,e,n)}:void 0===n?function(n){return Rr(t,e,n)}:n[t]===e}var Lr=We(function(t,e,n){return n.reduce(t,e)});function Fr(t,e){return 1===arguments.length?function(e){return Fr(t,e)}:An(function(e,n){return!t(e,n)},e)}function qr(t,e){return 1===arguments.length?function(e){return qr(t,e)}:Array(e).fill(t)}function $r(t){return t.concat().reverse()}function Br(t,e){return 1===arguments.length?function(e){return Br(t,e)}:e.concat().sort(function(e,n){var r=t(e),i=t(n);return r===i?0:r<i?-1:1})}function zr(t,e){return 1===arguments.length?function(e){return zr(t,e)}:e.split(t)}function Wr(t,e){if(1===arguments.length)return function(e){return Wr(t,e)};for(var n=t>1?t:1,r=[],i=0;i<e.length;)r.push(e.slice(i,i+=n));return r}function Ur(t,e){return 1===arguments.length?function(e){return Ur(t,e)}:e.startsWith(t)}function Jr(t,e){return 1===arguments.length?function(e){return Jr(t,e)}:t-e}function Kr(){return!0}function Yr(t){return Kn(1,t)}function Gr(t,e){if(1===arguments.length)return function(e){return Gr(t,e)};var n=e.length,r=t>n?n:t;return"string"===typeof e?e.slice(n-r):It(e,r=n-r,n)}function Hr(t,e){return 1===arguments.length?function(e){return Hr(t,e)}:(t(e),e)}function Qr(t,e){return 1===arguments.length?function(e){return Qr(t,e)}:Ee(t,te(0,e))}function Xr(t){return t.toString()}function Zr(t){return t.toUpperCase()}function ti(t){return t.trim()}function ei(t){for(var e=-1,n=[];++e<t.length;){var r=t[e];ce(r,n)||n.push(r)}return n}function ni(t,e){if(1===arguments.length)return function(e){return ni(t,e)};for(var n=-1,r=e.length,i=[],o=function(){var r=e[n];Ht(function(e){return t(r,e)},i)||i.push(r)};++n<r;)o();return i}function ri(t,e,n){return void 0===e?function(e,n){return ri(t,e,n)}:void 0===n?function(n){return ri(t,e,n)}:n.concat().fill(e,t,t+1)}function ii(t){return Object.values(t)}function oi(t,e){return void 0===e?function(e){return oi(t,e)}:Lr(function(e,n){return ce(n,t)?e:e.concat(n)},[],e)}function ui(t,e){if(1===arguments.length)return function(e){return ui(t,e)};for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=[t[i],e[i]];return n}function si(t,e){return 1===arguments.length?function(e){return si(t,e)}:t.reduce(function(t,n,r){return t[n]=e[r],t},{})}var ai="RAMBDAX_DELAY"}.call(this,n(75))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return h});var r=n(0),i=n(1),o=n(5),u=n(2),s=n(6);function a(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}var c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.keySelector=n,u.elementSelector=r,u.durationSelector=i,u.subjectSelector=o,u.groups=null,u.attemptedToUnsubscribe=!1,u.count=0,u}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(a){this.error(a)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);var o=new h(e,i,this);if(this.destination.next(o),this.durationSelector){var u=void 0;try{u=this.durationSelector(new h(e,i))}catch(a){return void this.error(a)}this.add(u.subscribe(new f(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),f=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.a(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new p(n)),e.add(r.subscribe(t)),e},e}(u.a),p=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l});var r=n(0),i=n(6),o=n(2),u=n(1),s=n(5),a=n(43),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t},e.prototype.refCount=function(){return Object(a.a)()(this)},e}(o.a),l=function(){var t=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);u.a},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),i=n(6),o=n(23),u=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(18);function u(t,e){return void 0===e&&(e=0),function(n){return n.lift(new s(t,e))}}var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))},t}(),a=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.a.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(o.a.createComplete()),this.unsubscribe()},e}(i.a),c=function(){return function(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(47);function i(){return Object(r.a)(1)}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n(10),o=n(47),u=n(28);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,a=t[t.length-1];return Object(i.a)(a)?(s=t.pop(),t.length>1&&"number"===typeof t[t.length-1]&&(n=t.pop())):"number"===typeof a&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(u.a)(t,s))}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(7),o=n(28),u=n(4),s=n(3);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new c)}var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(e)},e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),i=n(8),o=n(32),u=n(10);function s(t,e,n){void 0===t&&(t=0);var s=-1;return Object(o.a)(e)?s=Number(e)<1?1:Number(e):Object(u.a)(e)&&(n=e),Object(u.a)(n)||(n=i.a),new r.a(function(e){var r=Object(o.a)(t)?t:+t-n.now();return n.schedule(a,r,{index:0,period:s,subscriber:e})})}function a(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(22);var u=n(52),s=n(20);var a=n(72),c=n(71);function l(t,e){if(null!=t){if(function(t){return t&&"function"===typeof t[o.a]}(t))return function(t,e){return new r.a(function(n){var r=new i.a;return r.add(e.schedule(function(){var i=t[o.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Object(a.a)(t))return function(t,e){return new r.a(function(n){var r=new i.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Object(c.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"===typeof t[s.a]}(t)||"string"===typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,o=new i.a;return o.add(function(){r&&"function"===typeof r.return&&r.return()}),o.add(e.schedule(function(){r=t[s.a](),o.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),o})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",function(){return l})},function(t,e,n){"use strict";var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(31).a),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e}(n(29).a);n.d(e,"a",function(){return u});var u=new o(i)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(5).a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"===typeof t.length&&"function"!==typeof t}},function(t,e,n){"use strict";function r(t){return!!t&&"function"!==typeof t.subscribe&&"function"===typeof t.then}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",function(){return r})},function(t,e,n){(function(r,i){var o,u,s;u=[],void 0===(s="function"===typeof(o=function(){return function(){"use strict";var t=Object.prototype.hasOwnProperty,e={copyProperties:function(t,e){var n;for(n in t)e[n]=t[n]},resolveTransformObject:function(t,n,r){var i,o;if("number"!==typeof r&&(r=0),++r>=10)return t;for(i in t)"string"===typeof t[i]&&0===t[i].indexOf("[%lktxp]")?(o=t[i].substring(8),n.hasOwnProperty(o)&&(t[i]=n[o])):"object"===typeof t[i]&&(t[i]=e.resolveTransformObject(t[i],n,r));return t},resolveTransformParams:function(t,n){var r,i,o=[];if("undefined"===typeof n)return t;for(r=0;r<t.length;r++)i=y(t[r],"shallow-recurse-objects"),o.push(e.resolveTransformObject(i,n));return o},getIn:function(t,e,n){if(null!=t){if(!n)return t[e];if("string"===typeof e&&(e=e.split(".")),!Array.isArray(e))throw new Error("path must be a string or array. Found "+typeof e);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:void 0}}},o={aeq:u,lt:s,gt:a};function u(t,e){var n,r,i,o;if(t===e)return!0;if(!t||!e||!0===t||!0===e||t!==t||e!==e){switch(t){case void 0:case null:i=1;break;case!1:i=3;break;case!0:i=4;break;case"":i=5;break;default:i=t===t?9:0}switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e===e?9:0}if(9!==i||9!==o)return i===o}return n=Number(t),r=Number(e),n===n||r===r?n===r:(n=t.toString(),r=e.toString(),n==r)}function s(t,e,n){var r,i,o,u;if(!t||!e||!0===t||!0===e||t!==t||e!==e){switch(t){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=t===t?9:0}switch(e){case void 0:case null:u=1;break;case!1:u=3;break;case!0:u=4;break;case"":u=5;break;default:u=e===e?9:0}if(9!==o||9!==u)return o===u?n:o<u}return r=Number(t),i=Number(e),r===r&&i===i?r<i||!(r>i)&&n:r===r&&i!==i||(i!==i||r===r)&&(t<e||!(t>e)&&(t==e?n:(r=t.toString(),i=e.toString(),r<i||r==i&&n)))}function a(t,e,n){var r,i,o,u;if(!t||!e||!0===t||!0===e||t!==t||e!==e){switch(t){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=t===t?9:0}switch(e){case void 0:case null:u=1;break;case!1:u=3;break;case!0:u=4;break;case"":u=5;break;default:u=e===e?9:0}if(9!==o||9!==u)return o===u?n:o>u}return r=Number(t),i=Number(e),r===r&&i===i?r>i||!(r<i)&&n:(r!==r||i===i)&&(i===i&&r!==r||t>e||!(t<e)&&(t==e?n:(r=t.toString(),i=e.toString(),r>i||r==i&&n)))}function c(t,e,n){return o.aeq(t,e)?0:o.lt(t,e,!1)?n?1:-1:o.gt(t,e,!1)?n?-1:1:0}function l(t,e,n,r,i){var o,u=i||0,s=e[u],a=!1;if("object"===typeof t&&s in t&&(o=t[s]),u+1>=e.length)a=n(o,r);else if(Array.isArray(o))for(var c=0,f=o.length;c<f&&!0!==(a=l(o[c],e,n,r,u+1));c+=1);else a=l(o,e,n,r,u+1);return a}function f(e){return"string"===typeof e||Array.isArray(e)?function(t){return-1!==e.indexOf(t)}:"object"===typeof e&&null!==e?function(n){return t.call(e,n)}:null}function h(e,n){for(var r in n)if(t.call(n,r))return p[r](e,n[r]);return!1}var p={$eq:function(t,e){return t===e},$aeq:function(t,e){return t==e},$ne:function(t,e){return e!==e?t===t:t!==e},$dteq:function(t,e){return o.aeq(t,e)},$gt:function(t,e){return o.gt(t,e,!1)},$gte:function(t,e){return o.gt(t,e,!0)},$lt:function(t,e){return o.lt(t,e,!1)},$lte:function(t,e){return o.lt(t,e,!0)},$jgt:function(t,e){return t>e},$jgte:function(t,e){return t>=e},$jlt:function(t,e){return t<e},$jlte:function(t,e){return t<=e},$between:function(t,e){return void 0!==t&&null!==t&&o.gt(t,e[0],!0)&&o.lt(t,e[1],!0)},$jbetween:function(t,e){return void 0!==t&&null!==t&&t>=e[0]&&t<=e[1]},$in:function(t,e){return-1!==e.indexOf(t)},$nin:function(t,e){return-1===e.indexOf(t)},$keyin:function(t,e){return t in e},$nkeyin:function(t,e){return!(t in e)},$definedin:function(t,e){return void 0!==e[t]},$undefinedin:function(t,e){return void 0===e[t]},$regex:function(t,e){return e.test(t)},$containsString:function(t,e){return"string"===typeof t&&-1!==t.indexOf(e)},$containsNone:function(t,e){return!p.$containsAny(t,e)},$containsAny:function(t,e){var n=f(t);return null!==n&&(Array.isArray(e)?e.some(n):n(e))},$contains:function(t,e){var n=f(t);return null!==n&&(Array.isArray(e)?e.every(n):n(e))},$elemMatch:function(t,e){return!!Array.isArray(t)&&t.some(function(t){return Object.keys(e).every(function(n){var r=e[n];return"object"===typeof r&&r||(r={$eq:r}),-1!==n.indexOf(".")?l(t,n.split("."),h,e[n]):h(t[n],r)})})},$type:function(t,e){var n=typeof t;return"object"===n&&(Array.isArray(t)?n="array":t instanceof Date&&(n="date")),"object"!==typeof e?n===e:h(n,e)},$finite:function(t,e){return e===isFinite(t)},$size:function(t,e){return!!Array.isArray(t)&&("object"!==typeof e?t.length===e:h(t.length,e))},$len:function(t,e){return"string"===typeof t&&("object"!==typeof e?t.length===e:h(t.length,e))},$where:function(t,e){return!0===e(t)},$not:function(t,e){return!h(t,e)},$and:function(t,e){for(var n=0,r=e.length;n<r;n+=1)if(!h(t,e[n]))return!1;return!0},$or:function(t,e){for(var n=0,r=e.length;n<r;n+=1)if(h(t,e[n]))return!0;return!1},$exists:function(t,e){return e?void 0!==t:void 0===t}},d={$eq:p.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function y(t,e){if(null===t||void 0===t)return null;var n,r=e||"parse-stringify";switch(r){case"parse-stringify":n=JSON.parse(JSON.stringify(t));break;case"jquery-extend-deep":n=jQuery.extend(!0,{},t);break;case"shallow":n=Object.create(t.constructor.prototype),Object.keys(t).map(function(e){n[e]=t[e]});break;case"shallow-assign":n=Object.create(t.constructor.prototype),Object.assign(n,t);break;case"shallow-recurse-objects":n=y(t,"shallow");var i=Object.keys(t);i.forEach(function(e){"object"===typeof t[e]&&"Object"===t[e].constructor.name?n[e]=y(t[e],"shallow-recurse-objects"):Array.isArray(t[e])&&(n[e]=function(t,e){if("parse-stringify"==e)return y(t,e);for(var n=[],r=0,i=t.length;r<i;r++)n[r]=y(t[r],e);return n}(t[e],"shallow-recurse-objects"))})}return n}function v(){try{return window&&void 0!==window.localStorage&&null!==window.localStorage}catch(t){return!1}}function b(){}function g(t,e){this.filename=t||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=!(!e||!e.hasOwnProperty("verbose"))&&e.verbose,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]},e&&e.hasOwnProperty("env")?this.ENV=e.env:this.ENV="undefined"!==typeof r&&(r.android||r.NSObject)?"NATIVESCRIPT":"undefined"===typeof window?"NODEJS":"undefined"!==typeof r&&r.window&&"undefined"!==typeof i?"NODEJS":"undefined"!==typeof document?-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER":"CORDOVA","undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(e,!0),this.on("init",this.clearChanges)}function m(t){this.hashStore={},this.options=t||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}function w(t,e){if(this.mode="reference",this.adapter=null,this.options=e||{},this.dbref=null,this.dbname="",this.pageIterator={},!t)throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");if("reference"===t.mode)throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=t,this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=26214400),this.options.hasOwnProperty("delimiter")||(this.options.delimiter="$<\n")}function x(){try{this.fs=n(104)}catch(t){this.fs=null}}function _(){}function O(t,e){return e=e||{},this.collection=t,this.filteredrows=[],this.filterInitialized=!1,this}function S(t,e,n){this.collection=t,this.name=e,this.rebuildPending=!1,this.options=n||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new O(t),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[]}}function j(e,n){this.name=e,this.data=[],this.idIndex=[],this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=e,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var r=this;(n=n||{}).hasOwnProperty("unique")&&(Array.isArray(n.unique)||(n.unique=[n.unique]),n.unique.forEach(function(t){r.uniqueNames.push(t),r.constraints.unique[t]=new M(t)})),n.hasOwnProperty("exact")&&n.exact.forEach(function(t){r.constraints.exact[t]=new V(t)}),this.adaptiveBinaryIndices=!n.hasOwnProperty("adaptiveBinaryIndices")||n.adaptiveBinaryIndices,this.transactional=!!n.hasOwnProperty("transactional")&&n.transactional,this.cloneObjects=!!n.hasOwnProperty("clone")&&n.clone,this.cloneMethod=n.hasOwnProperty("cloneMethod")?n.cloneMethod:"parse-stringify",this.asyncListeners=!!n.hasOwnProperty("asyncListeners")&&n.asyncListeners,this.disableMeta=!!n.hasOwnProperty("disableMeta")&&n.disableMeta,this.disableChangesApi=!n.hasOwnProperty("disableChangesApi")||n.disableChangesApi,this.disableDeltaChangesApi=!n.hasOwnProperty("disableDeltaChangesApi")||n.disableDeltaChangesApi,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=!!n.hasOwnProperty("autoupdate")&&n.autoupdate,this.serializableIndices=!n.hasOwnProperty("serializableIndices")||n.serializableIndices,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(n.ttl||-1,n.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[],this.ensureId();var i=[];if(n&&n.indices)if("[object Array]"===Object.prototype.toString.call(n.indices))i=n.indices;else{if("string"!==typeof n.indices)throw new TypeError("Indices needs to be a string or an array of strings");i=[n.indices]}for(var o=0;o<i.length;o++)this.ensureIndex(i[o]);function u(t,e){var n=null!==e&&"object"===typeof e?Object.keys(e):null;if(n&&n.length&&["string","boolean","number"].indexOf(typeof e)<0){for(var i={},o=0;o<n.length;o++){var s=n[o];if(e.hasOwnProperty(s))if(!t.hasOwnProperty(s)||r.uniqueNames.indexOf(s)>=0||"$loki"==s||"meta"==s)i[s]=e[s];else{var a=u(t[s],e[s]);"undefined"!==typeof a&&a!={}&&(i[s]=a)}}return 0===Object.keys(i).length?void 0:i}return t===e?void 0:e}function s(){r.changes=[]}this.observerCallback=function(e){var n="function"===typeof Set?new Set:[];n.add||(n.add=function(t){return-1===this.indexOf(t)&&this.push(t),this}),e.forEach(function(t){n.add(t.object)}),n.forEach(function(e){if(!t.call(e,"$loki"))return r.removeAutoUpdateObserver(e);try{r.update(e)}catch(n){}})},this.getChangeDelta=function(t,e){return e?u(e,t):JSON.parse(JSON.stringify(t))},this.getObjectDelta=u,this.getChanges=function(){return r.changes},this.flushChanges=s,this.setChangesApi=function(t){r.disableChangesApi=!t,t||(r.disableDeltaChangesApi=!1)},this.on("delete",function(t){r.disableChangesApi||r.createChange(r.name,"R",t)}),this.on("warning",function(t){r.lokiConsoleWrapper.warn(t)}),s()}function I(t){return-1!==t.indexOf(".")}function k(t){return parseFloat(t,10)}function E(t,e){return t+e}function P(t,e){return t-e}function A(t){return t.reduce(E,0)/t.length}function C(t,e,n){if(!1===n)return t[e];for(var r=e.split("."),i=t;r.length>0;)i=i[r.shift()];return i}function D(t,e,n){for(var r,i,o=0,u=t.length;o<u;){if(i=o+u>>1,0===(r=n.apply(null,[e,t[i]])))return{found:!0,index:i};r<0?u=i:o=i+1}return{found:!1,index:u}}function N(t){return function(e,n){return D(e,n,t)}}function T(){}function M(t){this.field=t,this.keyMap={},this.lokiMap={}}function V(t){this.index={},this.field=t}return b.prototype.events={},b.prototype.asyncListeners=!1,b.prototype.on=function(t,e){var n,r=this;return Array.isArray(t)?(t.forEach(function(t){r.on(t,e)}),e):((n=this.events[t])||(n=this.events[t]=[]),n.push(e),e)},b.prototype.emit=function(t){var e,n=this;if(!t||!this.events[t])throw new Error("No event "+t+" defined");this.events[t].length&&(e=Array.prototype.slice.call(arguments,1),this.events[t].forEach(function(t){n.asyncListeners?setTimeout(function(){t.apply(n,e)},1):t.apply(n,e)}))},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(t,e){var n=this;if(Array.isArray(t))t.forEach(function(t){n.removeListener(t,e)});else if(this.events[t]){var r=this.events[t];r.splice(r.indexOf(e),1)}},g.prototype=new b,g.prototype.constructor=g,g.prototype.getIndexedAdapter=function(){return n(82)},g.prototype.configureOptions=function(t,e){var n={fs:x,localStorage:_,memory:m};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,"undefined"!==typeof t){if(this.options=t,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof n[t.persistenceMethod]&&(this.persistenceMethod=t.persistenceMethod,this.persistenceAdapter=new n[t.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=t.adapter,this.options.adapter=null,this.isIncremental="incremental"===this.persistenceAdapter.mode),t.autoload&&e){var r=this;setTimeout(function(){r.loadDatabase(t,t.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(t,t.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter="$<\n"),null===this.persistenceAdapter&&(this.persistenceMethod={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"}[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new n[this.persistenceMethod]))},g.prototype.copy=function(t){var e,n,r=new g(this.filename,{env:"NA"});if(t=t||{},r.loadJSONObject(this,{retainDirtyFlags:!0}),t.hasOwnProperty("removeNonSerializable")&&!0===t.removeNonSerializable)for(r.autosaveHandle=null,r.persistenceAdapter=null,e=r.collections.length,n=0;n<e;n++)r.collections[n].constraints=null,r.collections[n].ttl=null;return r},g.prototype.addCollection=function(t,e){var n,r=this.collections.length;if(e&&!0===e.disableMeta){if(!1===e.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===e.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"===typeof e.ttl&&e.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(n=0;n<r;n+=1)if(this.collections[n].name===t)return this.collections[n];var i=new j(t,e);return i.isIncremental=this.isIncremental,this.collections.push(i),this.verbose&&(i.lokiConsoleWrapper=console),i},g.prototype.loadCollection=function(t){if(!t.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(t)},g.prototype.getCollection=function(t){var e,n=this.collections.length;for(e=0;e<n;e+=1)if(this.collections[e].name===t)return this.collections[e];return this.emit("warning","collection "+t+" not found"),null},g.prototype.renameCollection=function(t,e){var n=this.getCollection(t);return n&&(n.name=e),n},g.prototype.listCollections=function(){for(var t=this.collections.length,e=[];t--;)e.push({name:this.collections[t].name,type:this.collections[t].objType,count:this.collections[t].data.length});return e},g.prototype.removeCollection=function(t){var e,n=this.collections.length;for(e=0;e<n;e+=1)if(this.collections[e].name===t){var r=new j(t,{}),i=this.collections[e];for(var o in i)i.hasOwnProperty(o)&&r.hasOwnProperty(o)&&(i[o]=r[o]);return void this.collections.splice(e,1)}},g.prototype.getName=function(){return this.name},g.prototype.serializeReplacer=function(t,e){switch(t){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return e}},g.prototype.serialize=function(t){switch((t=t||{}).hasOwnProperty("serializationMethod")||(t.serializationMethod=this.options.serializationMethod),t.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},g.prototype.toJson=g.prototype.serialize,g.prototype.serializeDestructured=function(t){var e,n,r,i,o,u=[];if((t=t||{}).hasOwnProperty("partitioned")||(t.partitioned=!1),t.hasOwnProperty("delimited")||(t.delimited=!0),t.hasOwnProperty("delimiter")||(t.delimiter=this.options.destructureDelimiter),!0===t.partitioned&&t.hasOwnProperty("partition")&&t.partition>=0)return this.serializeCollection({delimited:t.delimited,delimiter:t.delimiter,collectionIndex:t.partition});for((o=new g(this.filename)).loadJSONObject(this),e=0;e<o.collections.length;e++)o.collections[e].data=[];if(!0===t.partitioned&&-1===t.partition)return o.serialize({serializationMethod:"normal"});for(u.push(o.serialize({serializationMethod:"normal"})),o=null,e=0;e<this.collections.length;e++)if(r=this.serializeCollection({delimited:t.delimited,delimiter:t.delimiter,collectionIndex:e}),!1===t.partitioned&&!1===t.delimited){if(!Array.isArray(r))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(i=r.length,n=0;n<i;n++)u.push(r[n]),r[n]=null;u.push("")}else u.push(r);return t.partitioned?(t.delimited,u):t.delimited?(u.push(""),u.join(t.delimiter)):(u.push(""),u)},g.prototype.serializeCollection=function(t){var e,n,r=[];if((t=t||{}).hasOwnProperty("delimited")||(t.delimited=!0),!t.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(e=this.collections[t.collectionIndex].data.length,r=[],n=0;n<e;n++)r.push(JSON.stringify(this.collections[t.collectionIndex].data[n]));return t.delimited?(r.push(""),r.join(t.delimiter)):r},g.prototype.deserializeDestructured=function(t,e){var n,r,i,o=[],u=0,s=1,a=!1;if((e=e||{}).hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),e.partitioned){if(e.hasOwnProperty("partition"))return-1===e.partition?n=JSON.parse(t[0]):this.deserializeCollection(t[e.partition+1],e);for(n=JSON.parse(t[0]),r=n.collections.length,u=0;u<r;u++)n.collections[u].data=this.deserializeCollection(t[u+1],e);return n}if(e.delimited){if(o=t.split(e.delimiter),t=null,0===o.length)return null}else o=t;for(n=JSON.parse(o[0]),r=n.collections.length,o[0]=null;!a;)o[s],""===o[s]?++u>r&&(a=!0):(i=JSON.parse(o[s]),n.collections[u].data.push(i)),o[s++]=null;return n},g.prototype.deserializeCollection=function(t,e){var n,r,i=[];for((e=e||{}).hasOwnProperty("partitioned")||(e.partitioned=!1),e.hasOwnProperty("delimited")||(e.delimited=!0),e.hasOwnProperty("delimiter")||(e.delimiter=this.options.destructureDelimiter),e.delimited?(i=t.split(e.delimiter)).pop():i=t,r=i.length,n=0;n<r;n++)i[n]=JSON.parse(i[n]);return i},g.prototype.loadJSON=function(t,e){var n;if(0===t.length)n={};else switch(this.options.serializationMethod){case"normal":case"pretty":n=JSON.parse(t);break;case"destructured":n=this.deserializeDestructured(t);break;default:n=JSON.parse(t)}this.loadJSONObject(n,e)},g.prototype.loadJSONObject=function(t,n){var r,i,o,u,s,a,c=0,l=t.collections?t.collections.length:0;function f(t){var r,i=n[t.name];return i.proto?(r=i.inflate||e.copyProperties,function(t){var e=new i.proto;return r(t,e),e}):i.inflate}for(this.name=t.name,t.hasOwnProperty("throttledSaves")&&n&&!n.hasOwnProperty("throttledSaves")&&(this.throttledSaves=t.throttledSaves),this.collections=[];c<l;c+=1){if(r=t.collections[c],(i=this.addCollection(r.name,{disableChangesApi:r.disableChangesApi,disableDeltaChangesApi:r.disableDeltaChangesApi,disableMeta:r.disableMeta})).adaptiveBinaryIndices=!!r.hasOwnProperty("adaptiveBinaryIndices")&&!0===r.adaptiveBinaryIndices,i.transactional=r.transactional,i.asyncListeners=r.asyncListeners,i.cloneObjects=r.cloneObjects,i.cloneMethod=r.cloneMethod||"parse-stringify",i.autoupdate=r.autoupdate,i.changes=r.changes,i.dirtyIds=r.dirtyIds||[],n&&!0===n.retainDirtyFlags?i.dirty=r.dirty:i.dirty=!1,o=r.data.length,u=0,n&&n.hasOwnProperty(r.name))for(s=f(r);u<o;u++)a=s(r.data[u]),i.data[u]=a,i.addAutoUpdateObserver(a);else for(;u<o;u++)i.data[u]=r.data[u],i.addAutoUpdateObserver(i.data[u]);if(i.maxId="undefined"===typeof r.maxId?0:r.maxId,i.idIndex=r.idIndex,"undefined"!==typeof r.binaryIndices&&(i.binaryIndices=r.binaryIndices),"undefined"!==typeof r.transforms&&(i.transforms=r.transforms),i.ensureId(),i.uniqueNames=[],r.hasOwnProperty("uniqueNames"))for(i.uniqueNames=r.uniqueNames,u=0;u<i.uniqueNames.length;u++)i.ensureUniqueIndex(i.uniqueNames[u]);if("undefined"!==typeof r.DynamicViews){for(var h=0;h<r.DynamicViews.length;h++){var p=r.DynamicViews[h],d=i.addDynamicView(p.name,p.options);d.resultdata=p.resultdata,d.resultsdirty=p.resultsdirty,d.filterPipeline=p.filterPipeline,d.sortCriteria=p.sortCriteria,d.sortFunction=null,d.sortDirty=p.sortDirty,d.resultset.filteredrows=p.resultset.filteredrows,d.resultset.filterInitialized=p.resultset.filterInitialized,d.rematerialize({removeWhereFilters:!0})}t.databaseVersion<1.5&&(i.ensureAllIndexes(!0),i.dirty=!0)}}},g.prototype.close=function(t){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(t),t=void 0)),t&&this.on("close",t),this.emit("close")},g.prototype.generateChangesNotification=function(t){function e(t){return t.name}var n=[],r=t||this.collections.map(e);return this.collections.forEach(function(t){-1!==r.indexOf(e(t))&&(n=n.concat(t.getChanges()))}),n},g.prototype.serializeChanges=function(t){return JSON.stringify(this.generateChangesNotification(t))},g.prototype.clearChanges=function(){this.collections.forEach(function(t){t.flushChanges&&t.flushChanges()})},m.prototype.loadDatabase=function(t,e){var n=this;this.options.asyncResponses?setTimeout(function(){n.hashStore.hasOwnProperty(t)?e(n.hashStore[t].value):e(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(t)?e(this.hashStore[t].value):e(null)},m.prototype.saveDatabase=function(t,e,n){var r,i=this;this.options.asyncResponses?setTimeout(function(){r=i.hashStore.hasOwnProperty(t)?i.hashStore[t].savecount:0,i.hashStore[t]={savecount:r+1,lastsave:new Date,value:e},n()},this.options.asyncTimeout):(r=this.hashStore.hasOwnProperty(t)?this.hashStore[t].savecount:0,this.hashStore[t]={savecount:r+1,lastsave:new Date,value:e},n())},m.prototype.deleteDatabase=function(t,e){this.hashStore.hasOwnProperty(t)&&delete this.hashStore[t],"function"===typeof e&&e()},w.prototype.loadDatabase=function(t,e){var n=this;this.dbname=t,this.dbref=new g(t),this.adapter.loadDatabase(t,function(t){if(t){"string"!==typeof t&&e(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var r=JSON.parse(t);n.dbref.loadJSONObject(r),r=null,n.dbref.collections.length,0!==n.dbref.collections.length?(n.pageIterator={collection:0,pageIndex:0},n.loadNextPartition(0,function(){e(n.dbref)})):e(n.dbref)}else e(t)})},w.prototype.loadNextPartition=function(t,e){var n=this.dbname+"."+t,r=this;if(!0===this.options.paging)return this.pageIterator.pageIndex=0,void this.loadNextPage(e);this.adapter.loadDatabase(n,function(n){var i=r.dbref.deserializeCollection(n,{delimited:!0,collectionIndex:t});r.dbref.collections[t].data=i,++t<r.dbref.collections.length?r.loadNextPartition(t,e):e()})},w.prototype.loadNextPage=function(t){var e=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,n=this;this.adapter.loadDatabase(e,function(e){var r=e.split(n.options.delimiter);e="";var i,o=r.length,u=""===r[o-1];for(u&&(r.pop(),o=r.length,""===r[o-1]&&1===o&&(r.pop(),o=r.length)),i=0;i<o;i++)n.dbref.collections[n.pageIterator.collection].data.push(JSON.parse(r[i])),r[i]=null;r=[],u?++n.pageIterator.collection<n.dbref.collections.length?n.loadNextPartition(n.pageIterator.collection,t):t():(n.pageIterator.pageIndex++,n.loadNextPage(t))})},w.prototype.exportDatabase=function(t,e,n){var r,i=e.collections.length;for(this.dbref=e,this.dbname=t,this.dirtyPartitions=[-1],r=0;r<i;r++)e.collections[r].dirty&&this.dirtyPartitions.push(r);this.saveNextPartition(function(t){n(t)})},w.prototype.saveNextPartition=function(t){var e=this,n=this.dirtyPartitions.shift(),r=this.dbname+(-1===n?"":"."+n);if(this.options.paging&&-1!==n)return this.pageIterator={collection:n,docIndex:0,pageIndex:0},void this.saveNextPage(function(n){0===e.dirtyPartitions.length?t(n):e.saveNextPartition(t)});var i=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:n});this.adapter.saveDatabase(r,i,function(n){n?t(n):0===e.dirtyPartitions.length?t(null):e.saveNextPartition(t)})},w.prototype.saveNextPage=function(t){var e=this,n=this.dbref.collections[this.pageIterator.collection],r=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,i=0,o=n.data.length,u=this.options.delimiter.length,s="",a="",c=!1,l=!1,f=function(n){a="",n&&t(n),c?t(null):(e.pageIterator.pageIndex++,e.saveNextPage(t))};for(0===n.data.length&&(c=!0);;)if(c||(s=JSON.stringify(n.data[this.pageIterator.docIndex]),a+=s,i+=s.length,++this.pageIterator.docIndex>=o&&(c=!0)),i>=this.options.pageSize&&(l=!0),l&&!c||(a+=this.options.delimiter,i+=u),c||l)return void this.adapter.saveDatabase(r,a,f)},x.prototype.loadDatabase=function(t,e){var n=this;this.fs.stat(t,function(r,i){!r&&i.isFile()?n.fs.readFile(t,{encoding:"utf8"},function(t,n){e(t?new Error(t):n)}):e(null)})},x.prototype.saveDatabase=function(t,e,n){var r=this,i=t+"~";this.fs.writeFile(i,e,function(e){e?n(new Error(e)):r.fs.rename(i,t,n)})},x.prototype.deleteDatabase=function(t,e){this.fs.unlink(t,function(t){t?e(new Error(t)):e()})},_.prototype.loadDatabase=function(t,e){v()?e(localStorage.getItem(t)):e(new Error("localStorage is not available"))},_.prototype.saveDatabase=function(t,e,n){v()?(localStorage.setItem(t,e),n(null)):n(new Error("localStorage is not available"))},_.prototype.deleteDatabase=function(t,e){v()?(localStorage.removeItem(t),e(null)):e(new Error("localStorage is not available"))},g.prototype.throttledSaveDrain=function(t,e){var n=this,r=(new Date).getTime();if(this.throttledSaves||t(!0),(e=e||{}).hasOwnProperty("recursiveWait")||(e.recursiveWait=!0),e.hasOwnProperty("recursiveWaitLimit")||(e.recursiveWaitLimit=!1),e.hasOwnProperty("recursiveWaitLimitDuration")||(e.recursiveWaitLimitDuration=2e3),e.hasOwnProperty("started")||(e.started=(new Date).getTime()),this.throttledSaves&&this.throttledSavePending){if(!e.recursiveWait)return void this.throttledCallbacks.push(t);this.throttledCallbacks.push(function(){return n.throttledSavePending?e.recursiveWaitLimit&&r-e.started>e.recursiveWaitLimitDuration?void t(!1):void n.throttledSaveDrain(t,e):void t(!0)})}else t(!0)},g.prototype.loadDatabaseInternal=function(t,e){var n=e||function(t,e){if(t)throw t},r=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(e){if("string"===typeof e){var i=!1;try{r.loadJSON(e,t||{}),i=!0}catch(o){n(o)}i&&(n(null),r.emit("loaded","database "+r.filename+" loaded"))}else{if(!e)return n(null),void r.emit("loaded","empty database "+r.filename+" loaded");if(e instanceof Error)return void n(e);if("object"===typeof e)return r.loadJSONObject(e,t||{}),n(null),void r.emit("loaded","database "+r.filename+" loaded");n("unexpected adapter response : "+e)}}):n(new Error("persistenceAdapter not configured"))},g.prototype.loadDatabase=function(t,e){var n=this;this.throttledSaves?this.throttledSaveDrain(function(r){if(r)return n.throttledSavePending=!0,void n.loadDatabaseInternal(t,function(t){0===n.throttledCallbacks.length?n.throttledSavePending=!1:n.saveDatabase(),"function"===typeof e&&e(t)});"function"===typeof e&&e(new Error("Unable to pause save throttling long enough to read database"))},t):this.loadDatabaseInternal(t,e)},g.prototype.saveDatabaseInternal=function(t){var e=t||function(t){if(t)throw t},n=this;if(this.persistenceAdapter)if("reference"!==this.persistenceAdapter.mode&&this.autosaveClearFlags(),"incremental"===this.persistenceAdapter.mode){var r=this.copy({removeNonSerializable:!0}),i=this.collections.map(function(t){return t.dirtyIds});this.collections.forEach(function(t){t.dirtyIds=[]}),this.persistenceAdapter.saveDatabase(this.filename,r,function(t){t&&n.collections.forEach(function(t,e){t.dirtyIds=t.dirtyIds.concat(i[e])}),e(t)})}else"reference"===this.persistenceAdapter.mode&&"function"===typeof this.persistenceAdapter.exportDatabase?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(t){n.autosaveClearFlags(),e(t)}):this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(t){e(t)});else e(new Error("persistenceAdapter not configured"))},g.prototype.saveDatabase=function(t){if(this.throttledSaves)if(this.throttledSavePending)this.throttledCallbacks.push(t);else{var e=this.throttledCallbacks;this.throttledCallbacks=[],e.unshift(t),this.throttledSavePending=!0;var n=this;this.saveDatabaseInternal(function(t){n.throttledSavePending=!1,e.forEach(function(e){"function"===typeof e&&setTimeout(function(){e(t)},1)}),n.throttledCallbacks.length>0&&n.saveDatabase()})}else this.saveDatabaseInternal(t)},g.prototype.save=g.prototype.saveDatabase,g.prototype.deleteDatabase=function(t,e){var n=e||function(t,e){if(t)throw t};"function"!==typeof t||e||(n=t),null!==this.persistenceAdapter?this.persistenceAdapter.deleteDatabase(this.filename,function(t){n(t)}):n(new Error("persistenceAdapter not configured"))},g.prototype.autosaveDirty=function(){for(var t=0;t<this.collections.length;t++)if(this.collections[t].dirty)return!0;return!1},g.prototype.autosaveClearFlags=function(){for(var t=0;t<this.collections.length;t++)this.collections[t].dirty=!1},g.prototype.autosaveEnable=function(t,e){this.autosave=!0;var n=5e3,r=this;"undefined"!==typeof this.autosaveInterval&&null!==this.autosaveInterval&&(n=this.autosaveInterval),this.autosaveHandle=setInterval(function(){r.autosaveDirty()&&r.saveDatabase(e)},n)},g.prototype.autosaveDisable=function(){"undefined"!==typeof this.autosaveHandle&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},O.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},O.prototype.toJSON=function(){var t=this.copy();return t.collection=null,t},O.prototype.limit=function(t){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var e=new O(this.collection);return e.filteredrows=this.filteredrows.slice(0,t),e.filterInitialized=!0,e},O.prototype.offset=function(t){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var e=new O(this.collection);return e.filteredrows=this.filteredrows.slice(t),e.filterInitialized=!0,e},O.prototype.copy=function(){var t=new O(this.collection);return this.filteredrows.length>0&&(t.filteredrows=this.filteredrows.slice()),t.filterInitialized=this.filterInitialized,t},O.prototype.branch=O.prototype.copy,O.prototype.transform=function(t,n){var r,i,o=this;if("string"===typeof t&&this.collection.transforms.hasOwnProperty(t)&&(t=this.collection.transforms[t]),"object"!==typeof t||!Array.isArray(t))throw new Error("Invalid transform");for("undefined"!==typeof n&&(t=e.resolveTransformParams(t,n)),r=0;r<t.length;r++)switch((i=t[r]).type){case"find":o.find(i.value);break;case"where":o.where(i.value);break;case"simplesort":o.simplesort(i.property,i.desc||i.options);break;case"compoundsort":o.compoundsort(i.value);break;case"sort":o.sort(i.value);break;case"limit":o=o.limit(i.value);break;case"offset":o=o.offset(i.value);break;case"map":o=o.map(i.value,i.dataOptions);break;case"eqJoin":o=o.eqJoin(i.joinData,i.leftJoinKey,i.rightJoinKey,i.mapFun,i.dataOptions);break;case"mapReduce":o=o.mapReduce(i.mapFunction,i.reduceFunction);break;case"update":o.update(i.value);break;case"remove":o.remove()}return o},O.prototype.sort=function(t){this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var e,n,r=(e=t,n=this.collection.data,function(t,r){return e(n[t],n[r])});return this.filteredrows.sort(r),this},O.prototype.simplesort=function(t,n){var r,i=10,o=this.collection.data.length,u=this.filteredrows.length,s=this.collection.binaryIndices.hasOwnProperty(t);if("undefined"!==typeof n&&!1!==n||(n={desc:!1}),!0===n&&(n={desc:!0}),0===u){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(t))return this.collection.ensureIndex(t),this.filteredrows=this.collection.binaryIndices[t].values.slice(0),n.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!n.disableIndexIntersect&&s&&(r=o/u,n.useJavascriptSorting&&(i=6),r<=i||n.forceIndexIntersect)){var a,l=this.filteredrows,f={};for(a=0;a<u;a++)f[l[a]]=!0;var h=this.collection.binaryIndices[t].values;return this.filteredrows=h.filter(function(t){return f[t]}),n.desc&&this.filteredrows.reverse(),this}if(n.useJavascriptSorting)return this.sort(function(e,n){return e[t]===n[t]?0:e[t]>n[t]?1:e[t]<n[t]?-1:void 0});var p=function(t,n,r){var i,o,u;return function(s,a){return~t.indexOf(".")?(u=t.split("."),i=e.getIn(r[s],u,!0),o=e.getIn(r[a],u,!0)):(i=r[s][t],o=r[a][t]),c(i,o,n)}}(t,n.desc,this.collection.data);return this.filteredrows.sort(p),this},O.prototype.compoundsort=function(t){if(0===t.length)throw new Error("Invalid call to compoundsort, need at least one property");var n;if(1===t.length)return n=t[0],Array.isArray(n)?this.simplesort(n[0],n[1]):this.simplesort(n,!1);for(var r=0,i=t.length;r<i;r+=1)n=t[r],Array.isArray(n)||(t[r]=[n,!1]);this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());var o,u,s=(o=t,u=this.collection.data,function(t,n){return function(t,n,r){for(var i,o,u,s,a,l=0,f=0,h=t.length;f<h;f++)if(i=t[f],~(o=i[0]).indexOf(".")?(a=o.split("."),u=e.getIn(n,a,!0),s=e.getIn(r,a,!0)):(u=n[o],s=r[o]),0!==(l=c(u,s,i[1])))return l;return 0}(o,u[t],u[n])});return this.filteredrows.sort(s),this},O.prototype.findOr=function(t){for(var e=null,n=0,r=0,i=[],o=[],u=0,s=(this.count(),0),a=t.length;s<a;s++)for(e=this.branch().find(t[s]).filteredrows,r=e.length,n=0;n<r;n++)u=e[n],void 0===o[u]&&(o[u]=!0,i.push(u));return this.filteredrows=i,this.filterInitialized=!0,this},O.prototype.$or=O.prototype.findOr,O.prototype.findAnd=function(t){for(var e=0,n=t.length;e<n;e++){if(0===this.count())return this;this.find(t[e])}return this},O.prototype.$and=O.prototype.findAnd,O.prototype.find=function(n,r){if(0===this.collection.data.length)return this.filteredrows=[],this.filterInitialized=!0,this;var i,o,u,s,a,c,f,h=n||"getAll",y=!1,v=[],b=[],g=null;if(r=r||!1,"object"===typeof h){for(i in h)(s={})[i]=h[i],b.push(s),t.call(h,i)&&(o=i,u=h[i]);if(b.length>1)return this.find({$and:b},r)}if(!o||"getAll"===h)return r&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if("$and"===o||"$or"===o)return this[o](u),r&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(null===u||"object"!==typeof u||u instanceof Date)a="$eq",c=u;else{if("object"!==typeof u)throw new Error("Do not know what you want to do.");for(f in u)if(t.call(u,f)){a=f,c=u[f];break}}"$regex"!==a&&"object"!==typeof c||(c=function t(e,n){if("$regex"===e)Array.isArray(n)?n=new RegExp(n[0],n[1]):n instanceof RegExp||(n=new RegExp(n));else if("object"===typeof n)for(var r in n)"$regex"!==r&&"object"!==typeof n[r]||(n[r]=t(r,n[r]));return n}(a,c));var m=-1!==o.indexOf("."),w=!this.filterInitialized;w&&this.collection.binaryIndices[o]&&d[a]&&(!0!==this.collection.adaptiveBinaryIndices&&this.collection.ensureIndex(o),y=!0,g=this.collection.binaryIndices[o]);var x,_=p[a],O=this.collection.data,S=0,j=0,I=0;if(this.filterInitialized){if(x=this.filteredrows,j=x.length,m){for(o=o.split("."),S=0;S<j;S++)if(I=x[S],l(O[I],o,_,c)&&(v.push(I),r))return this.filteredrows=v,this}else for(S=0;S<j;S++)if(I=x[S],_(O[I][o],c)&&(v.push(I),r))return this.filteredrows=v,this}else if(y){var k=this.collection.calculateRange(a,o,c);if("$in"!==a){for(S=k[0];S<=k[1];S++)if(!0!==d[a]){if(d[a](e.getIn(O[g.values[S]],o,m),c)&&(v.push(g.values[S]),r))return this.filteredrows=v,this.filterInitialized=!0,this}else if(v.push(g.values[S]),r)return this.filteredrows=v,this.filterInitialized=!0,this}else for(S=0,j=k.length;S<j;S++)if(v.push(g.values[k[S]]),r)return this.filteredrows=v,this.filterInitialized=!0,this}else if(j=O.length,m){for(o=o.split("."),S=0;S<j;S++)if(l(O[S],o,_,c)&&(v.push(S),r))return this.filteredrows=v,this.filterInitialized=!0,this}else for(S=0;S<j;S++)if(_(O[S][o],c)&&(v.push(S),r))return this.filteredrows=v,this.filterInitialized=!0,this;return this.filteredrows=v,this.filterInitialized=!0,this},O.prototype.where=function(t){var e,n=[];if("function"!==typeof t)throw new TypeError("Argument is not a stored view or a function");e=t;try{if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)!0===e(this.collection.data[this.filteredrows[r]])&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}for(var i=this.collection.data.length;i--;)!0===e(this.collection.data[i])&&n.push(i);return this.filteredrows=n,this.filterInitialized=!0,this}catch(o){throw o}},O.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},O.prototype.data=function(t){var e,n,r,i,o=[],u=this.collection.data;if((t=t||{}).removeMeta&&!t.forceClones&&(t.forceClones=!0,t.forceCloneMethod=t.forceCloneMethod||"shallow"),this.collection.disableDeltaChangesApi||(t.forceClones=!0,t.forceCloneMethod="parse-stringify"),!this.filterInitialized){if(0===this.filteredrows.length){if(this.collection.cloneObjects||t.forceClones){for(n=u.length,i=t.forceCloneMethod||this.collection.cloneMethod,r=0;r<n;r++)e=y(u[r],i),t.removeMeta&&(delete e.$loki,delete e.meta),o.push(e);return o}return u.slice()}this.filterInitialized=!0}var s=this.filteredrows;if(n=s.length,this.collection.cloneObjects||t.forceClones)for(i=t.forceCloneMethod||this.collection.cloneMethod,r=0;r<n;r++)e=y(u[s[r]],i),t.removeMeta&&(delete e.$loki,delete e.meta),o.push(e);else for(r=0;r<n;r++)o.push(u[s[r]]);return o},O.prototype.update=function(t){if("function"!==typeof t)throw new TypeError("Argument is not a function");this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex());for(var e,n=this.filteredrows.length,r=this.collection.data,i=0;i<n;i++)this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(e=y(r[this.filteredrows[i]],this.collection.cloneMethod),t(e),this.collection.update(e)):(t(r[this.filteredrows[i]]),this.collection.update(r[this.filteredrows[i]]));return this},O.prototype.remove=function(){return this.filterInitialized||0!==this.filteredrows.length||(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},O.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},O.prototype.eqJoin=function(t,e,n,r,i){var o,u,s,a=[],c=[],l=[],f="function"===typeof e,h="function"===typeof n,p={};if(a=this.data(i),o=a.length,t instanceof j)c=t.chain().data(i);else if(t instanceof O)c=t.data(i);else{if(!Array.isArray(t))throw new TypeError("joinData needs to be an array or result set");c=t}u=c.length;for(var d=0;d<u;d++)s=h?n(c[d]):c[d][n],p[s]=c[d];r||(r=function(t,e){return{left:t,right:e}});for(var y=0;y<o;y++)s=f?e(a[y]):a[y][e],l.push(r(a[y],p[s]||{}));return this.collection=new j("joinData"),this.collection.insert(l),this.filteredrows=[],this.filterInitialized=!1,this},O.prototype.map=function(t,e){var n=this.data(e).map(t);return this.collection=new j("mappedData"),this.collection.insert(n),this.filteredrows=[],this.filterInitialized=!1,this},S.prototype=new b,S.prototype.rematerialize=function(t){var e,n,r;if(t=t||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new O(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0),t.hasOwnProperty("removeWhereFilters"))for(e=this.filterPipeline.length,n=e;n--;)"where"===this.filterPipeline[n].type&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var i=this.filterPipeline;for(this.filterPipeline=[],e=i.length,r=0;r<e;r++)this.applyFind(i[r].val);return this.data(),this.emit("rebuild",this),this},S.prototype.branchResultset=function(t,e){var n=this.resultset.branch();return"undefined"===typeof t?n:n.transform(t,e)},S.prototype.toJSON=function(){var t=new S(this.collection,this.name,this.options);return t.resultset=this.resultset,t.resultdata=[],t.resultsdirty=!0,t.filterPipeline=this.filterPipeline,t.sortFunction=this.sortFunction,t.sortCriteria=this.sortCriteria,t.sortCriteriaSimple=this.sortCriteriaSimple||null,t.sortDirty=this.sortDirty,t.collection=null,t},S.prototype.removeFilters=function(t){t=t||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,!0===t.queueSortPhase&&this.queueSortPhase()},S.prototype.applySort=function(t){return this.sortFunction=t,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this},S.prototype.applySimpleSort=function(t,e){return this.sortCriteriaSimple={propname:t,options:e||!1},this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this},S.prototype.applySortCriteria=function(t){return this.sortCriteria=t,this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this},S.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},S.prototype.commit=function(){return this.cachedresultset=null,this},S.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},S.prototype._indexOfFilterWithId=function(t){if("string"===typeof t||"number"===typeof t)for(var e=0,n=this.filterPipeline.length;e<n;e+=1)if(t===this.filterPipeline[e].uid)return e;return-1},S.prototype._addFilter=function(t){this.filterPipeline.push(t),this.resultset[t.type](t.val)},S.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var t=this.filterPipeline;this.filterPipeline=[];for(var e=0,n=t.length;e<n;e+=1)this._addFilter(t[e]);return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this},S.prototype.applyFilter=function(t){var e=this._indexOfFilterWithId(t.uid);return e>=0?(this.filterPipeline[e]=t,this.reapplyFilters()):(this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(t),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this)},S.prototype.applyFind=function(t,e){return this.applyFilter({type:"find",val:t,uid:e}),this},S.prototype.applyWhere=function(t,e){return this.applyFilter({type:"where",val:t,uid:e}),this},S.prototype.removeFilter=function(t){var e=this._indexOfFilterWithId(t);if(e<0)throw new Error("Dynamic view does not contain a filter with ID: "+t);return this.filterPipeline.splice(e,1),this.reapplyFilters(),this},S.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},S.prototype.data=function(t){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(t)},S.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var t=this;setTimeout(function(){t.rebuildPending&&(t.rebuildPending=!1,t.emit("rebuild",t))},this.options.minRebuildInterval)}},S.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var t=this;"active"===this.options.sortPriority?setTimeout(function(){t.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},S.prototype.performSortPhase=function(t){(this.sortDirty||this.resultsdirty)&&(t=t||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),t.suppressRebuildEvent||this.emit("rebuild",this))},S.prototype.evaluateDocument=function(t,e){if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var n,r=this.resultset.filteredrows,i=e?-1:r.indexOf(+t),o=r.length,u=new O(this.collection);u.filteredrows=[t],u.filterInitialized=!0;for(var s=0,a=this.filterPipeline.length;s<a;s++)n=this.filterPipeline[s],u[n.type](n.val);var c=0===u.filteredrows.length?-1:0;return-1!==i||-1!==c?-1===i&&-1!==c?(r.push(t),this.options.persistent&&this.resultdata.push(this.collection.data[t]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):-1!==i&&-1===c?(i<o-1?(r.splice(i,1),this.options.persistent&&this.resultdata.splice(i,1)):(r.length=o-1,this.options.persistent&&(this.resultdata.length=o-1)),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):-1!==i&&-1!==c?(this.options.persistent&&(this.resultdata[i]=this.collection.data[t]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())):void 0:void 0},S.prototype.removeDocument=function(t){var e,n,r,i={},o={},u=[],s=this.resultset,a=this.resultset.filteredrows,c=a.length;if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());for(Array.isArray(t)||(t=[t]),r=t.length,n=0;n<r;n++)i[t[n]]=!0;for(e=0;e<c;e++)i[a[e]]&&(o[e]=!0);Object.keys(o).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(t,e){return!o[e]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(t,e){return!o[e]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var l=function(t){return function(e){return e<s.filteredrows[t]}};for(c=s.filteredrows.length,e=0;e<c;e++)u=t.filter(l(e)),s.filteredrows[e]-=u.length},S.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},j.prototype=new b,j.prototype.createChange=function(t,e,n,r){this.changes.push({name:t,operation:e,obj:"U"!=e||this.disableDeltaChangesApi?JSON.parse(JSON.stringify(n)):this.getChangeDelta(n,r)})},j.prototype.insertMeta=function(t){var e,n;if(!this.disableMeta&&t)if(Array.isArray(t))for(e=t.length,n=0;n<e;n++)t[n].hasOwnProperty("meta")||(t[n].meta={}),t[n].meta.created=(new Date).getTime(),t[n].meta.revision=0;else t.meta||(t.meta={}),t.meta.created=(new Date).getTime(),t.meta.revision=0},j.prototype.updateMeta=function(t){!this.disableMeta&&t&&(t.meta.updated=(new Date).getTime(),t.meta.revision+=1)},j.prototype.createInsertChange=function(t){this.createChange(this.name,"I",t)},j.prototype.createUpdateChange=function(t,e){this.createChange(this.name,"U",t,e)},j.prototype.insertMetaWithChange=function(t){this.insertMeta(t),this.createInsertChange(t)},j.prototype.updateMetaWithChange=function(t,e){this.updateMeta(t),this.createUpdateChange(t,e)},j.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},j.prototype.addAutoUpdateObserver=function(t){this.autoupdate&&"function"===typeof Object.observe&&Object.observe(t,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},j.prototype.removeAutoUpdateObserver=function(t){this.autoupdate&&"function"===typeof Object.observe&&Object.unobserve(t,this.observerCallback)},j.prototype.addTransform=function(t,e){if(this.transforms.hasOwnProperty(t))throw new Error("a transform by that name already exists");this.transforms[t]=e},j.prototype.getTransform=function(t){return this.transforms[t]},j.prototype.setTransform=function(t,e){this.transforms[t]=e},j.prototype.removeTransform=function(t){delete this.transforms[t]},j.prototype.byExample=function(t){var e,n,r;for(e in r=[],t)t.hasOwnProperty(e)&&r.push(((n={})[e]=t[e],n));return{$and:r}},j.prototype.findObject=function(t){return this.findOne(this.byExample(t))},j.prototype.findObjects=function(t){return this.find(this.byExample(t))},j.prototype.ttlDaemonFuncGen=function(){var t=this,e=this.ttl.age;return function(){var n=Date.now(),r=t.chain().where(function(t){var r=t.meta.updated||t.meta.created,i=n-r;return e<i});r.remove()}},j.prototype.setTTL=function(t,e){t<0?clearInterval(this.ttl.daemon):(this.ttl.age=t,this.ttl.ttlInterval=e,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),e))},j.prototype.prepareFullDocIndex=function(){for(var t=this.data.length,e=new Array(t),n=0;n<t;n+=1)e[n]=n;return e},j.prototype.configureOptions=function(t){(t=t||{}).hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=t.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},j.prototype.ensureIndex=function(t,n){if("undefined"===typeof n&&(n=!1),null===t||void 0===t)throw new Error("Attempting to set index without an associated property");if((!this.binaryIndices[t]||n||this.binaryIndices[t].dirty)&&(!0!==this.adaptiveBinaryIndices||!this.binaryIndices.hasOwnProperty(t)||n)){var r={name:t,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[t]=r;var i=function(t,n){var r,i,u=!!~t.indexOf(".")&&t.split(".");return function(s,a){if(u?(r=e.getIn(n[s],u,!0),i=e.getIn(n[a],u,!0)):(r=n[s][t],i=n[a][t]),r!==i){if(o.lt(r,i,!1))return-1;if(o.gt(r,i,!1))return 1}return 0}}(t,this.data);r.values.sort(i),r.dirty=!1,this.dirty=!0}},j.prototype.checkAllIndexes=function(e){var n,r=this.binaryIndices,i=[];for(n in r)t.call(r,n)&&(this.checkIndex(n,e)||i.push(n));return i},j.prototype.checkIndex=function(t,n){(n=n||{}).randomSamplingFactor&&!1!==n.randomSampling&&(n.randomSampling=!0),n.randomSamplingFactor=n.randomSamplingFactor||.1,(n.randomSamplingFactor<0||n.randomSamplingFactor>1)&&(n.randomSamplingFactor=.1);var r,i,o,u,s,a=!0;if(!this.binaryIndices.hasOwnProperty(t))throw new Error("called checkIndex on property without an index: "+t);if(this.adaptiveBinaryIndices||this.ensureIndex(t),s=this.binaryIndices[t].values,(u=s.length)!==this.data.length)return n.repair&&this.ensureIndex(t,!0),!1;if(0===u)return!0;var c=-1!==t.indexOf(".");if(1===u)a=0===s[0];else if(n.randomSampling){if(p.$lte(e.getIn(this.data[s[0]],t,c),e.getIn(this.data[s[1]],t,c))||(a=!1),p.$lte(e.getIn(this.data[s[u-2]],t,c),e.getIn(this.data[s[u-1]],t,c))||(a=!1),a)for(i=Math.floor((u-1)*n.randomSamplingFactor),r=0;r<i-1;r++)if(o=Math.floor(Math.random()*(u-1)),!p.$lte(e.getIn(this.data[s[o]],t,c),e.getIn(this.data[s[o+1]],t,c))){a=!1;break}}else for(r=0;r<u-1;r++)if(!p.$lte(e.getIn(this.data[s[r]],t,c),e.getIn(this.data[s[r+1]],t,c))){a=!1;break}return!a&&n.repair&&this.ensureIndex(t,!0),a},j.prototype.getBinaryIndexValues=function(t){var n,r=this.binaryIndices[t].values,i=[];for(n=0;n<r.length;n++)i.push(e.getIn(this.data[r[n]],t,!0));return i},j.prototype.ensureUniqueIndex=function(t){var e=this.constraints.unique[t];return e||-1==this.uniqueNames.indexOf(t)&&this.uniqueNames.push(t),this.constraints.unique[t]=e=new M(t),this.data.forEach(function(t){e.set(t)}),e},j.prototype.ensureAllIndexes=function(e){var n,r=this.binaryIndices;for(n in r)t.call(r,n)&&this.ensureIndex(n,e)},j.prototype.flagBinaryIndexesDirty=function(){var e,n=this.binaryIndices;for(e in n)t.call(n,e)&&(n[e].dirty=!0)},j.prototype.flagBinaryIndexDirty=function(t){this.binaryIndices[t]&&(this.binaryIndices[t].dirty=!0)},j.prototype.count=function(t){return t?this.chain().find(t).filteredrows.length:this.data.length},j.prototype.ensureId=function(){var t=this.data.length,e=0;for(this.idIndex=[];e<t;e+=1)this.idIndex.push(this.data[e].$loki)},j.prototype.ensureIdAsync=function(t){this.async(function(){this.ensureId()},t)},j.prototype.addDynamicView=function(t,e){var n=new S(this,t,e);return this.DynamicViews.push(n),n},j.prototype.removeDynamicView=function(t){this.DynamicViews=this.DynamicViews.filter(function(e){return e.name!==t})},j.prototype.getDynamicView=function(t){for(var e=0;e<this.DynamicViews.length;e++)if(this.DynamicViews[e].name===t)return this.DynamicViews[e];return null},j.prototype.findAndUpdate=function(t,e){"function"===typeof t?this.updateWhere(t,e):this.chain().find(t).update(e)},j.prototype.findAndRemove=function(t){this.chain().find(t).remove()},j.prototype.insert=function(t,e){if(!Array.isArray(t))return this.insertOne(t);var n,r=[],i=e&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;i&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",t);for(var o=0,u=t.length;o<u;o++){if(!(n=this.insertOne(t[o],!0)))return;r.push(n)}}finally{i&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",r),1===(r=this.cloneObjects?y(r,this.cloneMethod):r).length?r[0]:r},j.prototype.insertOne=function(t,e){var n,r=null;if("object"!==typeof t?r=new TypeError("Document needs to be an object"):null===t&&(r=new TypeError("Object cannot be null")),null!==r)throw this.emit("error",r),r;var i=this.cloneObjects?y(t,this.cloneMethod):t;if(this.disableMeta||"undefined"!==typeof i.meta||(i.meta={revision:0,created:0}),e||this.emit("pre-insert",i),this.add(i))return this.disableChangesApi?this.insertMeta(i):this.insertMetaWithChange(i),n=this.cloneObjects?y(i,this.cloneMethod):i,e||this.emit("insert",n),this.addAutoUpdateObserver(n),n},j.prototype.clear=function(t){var e=this;if(t=t||{},this.data=[],this.idIndex=[],this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,!0===t.removeIndices)this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[];else{var n=Object.keys(this.binaryIndices);n.forEach(function(t){e.binaryIndices[t].dirty=!1,e.binaryIndices[t].values=[]}),this.constraints={unique:{},exact:{}},this.uniqueNames.forEach(function(t){e.ensureUniqueIndex(t)})}},j.prototype.update=function(e){var n,r,i;if(Array.isArray(e)){i=e.length,(n=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0)&&(this.adaptiveBinaryIndices=!1);try{for(r=0;r<i;r+=1)this.update(e[r])}finally{n&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}}else{if(!t.call(e,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var o,u,s,a,c,l=this.get(e.$loki,!0),f=this;if(!l)throw new Error("Trying to update a document not in collection.");o=l[0],s=l[1],u=this.cloneObjects||!this.disableDeltaChangesApi?y(e,this.cloneMethod):e,this.emit("pre-update",e),Object.keys(this.constraints.unique).forEach(function(t){f.constraints.unique[t].update(o,u)}),this.data[s]=u,u!==e&&this.addAutoUpdateObserver(e);for(var h=0;h<this.DynamicViews.length;h++)this.DynamicViews[h].evaluateDocument(s,!1);if(this.adaptiveBinaryIndices){var p=this.binaryIndices;for(a in p)this.adaptiveBinaryIndexUpdate(s,a)}else this.flagBinaryIndexesDirty();return this.idIndex[s]=u.$loki,this.isIncremental&&this.dirtyIds.push(u.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?this.updateMeta(u,null):this.updateMetaWithChange(u,o),c=this.cloneObjects?y(u,this.cloneMethod):u,this.emit("update",c,o),c}catch(d){throw this.rollback(),this.lokiConsoleWrapper.error(d.message),this.emit("error",d),d}}},j.prototype.add=function(e){if("object"!==typeof e)throw new TypeError("Object being added needs to be an object");if("undefined"!==typeof e.$loki)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1),e.$loki=this.maxId,this.disableMeta||(e.meta.version=0);var n,r=this.constraints.unique;for(n in r)t.call(r,n)&&r[n].set(e);this.idIndex.push(e.$loki),this.isIncremental&&this.dirtyIds.push(e.$loki),this.data.push(e);for(var i=this.data.length-1,o=this.DynamicViews.length,u=0;u<o;u++)this.DynamicViews[u].evaluateDocument(i,!0);if(this.adaptiveBinaryIndices){var s=this.binaryIndices;for(n in s)this.adaptiveBinaryIndexInsert(i,n)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?y(e,this.cloneMethod):e}catch(a){throw this.rollback(),this.lokiConsoleWrapper.error(a.message),this.emit("error",a),a}},j.prototype.updateWhere=function(t,e){var n,r=this.where(t),i=0;try{for(;i<r.length;i++)n=e(r[i]),this.update(n)}catch(o){this.rollback(),this.lokiConsoleWrapper.error(o.message)}},j.prototype.removeWhere=function(t){var e;"function"===typeof t?(e=this.data.filter(t),this.remove(e)):this.chain().find(t).remove()},j.prototype.removeDataOnly=function(){this.remove(this.data.slice())},j.prototype.removeBatchByPositions=function(t){var e,n,r,i,o=t.length,u={},s=Object.keys(this.binaryIndices).length,a=Object.keys(this.constraints.unique).length,c=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,l=this;try{for(this.startTransaction(),r=0;r<o;r++)u[this.idIndex[t[r]]]=!0;if((e=this.DynamicViews.length)>0||s>0||a>0){if(e>0)for(n=0;n<e;n++)this.DynamicViews[n].removeDocument(t);if(this.adaptiveBinaryIndices&&!c){var f,h=this.binaryIndices;for(f in h)this.adaptiveBinaryIndexRemove(t,f)}else this.flagBinaryIndexesDirty();a&&Object.keys(this.constraints.unique).forEach(function(e){for(r=0;r<o;r++)null!==(i=l.data[t[r]])[e]&&void 0!==i[e]&&l.constraints.unique[e].remove(i[e])})}if(!this.disableChangesApi||this.events.delete.length>1)for(r=0;r<o;r++)this.emit("delete",this.data[t[r]]);this.data=this.data.filter(function(t){return!u[t.$loki]}),this.idIndex=this.idIndex.filter(function(t){return!u[t]}),this.adaptiveBinaryIndices&&c&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(p){return this.rollback(),c&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(p.message),this.emit("error",p),null}},j.prototype.removeBatch=function(t){var e,n=t.length,r=this.data.length,i={},o=[];for(e=0;e<r;e++)i[this.data[e].$loki]=e;for(e=0;e<n;e++)"object"===typeof t[e]?o.push(i[t[e].$loki]):o.push(i[t[e]]);this.removeBatchByPositions(o)},j.prototype.remove=function(e){if("number"===typeof e&&(e=this.get(e)),"object"!==typeof e)throw new Error("Parameter is not an object");if(Array.isArray(e))this.removeBatch(e);else{if(!t.call(e,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var n=this.get(e.$loki,!0),r=n[1],i=this;Object.keys(this.constraints.unique).forEach(function(t){null!==e[t]&&"undefined"!==typeof e[t]&&i.constraints.unique[t].remove(e[t])});for(var o=0;o<this.DynamicViews.length;o++)this.DynamicViews[o].removeDocument(r);if(this.adaptiveBinaryIndices){var u,s=this.binaryIndices;for(u in s)this.adaptiveBinaryIndexRemove(r,u)}else this.flagBinaryIndexesDirty();return this.data.splice(r,1),this.removeAutoUpdateObserver(e),this.idIndex.splice(r,1),this.isIncremental&&this.dirtyIds.push(e.$loki),this.commit(),this.dirty=!0,this.emit("delete",n[0]),delete e.$loki,delete e.meta,e}catch(a){return this.rollback(),this.lokiConsoleWrapper.error(a.message),this.emit("error",a),null}}},j.prototype.get=function(t,e){var n=e||!1,r=this.idIndex,i=r.length-1,o=0,u=o+i>>1;if(t="number"===typeof t?t:parseInt(t,10),isNaN(t))throw new TypeError("Passed id is not an integer");for(;r[o]<r[i];)r[u=o+i>>1]<t?o=u+1:i=u;return i===o&&r[o]===t?n?[this.data[o],o]:this.data[o]:null},j.prototype.getBinaryIndexPosition=function(t,n){var r=e.getIn(this.data[t],n,!0),i=this.binaryIndices[n].values,o=this.calculateRange("$eq",n,r);if(0===o[0]&&-1===o[1])return null;for(var u=o[0],s=o[1],a=u;a<=s;a++)if(i[a]===t)return a;return null},j.prototype.adaptiveBinaryIndexInsert=function(t,n){var r=-1!==n.indexOf("."),i=this.binaryIndices[n].values,o=e.getIn(this.data[t],n,r);!0===this.serializableIndices&&o instanceof Date&&(this.data[t][n]=o.getTime(),o=e.getIn(this.data[t],n));var u=0===i.length?0:this.calculateRangeStart(n,o,!0,r);this.binaryIndices[n].values.splice(u,0,t)},j.prototype.adaptiveBinaryIndexUpdate=function(t,e){var n,r=this.binaryIndices[e].values,i=r.length;for(n=0;n<i&&r[n]!==t;n++);this.binaryIndices[e].values.splice(n,1),this.adaptiveBinaryIndexInsert(t,e)},j.prototype.adaptiveBinaryIndexRemove=function(t,e,n){var r,i,o,u,s,a,c,l=this.binaryIndices[e],f={};if(Array.isArray(t)){if(1!==(u=t.length)){for(o=0;o<u;o++)f[t[o]]=!0;if(l.values=l.values.filter(function(t){return!f[t]}),!0===n)return;var h=t.slice();for(h.sort(function(t,e){return t-e}),r=l.values.length,i=0;i<r;i++){for(s=l.values[i],a=0,o=0;o<u&&s>h[o];o++)a++;l.values[i]-=a}return}t=t[0]}if(null===(c=this.getBinaryIndexPosition(t,e)))return null;if(l.values.splice(c,1),!0!==n)for(r=l.values.length,i=0;i<r;i++)l.values[i]>t&&l.values[i]--},j.prototype.calculateRangeStart=function(t,n,r,i){var u=this.data,s=this.binaryIndices[t].values,a=0,c=s.length-1,l=0;if(0===s.length)return-1;for(e.getIn(u[s[a]],t,i),e.getIn(u[s[c]],t,i);a<c;)l=a+c>>1,o.lt(e.getIn(u[s[l]],t,i),n,!1)?a=l+1:c=l;var f=a;return o.aeq(n,e.getIn(u[s[f]],t,i))?f:o.lt(n,e.getIn(u[s[f]],t,i),!1)?r?f:f-1:r?f+1:f},j.prototype.calculateRangeEnd=function(t,n,r){var i=this.data,u=this.binaryIndices[t].values,s=0,a=u.length-1,c=0;if(0===u.length)return-1;for(e.getIn(i[u[s]],t,r),e.getIn(i[u[a]],t,r);s<a;)c=s+a>>1,o.lt(n,e.getIn(i[u[c]],t,r),!1)?a=c:s=c+1;var l=a;return o.aeq(n,e.getIn(i[u[l]],t,r))?l:o.gt(n,e.getIn(i[u[l]],t,r),!1)?l+1:o.aeq(n,e.getIn(i[u[l-1]],t,r))?l-1:l},j.prototype.calculateRange=function(t,n,r){var i,u,s,a=this.data,c=this.binaryIndices[n].values,l=c.length-1;if(0===a.length)return[0,-1];var f=-1!==n.indexOf("."),h=e.getIn(a[c[0]],n,f),p=e.getIn(a[c[l]],n,f);switch(t){case"$eq":case"$aeq":case"$dteq":if(o.lt(r,h,!1)||o.gt(r,p,!1))return[0,-1];break;case"$gt":if(o.gt(r,p,!0))return[0,-1];if(o.gt(h,r,!1))return[0,l];break;case"$gte":if(o.gt(r,p,!1))return[0,-1];if(o.gt(h,r,!0))return[0,l];break;case"$lt":if(o.lt(r,h,!0))return[0,-1];if(o.lt(p,r,!1))return[0,l];break;case"$lte":if(o.lt(r,h,!1))return[0,-1];if(o.lt(p,r,!0))return[0,l];break;case"$between":return o.gt(r[0],p,!1)?[0,-1]:o.lt(r[1],h,!1)?[0,-1]:(i=this.calculateRangeStart(n,r[0],!1,f),s=this.calculateRangeEnd(n,r[1],f),i<0&&i++,s>l&&s--,o.gt(e.getIn(a[c[i]],n,f),r[0],!0)||i++,o.lt(e.getIn(a[c[s]],n,f),r[1],!0)||s--,s<i?[0,-1]:[i,s]);case"$in":for(var d=[],y=[],v=0,b=r.length;v<b;v++)for(var g=this.calculateRange("$eq",n,r[v]),m=g[0];m<=g[1];m++)void 0===d[m]&&(d[m]=!0,y.push(m));return y}switch(t){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":i=this.calculateRangeStart(n,r,!1,f),u=e.getIn(a[c[i]],n,f)}switch(t){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":s=this.calculateRangeEnd(n,r,f),e.getIn(a[c[s]],n,f)}switch(t){case"$eq":case"$aeq":case"$dteq":return o.aeq(u,r)?[i,s]:[0,-1];case"$gt":return o.aeq(e.getIn(a[c[s]],n,f),r)?[s+1,l]:[s,l];case"$gte":return o.aeq(e.getIn(a[c[i]],n,f),r)?[i,l]:[i+1,l];case"$lt":return o.aeq(e.getIn(a[c[i]],n,f),r)?[0,i-1]:[0,i];case"$lte":return o.aeq(e.getIn(a[c[s]],n,f),r)?[0,s]:[0,s-1];default:return[0,a.length-1]}},j.prototype.by=function(t,e){var n;if(void 0===e)return n=this,function(e){return n.by(t,e)};var r=this.constraints.unique[t].get(e);return this.cloneObjects?y(r,this.cloneMethod):r},j.prototype.findOne=function(t){t=t||{};var e=this.chain().find(t,!0).data();return Array.isArray(e)&&0===e.length?null:this.cloneObjects?y(e[0],this.cloneMethod):e[0]},j.prototype.chain=function(t,e){var n=new O(this);return"undefined"===typeof t?n:n.transform(t,e)},j.prototype.find=function(t){return this.chain().find(t).data()},j.prototype.findOneUnindexed=function(t,n){for(var r=this.data.length;r--;)if(e.getIn(this.data[r],t,!0)===n)return this.data[r];return null},j.prototype.startTransaction=function(){if(this.transactional){this.cachedData=y(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].startTransaction()}},j.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].commit()}},j.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].rollback()}},j.prototype.async=function(t,e){setTimeout(function(){if("function"!==typeof t)throw new TypeError("Argument passed for async execution is not a function");t(),e()},0)},j.prototype.where=function(t){return this.chain().where(t).data()},j.prototype.mapReduce=function(t,e){try{return e(this.data.map(t))}catch(n){throw n}},j.prototype.eqJoin=function(t,e,n,r,i){return new O(this).eqJoin(t,e,n,r,i)},j.prototype.stages={},j.prototype.getStage=function(t){return this.stages[t]||(this.stages[t]={}),this.stages[t]},j.prototype.commitLog=[],j.prototype.stage=function(t,e){var n=JSON.parse(JSON.stringify(e));return this.getStage(t)[e.$loki]=n,n},j.prototype.commitStage=function(t,e){var n,r=this.getStage(t),i=(new Date).getTime();for(n in r)this.update(r[n]),this.commitLog.push({timestamp:i,message:e,data:JSON.parse(JSON.stringify(r[n]))});this.stages[t]={}},j.prototype.no_op=function(){},j.prototype.extract=function(t){for(var e=0,n=this.data.length,r=I(t),i=[];e<n;e+=1)i.push(C(this.data[e],t,r));return i},j.prototype.max=function(t){return Math.max.apply(null,this.extract(t))},j.prototype.min=function(t){return Math.min.apply(null,this.extract(t))},j.prototype.maxRecord=function(t){for(var e,n=0,r=this.data.length,i=I(t),o={index:0,value:void 0};n<r;n+=1)void 0!==e?e<C(this.data[n],t,i)&&(e=C(this.data[n],t,i),o.index=this.data[n].$loki):(e=C(this.data[n],t,i),o.index=this.data[n].$loki);return o.value=e,o},j.prototype.minRecord=function(t){for(var e,n=0,r=this.data.length,i=I(t),o={index:0,value:void 0};n<r;n+=1)void 0!==e?e>C(this.data[n],t,i)&&(e=C(this.data[n],t,i),o.index=this.data[n].$loki):(e=C(this.data[n],t,i),o.index=this.data[n].$loki);return o.value=e,o},j.prototype.extractNumerical=function(t){return this.extract(t).map(k).filter(Number).filter(function(t){return!isNaN(t)})},j.prototype.avg=function(t){return A(this.extractNumerical(t))},j.prototype.stdDev=function(t){return function(t){var e=A(t),n=A(t.map(function(t){var n=t-e,r=n*n;return r}));return Math.sqrt(n)}(this.extractNumerical(t))},j.prototype.mode=function(t){var e,n,r,i={},o=this.extract(t);for(n in o.forEach(function(t){i[t]?i[t]+=1:i[t]=1}),i)e?e<i[n]&&(r=n):(r=n,e=i[n]);return r},j.prototype.median=function(t){var e=this.extractNumerical(t);e.sort(P);var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},T.prototype={keys:[],values:[],sort:function(t,e){return t<e?-1:t>e?1:0},setSort:function(t){this.bs=new N(t)},bs:function(){return new N(this.sort)},set:function(t,e){var n=this.bs(this.keys,t);n.found?this.values[n.index]=e:(this.keys.splice(n.index,0,t),this.values.splice(n.index,0,e))},get:function(t){return this.values[D(this.keys,t,this.sort).index]}},M.prototype.keyMap={},M.prototype.lokiMap={},M.prototype.set=function(t){var e=t[this.field];if(null!==e&&"undefined"!==typeof e){if(this.keyMap[e])throw new Error("Duplicate key for property "+this.field+": "+e);this.keyMap[e]=t,this.lokiMap[t.$loki]=e}},M.prototype.get=function(t){return this.keyMap[t]},M.prototype.byId=function(t){return this.keyMap[this.lokiMap[t]]},M.prototype.update=function(t,e){if(this.lokiMap[t.$loki]!==e[this.field]){var n=this.lokiMap[t.$loki];this.set(e),this.keyMap[n]=void 0}else this.keyMap[t[this.field]]=e},M.prototype.remove=function(t){var e=this.keyMap[t];if(null===e||"undefined"===typeof e)throw new Error("Key is not in unique index: "+this.field);this.keyMap[t]=void 0,this.lokiMap[e.$loki]=void 0},M.prototype.clear=function(){this.keyMap={},this.lokiMap={}},V.prototype={set:function(t,e){this.index[t]?this.index[t].push(e):this.index[t]=[e]},remove:function(t,e){var n=this.index[t];for(var r in n)n[r]==e&&n.splice(r,1);n.length<1&&(this.index[t]=void 0)},get:function(t){return this.index[t]},clear:function(t){this.index={}}},g.LokiOps=p,g.Collection=j,g.KeyValueStore=T,g.LokiMemoryAdapter=m,g.LokiPartitioningAdapter=w,g.LokiLocalStorageAdapter=_,g.LokiFsAdapter=x,g.persistenceAdapters={fs:x,localStorage:_},g.aeq=u,g.lt=s,g.gt=a,g.Comparators=o,g}()})?o.apply(e,u):o)||(t.exports=s)}).call(this,n(75),n(103))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"allPromises",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"identicalArrays",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"withoutIdentical",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"differenceWith",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"arrayDifference",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"cond",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"tryCatch",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"hasIn",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"is",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"identical",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"objOf",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"fromPairs",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"toPairs",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"complement",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"unnest",{enumerable:!0,get:function(){return j.default}});var r=I(n(111)),i=I(n(112)),o=I(n(113)),u=I(n(84)),s=I(n(85)),a=I(n(87)),c=I(n(86)),l=I(n(114)),f=I(n(88)),h=I(n(115)),p=I(n(116)),d=I(n(78)),y=I(n(89)),v=I(n(77)),b=I(n(90)),g=I(n(117)),m=I(n(118)),w=I(n(119)),x=I(n(120)),_=I(n(121)),O=I(n(122)),S=I(n(123)),j=I(n(124));function I(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};if(e===n)return 0!==e||1/e===1/n;return e!==e&&n!==n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};return null!=n&&n.constructor===e||n instanceof e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,r.default)(t);e.framesToPop+=1,i.default.error(e)};var r=o(n(80)),i=o(n(81));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCustomDiagnosticErrorFunction=function(t){r=t},e.default=function(t){if(r)return r(t);var e=new Error(t);return e.framesToPop=1,e.name="Diagnostic error",e};var r=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=new(function(){function t(){this.silent=!1}var e=t.prototype;return e.log=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.silent||(t=console).log.apply(t,n)},e.warn=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.silent||(t=console).warn.apply(t,n)},e.error=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.silent||(t=console).error.apply(t,n)},e.silence=function(){this.silent=!0},t}());e.default=r},function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){return function(){function t(t,e){if(this.app="loki",this.options=e||{},"undefined"!==typeof t&&(this.app=t),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}function e(t){this.db=null,this.initializeLokiCatalog(t)}return t.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},t.prototype.checkAvailability=function(){return!("undefined"===typeof indexedDB||!indexedDB)},t.prototype.loadDatabase=function(t,n){var r=this.app,i=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(r,t,function(t){if("function"===typeof n){if(0===t.id)return void n(null);n(t.val)}else console.log(t.val)}):this.catalog=new e(function(e){i.catalog=e,i.loadDatabase(t,n)})},t.prototype.loadKey=t.prototype.loadDatabase,t.prototype.saveDatabase=function(t,n,r){var i=this.app,o=this;function u(t){t&&!0===t.success?r(null):r(new Error("Error saving database")),o.options.closeAfterSave&&o.closeDatabase()}null!==this.catalog&&null!==this.catalog.db?this.catalog.setAppKey(i,t,n,u):this.catalog=new e(function(e){o.saveDatabase(t,n,u)})},t.prototype.saveKey=t.prototype.saveDatabase,t.prototype.deleteDatabase=function(t,n){var r=this.app,i=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(r,t,function(t){var e=t.id;0!==e?i.catalog.deleteAppKey(e,n):"function"===typeof n&&n({success:!0})}):this.catalog=new e(function(e){i.catalog=e,i.deleteDatabase(t,n)})},t.prototype.deleteKey=t.prototype.deleteDatabase,t.prototype.deleteDatabasePartitions=function(t){var e=this;this.getDatabaseList(function(n){n.forEach(function(n){n.startsWith(t)&&e.deleteDatabase(n)})})},t.prototype.getDatabaseList=function(t){var n=this.app,r=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKeys(n,function(e){for(var n=[],r=0;r<e.length;r++)n.push(e[r].key);"function"===typeof t?t(n):n.forEach(function(t){console.log(t)})}):this.catalog=new e(function(e){r.catalog=e,r.getDatabaseList(t)})},t.prototype.getKeyList=t.prototype.getDatabaseList,t.prototype.getCatalogSummary=function(t){this.app;var n=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAllKeys(function(e){for(var n,r,i,o,u,s=[],a=0;a<e.length;a++)n=e[a],i=n.app||"",o=n.key||"",u=n.val||"",r=2*i.length+2*o.length+u.length+1,s.push({app:n.app,key:n.key,size:r});"function"===typeof t?t(s):s.forEach(function(t){console.log(t)})}):this.catalog=new e(function(e){n.catalog=e,n.getCatalogSummary(t)})},e.prototype.initializeLokiCatalog=function(t){var e=indexedDB.open("LokiCatalog",1),n=this;e.onupgradeneeded=function(t){var e=t.target.result;if(e.objectStoreNames.contains("LokiAKV")&&e.deleteObjectStore("LokiAKV"),!e.objectStoreNames.contains("LokiAKV")){var n=e.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});n.createIndex("app","app",{unique:!1}),n.createIndex("key","key",{unique:!1}),n.createIndex("appkey","appkey",{unique:!0})}},e.onsuccess=function(e){n.db=e.target.result,"function"===typeof t&&t(n)},e.onerror=function(t){throw t}},e.prototype.getAppKey=function(t,e,n){var r,i=this.db.transaction(["LokiAKV"],"readonly"),o=i.objectStore("LokiAKV"),u=o.index("appkey"),s=t+","+e,a=u.get(s);a.onsuccess=(r=n,function(t){var e=t.target.result;null!==e&&"undefined"!==typeof e||(e={id:0,success:!1}),"function"===typeof r?r(e):console.log(e)}),a.onerror=function(t){return function(e){if("function"!==typeof t)throw e;t({id:0,success:!1})}}(n)},e.prototype.getAppKeyById=function(t,e,n){var r=this.db.transaction(["LokiAKV"],"readonly"),i=r.objectStore("LokiAKV"),o=i.get(t);o.onsuccess=function(t,e){return function(n){"function"===typeof e?e(n.target.result,t):console.log(n.target.result)}}(n,e)},e.prototype.setAppKey=function(t,e,n,r){var i,o=this.db.transaction(["LokiAKV"],"readwrite"),u=o.objectStore("LokiAKV"),s=u.index("appkey"),a=t+","+e,c=s.get(a);c.onsuccess=function(i){var o=i.target.result;null===o||void 0===o?o={app:t,key:e,appkey:t+","+e,val:n}:o.val=n;var s,a=u.put(o);a.onerror=(s=r,function(t){"function"===typeof s?s({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(c.error))}),a.onsuccess=function(t){return function(e){"function"===typeof t&&t({success:!0})}}(r)},c.onerror=(i=r,function(t){"function"===typeof i?i({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(c.error))})},e.prototype.deleteAppKey=function(t,e){var n,r=this.db.transaction(["LokiAKV"],"readwrite"),i=r.objectStore("LokiAKV"),o=i.delete(t);o.onsuccess=(n=e,function(t){"function"===typeof n&&n({success:!0})}),o.onerror=function(t){return function(e){"function"===typeof t?t({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(o.error))}}(e)},e.prototype.getAppKeys=function(t,e){var n,r=this.db.transaction(["LokiAKV"],"readonly"),i=r.objectStore("LokiAKV"),o=i.index("app"),u=IDBKeyRange.only(t),s=o.openCursor(u);s.onsuccess=function(t,e){return function(n){var r=n.target.result;if(r){var i=r.value;t.push(i),r.continue()}else"function"===typeof e?e(t):console.log(t)}}([],e),s.onerror=(n=e,function(t){"function"===typeof n?n(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(t))})},e.prototype.getAllKeys=function(t){var e,n=this.db.transaction(["LokiAKV"],"readonly"),r=n.objectStore("LokiAKV"),i=r.openCursor();i.onsuccess=function(t,e){return function(n){var r=n.target.result;if(r){var i=r.value;t.push(i),r.continue()}else"function"===typeof e?e(t):console.log(t)}}([],t),i.onerror=(e=t,function(t){"function"===typeof e&&e(null)})},t}()})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.setGenerator=void 0;var r="0123456789abcdefghijklmnopqrstuvwxyz",i=r.length,o=function(){return function(){for(var t="",e=0;e<8;e+=1){var n=Math.floor(Math.random()*i*i);t+=r[Math.floor(n/i)],t+=r[n%i]}return t}()};e.setGenerator=function(t){if("string"!==typeof t())throw new Error("RandomId generator function needs to return a string type.");o=t};e.default=function(){return o()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(r.default,e,t)};var r=o(n(77)),i=o(n(86));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=n.length;r<i;r++)if(t(e,n[r]))return!0;return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n,i){if(void 0===n)return function(n,r){return void 0===r?function(r){return t(e,n,r)}:t(e,n,r)};if(void 0===i)return function(r){return t(e,n,r)};var o=[];for(var u=0,s=n.length;u<s;u++)r(e,n[u],i)||r(e,n[u],o)||o.push(n[u]);return o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(void 0===n)return function(n){return t(e,n)};if((0,i.default)(Array,n)){for(var r=[[],[]],o=0,u=n.length;o<u;o++){var s=n[o];r[e(s)?0:1].push(s)}return r}var r=[{},{}];var a=Object.keys(n);for(var o=0,u=a.length;o<u;o++){var c=a[o],s=n[c];r[e(s)?0:1][c]=s}return r};var r,i=(r=n(78))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=Array.prototype.slice.call(arguments,1);if(0===n.length)return function(){return t.apply(this,[e].concat(Array.prototype.slice.call(arguments,0)))};for(var r=0,i=e.length;r<i;r++)if(e[r][0].apply(this,n))return e[r][1].apply(this,n);return}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(void 0===n)return function(n){return t(e,n)};var r=[];var i=Math.min(e.length,n.length);for(var o=0;o<i;o++)r[o]=[e[o],n[o]];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};var r={};r[e]=n;return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e="^".concat(t,"$").replace(/%/g,".*").replace(/_/g,".");return new RegExp(e,"i")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tableName=function(t){return t},e.columnName=function(t){return t},e.appSchema=function(t){var e=t.version;var n=t.tables.reduce(function(t,e){return t[e.name]=e,t},{});return{version:e,tables:n}},e.validateColumnSchema=function(t){0},e.tableSchema=function(t){var e=t.name,n=t.columns;0;var r=n.reduce(function(t,e){return t[e.name]=e,t},{});return{name:e,columns:r,columnArray:n}};var r;(r=n(37))&&r.__esModule},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(59),o=n(58),u=n(22),s=n(6),a=n(60),c=n(44),l=n(30),f=n(53),h=n(8),p=n(68),d=n(0),y=n(31),v=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return d.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(y.a),b=n(29),g=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(b.a))(v),m=function(t){function e(e,n){void 0===e&&(e=w),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return d.a(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(b.a),w=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return d.a(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(y.a),x=n(57),_=n(5),O=n(1),S=n(18),j=n(38),I=n(16),k=n(19);function E(t){return!!t&&(t instanceof r.a||"function"===typeof t.lift&&"function"===typeof t.subscribe)}var P=n(25),A=n(27),C=n(23),D=n(40),N=n(62),T=n(9),M=n(51),V=n(7),R=n(10);function L(t,e,n){if(e){if(!Object(R.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return L(t,n).apply(void 0,r).pipe(Object(T.a)(function(t){return Object(V.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o,u=this,s={context:u,subject:o,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n){var i={args:e,subscriber:r,params:s};return n.schedule(F,0,i)}if(!o){o=new l.a;try{t.apply(u,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(a){Object(M.a)(o)?o.error(a):console.warn(a)}}return o.subscribe(r)})}}function F(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,u=i.context,s=i.scheduler,a=i.subject;if(!a){a=i.subject=new l.a;try{o.apply(u,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(s.schedule(q,0,{value:r,subject:a}))}]))}catch(c){a.error(c)}}this.add(a.subscribe(r))}function q(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function $(t,e,n){if(e){if(!Object(R.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return $(t,n).apply(void 0,r).pipe(Object(T.a)(function(t){return Object(V.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(function(r){var i=o.context,u=o.subject;if(n)return n.schedule(B,0,{params:o,subscriber:r,context:i});if(!u){u=o.subject=new l.a;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?u.error(n):(u.next(t.length<=1?t[0]:t),u.complete())}]))}catch(s){Object(M.a)(u)?u.error(s):console.warn(s)}}return u.subscribe(r)})}}function B(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,u=n.args,s=n.scheduler,a=n.subject;if(!a){a=n.subject=new l.a;try{o.apply(i,u.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(s.schedule(W,0,{err:r,subject:a}));else{var i=t.length<=1?t[0]:t;e.add(s.schedule(z,0,{value:i,subject:a}))}}]))}catch(c){this.add(s.schedule(W,0,{err:c,subject:a}))}}this.add(a.subscribe(r))}function z(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function W(t){var e=t.err;t.subject.error(e)}var U=n(46),J=n(34),K=n(48),Y=n(11),G=n(50),H=n(12);function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(Object(V.a)(n))return X(n,null);if(Object(G.a)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return X(r.map(function(t){return n[t]}),r)}}if("function"===typeof t[t.length-1]){var i=t.pop();return X(t=1===t.length&&Object(V.a)(t[0])?t[0]:t,null).pipe(Object(T.a)(function(t){return i.apply(void 0,t)}))}return X(t,null)}function X(t,e){return new r.a(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,u=0,s=function(s){var a=Object(H.a)(t[s]),c=!1;n.add(a.subscribe({next:function(t){c||(c=!0,u++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(u===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},a=0;a<r;a++)s(a);else n.complete()})}var Z=n(26);function tt(t,e,n,i){return Object(Z.a)(n)&&(i=n,n=void 0),i?tt(t,e,n).pipe(Object(T.a)(function(t){return Object(V.a)(t)?i.apply(void 0,t):i(t)})):new r.a(function(r){!function t(e,n,r,i,o){var u;if(function(t){return t&&"function"===typeof t.addEventListener&&"function"===typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),u=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"===typeof t.on&&"function"===typeof t.off}(e)){var a=e;e.on(n,r),u=function(){return a.off(n,r)}}else if(function(t){return t&&"function"===typeof t.addListener&&"function"===typeof t.removeListener}(e)){var c=e;e.addListener(n,r),u=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,f=e.length;l<f;l++)t(e[l],n,r,i,o)}i.add(u)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})}function et(t,e,n){return n?et(t,e).pipe(Object(T.a)(function(t){return Object(V.a)(t)?n.apply(void 0,t):n(t)})):new r.a(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(o){return void n.error(o)}if(Object(Z.a)(e))return function(){return e(i,r)}})}function nt(t,e,n,i,o){var u,s;if(1==arguments.length){var a=t;s=a.initialState,e=a.condition,n=a.iterate,u=a.resultSelector||k.a,o=a.scheduler}else void 0===i||Object(R.a)(i)?(s=t,u=k.a,o=i):(s=t,u=i);return new r.a(function(t){var r=s;if(o)return o.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:u,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(c){return void t.error(c)}if(!i){t.complete();break}}var a=void 0;try{a=u(r)}catch(c){return void t.error(c)}if(t.next(a),t.closed)break;try{r=n(r)}catch(c){return void t.error(c)}}})}function rt(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(o){return void e.error(o)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(o){return void e.error(o)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(o){return void e.error(o)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function it(t,e,n){return void 0===e&&(e=Y.a),void 0===n&&(n=Y.a),Object(K.a)(function(){return t()?e:n})}var ot=n(32);function ut(t,e){return void 0===t&&(t=0),void 0===e&&(e=h.a),(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"===typeof e.schedule||(e=h.a),new r.a(function(n){return n.add(e.schedule(st,t,{subscriber:n,counter:0,period:t})),n})}function st(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var at=n(64),ct=new r.a(I.a);function lt(){return ct}var ft=n(36);function ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Y.a;var n=t[0],i=t.slice(1);return 1===t.length&&Object(V.a)(n)?ht.apply(void 0,n):new r.a(function(t){var e=function(){return t.add(ht.apply(void 0,i).subscribe(t))};return Object(H.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function pt(t,e){return e?new r.a(function(n){var r=Object.keys(t),i=new _.a;return i.add(e.schedule(dt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}):new r.a(function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function dt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var u=e[n];r.next([u,o[u]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var yt=n(73),vt=n(41),bt=n(17);function gt(t,e,n){return[Object(bt.a)(e,n)(new r.a(Object(vt.a)(t))),Object(bt.a)(Object(yt.a)(e,n))(new r.a(Object(vt.a)(t)))]}var mt=n(65);function wt(t,e,n){return void 0===t&&(t=0),new r.a(function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(xt,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function xt(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var _t=n(45),Ot=n(66);function St(t,e){return new r.a(function(n){var r,i;try{r=t()}catch(u){return void n.error(u)}try{i=e(r)}catch(u){return void n.error(u)}var o=(i?Object(H.a)(i):Y.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}var jt=n(49),It=n(67),kt=n(15);n.d(e,"Observable",function(){return r.a}),n.d(e,"ConnectableObservable",function(){return i.a}),n.d(e,"GroupedObservable",function(){return o.a}),n.d(e,"observable",function(){return u.a}),n.d(e,"Subject",function(){return s.a}),n.d(e,"BehaviorSubject",function(){return a.a}),n.d(e,"ReplaySubject",function(){return c.a}),n.d(e,"AsyncSubject",function(){return l.a}),n.d(e,"asapScheduler",function(){return f.a}),n.d(e,"asyncScheduler",function(){return h.a}),n.d(e,"queueScheduler",function(){return p.a}),n.d(e,"animationFrameScheduler",function(){return g}),n.d(e,"VirtualTimeScheduler",function(){return m}),n.d(e,"VirtualAction",function(){return w}),n.d(e,"Scheduler",function(){return x.a}),n.d(e,"Subscription",function(){return _.a}),n.d(e,"Subscriber",function(){return O.a}),n.d(e,"Notification",function(){return S.a}),n.d(e,"NotificationKind",function(){return S.b}),n.d(e,"pipe",function(){return j.a}),n.d(e,"noop",function(){return I.a}),n.d(e,"identity",function(){return k.a}),n.d(e,"isObservable",function(){return E}),n.d(e,"ArgumentOutOfRangeError",function(){return P.a}),n.d(e,"EmptyError",function(){return A.a}),n.d(e,"ObjectUnsubscribedError",function(){return C.a}),n.d(e,"UnsubscriptionError",function(){return D.a}),n.d(e,"TimeoutError",function(){return N.a}),n.d(e,"bindCallback",function(){return L}),n.d(e,"bindNodeCallback",function(){return $}),n.d(e,"combineLatest",function(){return U.b}),n.d(e,"concat",function(){return J.a}),n.d(e,"defer",function(){return K.a}),n.d(e,"empty",function(){return Y.b}),n.d(e,"forkJoin",function(){return Q}),n.d(e,"from",function(){return H.a}),n.d(e,"fromEvent",function(){return tt}),n.d(e,"fromEventPattern",function(){return et}),n.d(e,"generate",function(){return nt}),n.d(e,"iif",function(){return it}),n.d(e,"interval",function(){return ut}),n.d(e,"merge",function(){return at.a}),n.d(e,"never",function(){return lt}),n.d(e,"of",function(){return ft.a}),n.d(e,"onErrorResumeNext",function(){return ht}),n.d(e,"pairs",function(){return pt}),n.d(e,"partition",function(){return gt}),n.d(e,"race",function(){return mt.a}),n.d(e,"range",function(){return wt}),n.d(e,"throwError",function(){return _t.a}),n.d(e,"timer",function(){return Ot.a}),n.d(e,"using",function(){return St}),n.d(e,"zip",function(){return jt.b}),n.d(e,"scheduled",function(){return It.a}),n.d(e,"EMPTY",function(){return Y.a}),n.d(e,"NEVER",function(){return ct}),n.d(e,"config",function(){return kt.a})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(98))&&r.__esModule?r:{default:r};var o=(self.workerClass=new i.default(self),self);e.default=o},function(t,e,n){"use strict";var r=n(55);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=l(n(79)),u=l(n(37)),s=l(n(102)),a=l(n(135)),c=n(141);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=s.default.prototype,p=((i={})[c.actions.SETUP]=h.setUp,i[c.actions.FIND]=h.find,i[c.actions.QUERY]=h.query,i[c.actions.COUNT]=h.count,i[c.actions.BATCH]=h.batch,i[c.actions.UNSAFE_RESET_DATABASE]=h.unsafeResetDatabase,i[c.actions.GET_LOCAL]=h.getLocal,i[c.actions.SET_LOCAL]=h.setLocal,i[c.actions.REMOVE_LOCAL]=h.removeLocal,i[c.actions.GET_DELETED_RECORDS]=h.getDeletedRecords,i[c.actions.DESTROY_DELETED_RECORDS]=h.destroyDeletedRecords,i),d=c.responseActions,y=d.RESPONSE_SUCCESS,v=d.RESPONSE_ERROR,b=function(){function t(t){var e=this;this.workerContext=t,this._setUpQueue(),this.workerContext.onmessage=function(t){e.asyncQueue.push(t.data,function(t){var n=t.type,r=t.payload;e.workerContext.postMessage({type:n,payload:r})})}}return t.prototype._setUpQueue=function(){var t=this;this.asyncQueue=(0,a.default)(function(e,n){return new Promise(function(i,a){var l,h,d,b,g,m=function(){try{return i()}catch(t){return a(t)}},w=function(t){try{return(0,o.default)(t),n({type:v,payload:t}),m()}catch(e){return a(e)}};try{var x=function(){return m()};return l=e.type,h=e.payload,(0,u.default)(l in c.actions,"Unknown worker action ".concat(l)),l===c.actions.SETUP?((0,u.default)(!t.executor,"Loki executor already set up - cannot set up again"),d=r(h,1)[0],b=new s.default(d),Promise.resolve(b.setUp()).then(function(){try{return t.executor=b,n({type:y,payload:null}),x.call(this)}catch(e){return w(e)}}.bind(this),w)):((0,u.default)(t.executor,"Cannot run actions because executor is not set up"),g=p[l].bind(t.executor),Promise.resolve(g.apply(void 0,f(h))).then(function(t){try{return n({type:y,payload:t}),x.call(this)}catch(e){return w(e)}}.bind(this),w))}catch(_){w(_)}})})},t}();e.default=b},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";var r=n(55);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;!function(t){if(t&&t.__esModule)return t;var e=f();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}}n.default=t,e&&e.set(t,n)}(n(74));var i,o=n(56),u=n(107),s=n(126),a=n(127),c=n(128),l=(i=n(130))&&i.__esModule?i:{default:i};function f(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return f=function(){return t},t}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(t){this.cachedRecords=new Map;var e=t.dbName,n=t.schema,r=t.migrations,i=t._testLokiAdapter;this.dbName=e,this.schema=n,this.migrations=r,this.experimentalUseIncrementalIndexedDB=t.experimentalUseIncrementalIndexedDB||!1,this.onIndexedDBVersionChange=t.onIndexedDBVersionChange,this._testLokiAdapter=i}var e,n,i,f=t.prototype;return f.setUp=function(){return new Promise(function(t,e){return Promise.resolve(this._openDatabase()).then(function(){try{return Promise.resolve(this._migrateIfNeeded()).then(function(){try{return t()}catch(n){return e(n)}},e)}catch(n){return e(n)}}.bind(this),e)}.bind(this))},f.isCached=function(t,e){var n=this.cachedRecords.get(t);return!!n&&n.has(e)},f.markAsCached=function(t,e){var n=this.cachedRecords.get(t);n?n.add(e):this.cachedRecords.set(t,new Set([e]))},f.removeFromCache=function(t,e){var n=this.cachedRecords.get(t);n&&n.delete(e)},f.find=function(t,e){if(this.isCached(t,e))return e;var n=this.loki.getCollection(t).by("id",e);return n?(this.markAsCached(t,e),(0,a.sanitizedRaw)(n,this.schema.tables[t])):null},f.query=function(t){var e=(0,l.default)(t,this.loki).data();return this._compactQueryResults(e,t.table)},f.count=function(t){return(0,l.default)(t,this.loki).count()},f.update=function(t,e){var n=this.loki.getCollection(t),r=n.by("id",e.id).$loki,i=e;i.$loki=r,n.update(i)},f.destroyPermanently=function(t,e){var n=this.loki.getCollection(t),r=n.by("id",e);n.remove(r),this.removeFromCache(t,e)},f.markAsDeleted=function(t,e){var n=this.loki.getCollection(t),r=n.by("id",e);r&&(r._status="deleted",n.update(r),this.removeFromCache(t,e))},f.batch=function(t){var e=this,n={};t.forEach(function(t){var e=r(t,3),i=e[0],o=e[1],u=e[2];switch(i){case"create":n[o]||(n[o]=[]),n[o].push(u)}}),Object.entries(n).forEach(function(t){var n=r(t,2),i=n[0],o=n[1],u=1e3<=o.length;e.loki.getCollection(i).insert(o,u),o.forEach(function(t){e.markAsCached(i,t.id)})}),t.forEach(function(t){var n=r(t,3),i=n[0],o=n[1],u=n[2];switch(i){case"update":e.update(o,u);break;case"markAsDeleted":e.markAsDeleted(o,u);break;case"destroyPermanently":e.destroyPermanently(o,u)}})},f.getDeletedRecords=function(t){return this.loki.getCollection(t).find({_status:{$eq:"deleted"}}).map((0,o.prop)("id"))},f.destroyDeletedRecords=function(t,e){var n=this.loki.getCollection(t);(0,o.forEach)(function(t){var e=n.by("id",t);e&&n.remove(e)},e)},f.unsafeResetDatabase=function(){return new Promise(function(t,e){return Promise.resolve((0,c.deleteDatabase)(this.loki)).then(function(){try{return this.cachedRecords.clear(),u.logger.log("[DB][Worker] Database is now reset"),Promise.resolve(this._openDatabase()).then(function(){try{return this._setUpSchema(),t()}catch(n){return e(n)}}.bind(this),e)}catch(n){return e(n)}}.bind(this),e)}.bind(this))},f.getLocal=function(t){var e=this._findLocal(t);return e?e.value:null},f.setLocal=function(t,e){var n=this._findLocal(t);n?(n.value=e,this._localStorage.update(n)):this._localStorage.insert({key:t,value:e})},f.removeLocal=function(t){var e=this._findLocal(t);e&&this._localStorage.remove(e)},f._openDatabase=function(){return new Promise(function(t,e){return u.logger.log("[DB][Worker] Initializing IndexedDB"),Promise.resolve((0,c.newLoki)(this.dbName,this._testLokiAdapter,this.experimentalUseIncrementalIndexedDB,this.onIndexedDBVersionChange)).then(function(n){try{return this.loki=n,u.logger.log("[DB][Worker] Database loaded"),t()}catch(r){return e(r)}}.bind(this),e)}.bind(this))},f._setUpSchema=function(){var t=this;u.logger.log("[DB][Worker] Setting up schema"),(0,o.values)(this.schema.tables).forEach(function(e){t._addCollection(e)}),this.loki.addCollection("local_storage",{unique:["key"],indices:[],disableMeta:!0}),this._databaseVersion=this.schema.version,u.logger.log("[DB][Worker] Database collections set up")},f._addCollection=function(t){var e=t.name,n=t.columns,r=(0,o.values)(n).reduce(function(t,e){return e.isIndexed?t.concat([e.name]):t},[]);this.loki.addCollection(e,{unique:["id"],indices:["_status"].concat(h(r)),disableMeta:!0})},f._migrateIfNeeded=function(){return new Promise(function(t,e){var n,r,i;if((n=this._databaseVersion)===(r=this.schema.version))return f.call(this);var o=function(){return f.call(this)};if(0===n)return u.logger.log("[DB][Worker] Empty database, setting up"),Promise.resolve(this.unsafeResetDatabase()).then(function(){try{return o.call(this)}catch(t){return e(t)}}.bind(this),e);var s=function(){return o.call(this)};if(!(0<n&&n<r))return u.logger.warn("[DB][Worker] Database has newer version than app schema. Resetting database."),Promise.resolve(this.unsafeResetDatabase()).then(function(){try{return s.call(this)}catch(t){return e(t)}}.bind(this),e);var a=function(){return s.call(this)};if(u.logger.log("[DB][Worker] Database has old schema version. Migration is required."),!(i=this._getMigrationSteps(n)))return u.logger.warn("[DB][Worker] Migrations not available for this version range, resetting database instead"),Promise.resolve(this.unsafeResetDatabase()).then(function(){try{return a.call(this)}catch(t){return e(t)}}.bind(this),e);u.logger.log("[DB][Worker] Migrating from version ".concat(n," to ").concat(this.schema.version,"..."));var c=function(){try{return a.call(this)}catch(t){return e(t)}}.bind(this),l=function(t){try{throw u.logger.error("[DB][Worker] Migration failed",t),t}catch(n){return e(n)}};try{return Promise.resolve(this._migrate(i)).then(function(){try{return c()}catch(t){return l(t)}},l)}catch(h){l(h)}function f(){return t()}}.bind(this))},f._getMigrationSteps=function(t){var e=this.migrations;return e?(0,s.stepsForMigration)({migrations:e,fromVersion:t,toVersion:this.schema.version}):null},f._migrate=function(t){return new Promise(function(e){var n=this;return t.forEach(function(t){if("create_table"===t.type)n._executeCreateTableMigration(t);else{if("add_columns"!==t.type)throw new Error("Unsupported migration step ".concat(t.type));n._executeAddColumnsMigration(t)}}),this._databaseVersion=this.schema.version,u.logger.log("[DB][Worker] Migration successful"),e()}.bind(this))},f._executeCreateTableMigration=function(t){var e=t.schema;this._addCollection(e)},f._executeAddColumnsMigration=function(t){var e=t.table,n=t.columns,r=this.loki.getCollection(e);r.findAndUpdate({},function(t){n.forEach(function(e){(0,a.setRawSanitized)(t,e.name,null,e)})}),n.forEach(function(t){t.isIndexed&&r.ensureIndex(t.name)})},f._compactQueryResults=function(t,e){var n=this;return t.map(function(t){var r=t.id;return n.isCached(e,r)?r:(n.markAsCached(e,r),(0,a.sanitizedRaw)(t,n.schema.tables[e]))})},f._findLocal=function(t){var e=this._localStorage;return e&&e.by("key",t)},e=t,(n=[{key:"_databaseVersion",get:function(){var t=this.getLocal("_loki_schema_version")||"";return parseInt(t,10)||0},set:function(t){this.setLocal("_loki_schema_version","".concat(t))}},{key:"_localStorage",get:function(){return this.loki.getCollection("local_storage")}}])&&p(e.prototype,n),i&&p(e,i),t}();e.default=d},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var a,c=[],l=!1,f=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a&&a[f].run();f=-1,e=c.length}a=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){},function(t,e,n){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(106),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(u){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",c="object"===typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=w;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",y={},v={};v[u]=function(){return this};var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==r&&i.call(g,u)&&(v=g);var m=S.prototype=_.prototype=Object.create(v);O.prototype=m.constructor=S,S.constructor=O,S[a]=O.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===O||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(m),t},l.awrap=function(t){return{__await:t}},j(I.prototype),I.prototype[s]=function(){return this},l.AsyncIterator=I,l.async=function(t,e,n,r){var i=new I(w(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},j(m),m[a]="Generator",m[u]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=C,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],s=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var a=i.call(u,"catchLoc"),c=i.call(u,"finallyLoc");if(a&&c){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function w(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),u=new A(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var s=k(u,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var a=x(t,e,n);if("normal"===a.type){if(r=n.done?d:h,a.arg===y)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r=d,n.method="throw",n.arg=a.arg)}}}(t,n,u),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function _(){}function O(){}function S(){}function j(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function I(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,u){var s=x(t[n],t,r);if("throw"!==s.type){var a=s.arg,c=a.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,u)},function(t){e("throw",t,o,u)}):Promise.resolve(c).then(function(t){a.value=t,o(a)},function(t){return e("throw",t,o,u)})}u(s.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function k(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,k(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[u];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getPreciseTime",{enumerable:!0,get:function(){return r.getPreciseTime}}),Object.defineProperty(e,"devMeasureTime",{enumerable:!0,get:function(){return r.devMeasureTime}}),Object.defineProperty(e,"devMeasureTimeAsync",{enumerable:!0,get:function(){return r.devMeasureTimeAsync}}),Object.defineProperty(e,"randomId",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"makeDecorator",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"ensureSync",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"invariant",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"logger",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"connectionTag",{enumerable:!0,get:function(){return l.default}});var r=n(108),i=f(n(83)),o=f(n(109)),u=f(n(110)),s=f(n(37)),a=f(n(79)),c=f(n(81)),l=f(n(125));function f(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.devMeasureTime=function(t){var e=n(),r=t(),i=n()-e;return[r,i]},e.devMeasureTimeAsync=function(t){return new Promise(function(e,r){var i,o,u;return i=n(),Promise.resolve(t()).then(function(t){try{return o=t,u=n()-i,e([o,u])}catch(s){return r(s)}},r)})},e.getPreciseTime=void 0;var n="undefined"!==typeof t&&t.nativePerformanceNow?t.nativePerformanceNow:"undefined"!==typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now;e.getPreciseTime=n}).call(this,n(75))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 3>n.length?t.apply(void 0,n):t().apply(void 0,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,o.default)(!(0,i.is)(Promise,t),"Unexpected Promise. Passed function should be synchronous."),t};var r,i=n(76),o=(r=n(37))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){return Promise.all(e.map(t))};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n+=1)if(t[n]!==e[n])return!1;return!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return null!==t&&"object"===typeof t&&!Array.isArray(t)};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(85))&&r.__esModule?r:{default:r};var o=function(t,e){return{added:(0,i.default)(t,e),removed:(0,i.default)(e,t)}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n,r){if(void 0===n)return function(n,r){return void 0===r?function(r){return t(e,n,r)}:t(e,n,r)};if(void 0===r)return function(r){return t(e,n,r)};try{return e.apply(this,[r])}catch(i){return n.apply(this,[i,r])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(void 0===n)return function(n){return t(e,n)};return e in n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};return e>n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};return e>=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};return e<n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(1===arguments.length)return function(n){return t(e,n)};return e<=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n][0]]=t[n][1];return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];if(t)for(var n=Object.keys(t),r=0,i=n.length;r<i;r++){var o=n[r],u=t[o];o in t&&(e[r]=[o,u])}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=Array.prototype.slice.call(arguments,1);if(0===n.length)return function(){return t.apply(this,[e].concat(Array.prototype.slice.call(arguments,0)))};return!e.apply(this,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];(0,i.default)(Array,o)?e=e.concat(o):e.push(o)}return e};var r,i=(r=n(78))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return r+=1};var r=0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stepsForMigration=function(t){var e=t.migrations,n=t.fromVersion,r=t.toVersion,i=e.sortedMigrations,u=e.minVersion,s=e.maxVersion;if(n<u||r>s)return null;var a=i.filter(function(t){var e=t.toVersion;return e>n&&e<=r});return o(a)};var r=n(56),i=n(76),o=(0,r.pipe)((0,r.map)((0,r.prop)("steps")),i.unnest)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizedRaw=function(t,e){var n=t.id,r=t._status,u=t._changed,s={};"string"===typeof n?(s.id=n,s._status=function(t){return"created"===t||"updated"===t||"deleted"===t||"synced"===t}(r)?r:"created",s._changed="string"===typeof u?u:""):(s.id=(0,i.default)(),s._status="created",s._changed="");for(var a=e.columnArray,c=0,l=a.length;c<l;c+=1){var f=a[c],h=f.name,p=t[h];o(s,h,p,f)}return s},e.setRawSanitized=function(t,e,n,r){o(t,e,n,r)},e.nullValue=function(t){var e=t.isOptional,n=t.type;if(e)return null;if("string"===n)return"";if("number"===n)return 0;if("boolean"===n)return!1;throw new Error("Unknown type for column schema ".concat(JSON.stringify(t)))};var r,i=(r=n(83))&&r.__esModule?r:{default:r};function o(t,e,n,r){var i=r.type,o=r.isOptional;"string"===i?t[e]="string"===typeof n?n:o?null:"":"boolean"===i?t[e]="boolean"===typeof n?n:1===n||0===n?Boolean(n):!!o&&null:!function(t){return"number"===typeof t&&t===t&&t!==1/0&&t!==-1/0}(n)?t[e]=o?null:0:t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.newLoki=function(t,e,i,u){return new Promise(function(s,a){var c;return Promise.resolve(function(t,e,i,u){return new Promise(function(s,a){var c,l;return e?s(e):Promise.resolve(o()).then(function(e){try{return e?i?(c=n(129),s(new c({onversionchange:u}))):(l=n(82),s(new l(t))):function(){return s(new r.LokiMemoryAdapter)}.call(this)}catch(o){return a(o)}}.bind(this),a)})}(t,e,i,u)).then(function(e){try{return c=new r.default(t,{adapter:e,autosave:!0,autosaveInterval:250,verbose:!0}),Promise.resolve(new Promise(function(t,e){c.loadDatabase({},function(n){n?e(n):t()})})).then(function(){try{return s(c)}catch(t){return a(t)}},a)}catch(n){return a(n)}},a)})},e.deleteDatabase=function(t){return new Promise(function(e,n){return Promise.resolve(new Promise(function(e,n){t.close(function(){t.deleteDatabase({},function(t){t&&t.success||void 0===t?e():n(t)})})})).then(function(){try{return e()}catch(t){return n(t)}},n)})};var r=function(t){if(t&&t.__esModule)return t;var e=i();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=r?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=t[o]}}n.default=t,e&&e.set(t,n);return n}(n(74));function i(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}var o=function(){return new Promise(function(t){"undefined"===typeof indexedDB&&t(!1);var e=indexedDB.open("WatermelonIDBChecker");e.onsuccess=function(e){e.target.result.close(),t(!0)},e.onerror=function(){t(!1)},e.onblocked=function(){console.error("WatermelonIDBChecker call is blocked")}})}},function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){return function(){"use strict";function t(t){this.mode="incremental",this.options=t||{},this.chunkSize=100,this.idb=null}return t.prototype._getChunk=function(t,e){for(var n,r=e*this.chunkSize,i=r+this.chunkSize-1,o=t.idIndex,u=null,s=o.length-1,a=0;o[a]<o[s];)o[n=a+s>>1]<r?a=n+1:s=n;if(s===a&&o[a]>=r&&(u=a),null===u)return[];for(var c=null,l=u+this.chunkSize-1;l>=u;l--)if(o[l]<=i){c=l;break}var f=t.data[u];if(!(f&&f.$loki>=r&&f.$loki<=i))throw new Error("broken invariant firstelement");var h=t.data[c];if(!(h&&h.$loki>=r&&h.$loki<=i))throw new Error("broken invariant lastElement");var p=t.data.slice(u,c+1);if(p.length>this.chunkSize)throw new Error("broken invariant - chunk size");return p},t.prototype.saveDatabase=function(t,e,n){var r=this;console.log("exportDatabase - begin"),console.time("exportDatabase");var i=[];e.collections.forEach(function(t,n){var o=new Set;t.dirtyIds.forEach(function(t){var e=t/r.chunkSize|0;o.add(e)}),t.dirtyIds=[],o.forEach(function(e){var n=r._getChunk(t,e);i.push({key:t.name+".chunk."+e,value:JSON.stringify(n)})}),t.data=[],t.isIndex=[],i.push({key:t.name+".metadata",value:JSON.stringify(t)}),e.collections[n]={name:t.name}});var o=JSON.stringify(e);e=null,i.push({key:"loki",value:o}),r._saveChunks(t,i,n)},t.prototype.loadDatabase=function(t,e){var n=this;console.log("loadDatabase - begin"),console.time("loadDatabase"),this._getAllChunks(t,function(t){if(Array.isArray(t)||(console.timeEnd("loadDatabase"),e(t)),!t.length)return console.timeEnd("loadDatabase"),void e(null);var r;console.log("Found chunks:",t.length),n._sortChunksInPlace(t);var i={};t.forEach(function(t){var n=t.key,o=t.value;if("loki"!==n){if(n.includes(".")){var u=n.split(".");if(3===u.length&&"chunk"===u[1]){var s=u[0];return void(i[s]?i[s].dataChunks.push(o):i[s]={metadata:null,dataChunks:[o]})}if(2===u.length&&"metadata"===u[1]){var a=u[0];return void(i[a]?i[a].metadata=o:i[a]={metadata:o,dataChunks:[]})}}console.error("Unknown chunk "+n),e(new Error("Invalid database - unknown chunk found"))}else r=o}),t=null,r||e(new Error("Invalid database - missing database metadata")),r=JSON.parse(r),n._populate(r,i),i=null,console.timeEnd("loadDatabase"),e(r)})},t.prototype._sortChunksInPlace=function(t){var e=function(t){var e=t.key;if(e.includes(".")){var n=e.split(".");if(3===n.length&&"chunk"===n[1])return parseInt(n[2],10)}return-1};t.sort(function(t,n){var r=e(t),i=e(n);return r<i?-1:r>i?1:0})},t.prototype._populate=function(t,e){t.collections.forEach(function(n,r){var i=e[n.name];if(i){var o=JSON.parse(i.metadata);i.metadata=null,t.collections[r]=o;var u=i.dataChunks;u.forEach(function(t,e){var n=JSON.parse(t);t=null,u[e]=null,n.forEach(function(t){o.data.push(t)})})}})},t.prototype._initializeIDB=function(t,e,n){var r=this;if(console.log("initializing idb"),this.idbInitInProgress)throw new Error("Cannot open IndexedDB because open is already in progress");this.idbInitInProgress=!0;var i=indexedDB.open(t,1);i.onupgradeneeded=function(t){var e=t.target.result;if(console.log("onupgradeneeded, old version: "+t.oldVersion),!(t.oldVersion<1))throw new Error("Invalid old version "+t.oldVersion+" for IndexedDB upgrade");e.createObjectStore("LokiIncrementalData",{keyPath:"key"})},i.onsuccess=function(i){if(r.idbInitInProgress=!1,r.idb=i.target.result,!r.idb.objectStoreNames.contains("LokiIncrementalData"))return e(new Error("Missing LokiIncrementalData")),void r.deleteDatabase(t);console.log("init success"),r.idb.onversionchange=function(t){console.log("IDB version change",t),r.idb.close(),r.options.onversionchange&&r.options.onversionchange(t)},n()},i.onblocked=function(t){console.error("IndexedDB open is blocked",t),e(new Error("IndexedDB open is blocked by open connection"))},i.onerror=function(t){r.idbInitInProgress=!1,console.error("IndexeddB open error",t),e(t)}},t.prototype._saveChunks=function(t,e,n){var r=this;if(this.idb){if(this.operationInProgress)throw new Error("Error while saving to database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0;var i=this.idb.transaction(["LokiIncrementalData"],"readwrite");i.oncomplete=function(){r.operationInProgress=!1,console.timeEnd("exportDatabase"),n()},i.onerror=function(t){r.operationInProgress=!1,n(t)},i.onabort=function(t){r.operationInProgress=!1,n(t)};var o=i.objectStore("LokiIncrementalData");e.forEach(function(t){o.put(t)})}else this._initializeIDB(t,n,function(){r._saveChunks(t,e,n)})},t.prototype._getAllChunks=function(t,e){var n=this;if(this.idb){if(this.operationInProgress)throw new Error("Error while loading database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0;var r=this.idb.transaction(["LokiIncrementalData"],"readonly"),i=r.objectStore("LokiIncrementalData").getAll();i.onsuccess=function(t){n.operationInProgress=!1;var r=t.target.result;e(r)},i.onerror=function(t){n.operationInProgress=!1,e(t)}}else this._initializeIDB(t,e,function(){n._getAllChunks(t,e)})},t.prototype.deleteDatabase=function(t,e){if(this.operationInProgress)throw new Error("Error while deleting database - another operation is already in progress. Please use throttledSaves=true option on Loki object");this.operationInProgress=!0;var n=this;console.log("deleteDatabase - begin"),console.time("deleteDatabase"),this.idb&&(this.idb.close(),this.idb=null);var r=indexedDB.deleteDatabase(t);r.onsuccess=function(){n.operationInProgress=!1,console.timeEnd("deleteDatabase"),e({success:!0})},r.onerror=function(t){n.operationInProgress=!1,console.error("Error while deleting database",t),e({success:!1})},r.onblocked=function(t){console.error("Deleting database failed because it's blocked by another connection",t)}},t}()})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=e.getCollection(t.table).chain(),r=(0,o.default)(t);return l(n.find(function(t,e){var n=t.query,r=t.joins.map(function(t){return function(t,e){var n,r=t.table,i=t.query,o=t.originalConditions,u=t.mapKey,s=t.joinKey,a=l(e.getCollection(r).chain().find(i),o).data().map(function(t){return t[u]});return(n={})[s]={$in:a},n}(t,e)});return r.length?{$and:[].concat((i=r,c(i)||a(i)||s()),[n])}:n;var i}(r,e)),t.description.where)};u(n(74));var r=u(n(131)),i=n(133),o=u(n(134));function u(t){return t&&t.__esModule?t:{default:t}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function l(t,e){if((0,i.hasColumnComparisons)(e)){var n=(0,r.default)({where:e,join:[]});return t.where(n)}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.join,n=t.where;return(0,i.default)(!e.length,"Queries with joins can't be encoded into a matcher"),s(n)};var r=n(56),i=u(n(37)),o=u(n(132));function u(t){return t&&t.__esModule?t:{default:t}}var s=(0,r.pipe)((0,r.map)(function t(e){switch(e.type){case"where":return n=e,function(t){var e,r=t[n.left],i=n.comparison,u=o.default[i.operator],s=i.right;if(void 0!==s.value)e=s.value;else if(s.values)e=s.values;else{if(!s.column)throw new Error("Invalid comparisonRight");e=t[s.column]}return u(r,e)};case"and":return(0,r.allPass)(e.conditions.map(t));case"or":return(0,r.anyPass)(e.conditions.map(t));default:throw new Error("Invalid Where")}var n}),r.allPass)},function(t,e,n){"use strict";var r=n(55);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.notLike=e.like=e.rawFieldEquals=void 0;var i,o=n(76),u=(i=n(91))&&i.__esModule?i:{default:i};var s=function(t,e){return t==e};e.rawFieldEquals=s;var a=function(t){return function(e,n){return null!=e&&null!=n&&t(e,n)}},c=function(t,e){return"string"===typeof t?t:e},l=function(t,e){var n=c(t,"");return(0,u.default)(e).test(n)};e.like=l;var f=function(t,e){if(null===t)return!1;var n=c(t,"");return!(0,u.default)(e).test(n)};e.notLike=f;var h={eq:s,notEq:function(t,e){return!(t==e)},gt:a(o.gt),gte:a(o.gte),weakGt:function(t,e){return t>e||null!=t&&null==e},lt:a(o.lt),lte:a(o.lte),oneOf:function(t,e){return e.includes(t)},notIn:a(function(t,e){return!e.includes(t)}),between:function(t,e){var n=r(e,2),i=n[0],o=n[1];return t>=i&&t<=o},like:l,notLike:f};e.default=h},function(t,e,n){"use strict";var r=n(55);Object.defineProperty(e,"__esModule",{value:!0}),e.eq=f,e.notEq=h,e.gt=function(t){return{operator:"gt",right:l(t)}},e.gte=function(t){return{operator:"gte",right:l(t)}},e.weakGt=function(t){return{operator:"weakGt",right:l(t)}},e.lt=function(t){return{operator:"lt",right:l(t)}},e.lte=function(t){return{operator:"lte",right:l(t)}},e.oneOf=function(t){0;return{operator:"oneOf",right:{values:t}}},e.notIn=function(t){0;return{operator:"notIn",right:{values:t}}},e.between=function(t,e){return{operator:"between",right:{values:[t,e]}}},e.like=function(t){return{operator:"like",right:{value:t}}},e.notLike=function(t){return{operator:"notLike",right:{value:t}}},e.sanitizeLikeString=function(t){return t.replace(p,"_")},e.column=function(t){return{column:t}},e.where=y,e.and=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{type:"and",conditions:e}},e.or=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{type:"or",conditions:e}},e.buildQueryDescription=function(t){var e=g(t),n=r(e,2),i=n[0],o=n[1];0;return{join:i,where:o}},e.queryWithoutDeleted=function(t){var e=t.join,n=t.where;0;return{join:[].concat(c(e),c(w(e))),where:[].concat(c(n),[m])}},e.hasColumnComparisons=function(t){return x(t)},e.on=void 0;var i=n(56),o=a(n(87)),u=a(n(37)),s=n(92);function a(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t){return null!==t&&"object"===typeof t?t:{value:t}}function f(t){return{operator:"eq",right:l(t)}}function h(t){return{operator:"notEq",right:l(t)}}var p=/[^a-zA-Z0-9]/g;function d(t){return null!==t&&"object"===typeof t?t:f(t)}function y(t,e){return{type:"where",left:t,comparison:d(e)}}var v=function(t,e,n){if("string"===typeof e)return(0,u.default)(void 0!==n,"illegal `undefined` passed to Q.on"),{type:"on",table:t,left:e,comparison:d(n)};var r=e;return{type:"on",table:t,left:r.left,comparison:r.comparison}};e.on=v;var b=(0,s.columnName)("_status"),g=(0,o.default)((0,i.propEq)("type","on")),m=y(b,h("deleted")),w=(0,i.pipe)((0,i.map)((0,i.prop)("table")),i.uniq,(0,i.map)(function(t){return v(t,b,h("deleted"))}));var x=function t(e){if(Array.isArray(e)){for(var n=0;n<e.length;n+=1)if(t(e[n]))return!0;return!1}if(e&&"object"===typeof e){if(e.column)return!0;for(var r in e)if(t(e[r]))return!0;return!1}return!1}},function(t,e,n){"use strict";var r=n(55);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.table,n=t.description,r=n.where,i=n.join,o=t.associations;return{table:e,query:I(r),joins:C(o,i)}};var i=n(56),o=h(n(77)),u=h(n(90)),s=h(n(89)),a=h(n(88)),c=h(n(37)),l=h(n(91)),f=n(92);function h(t){return t&&t.__esModule?t:{default:t}}var p=(0,a.default)([[(0,i.has)("value"),(0,i.prop)("value")],[(0,i.has)("values"),(0,i.prop)("values")],[(0,i.has)("column"),function(){return(0,c.default)(!1,"Column comparisons unimplemented!")}]]),d=function(t){return{$not:{$aeq:t}}},y=function(t){return function(e){return{$and:[t(e),d(null)]}}},v={eq:(0,u.default)("$aeq"),notEq:d,gt:(0,u.default)("$gt"),gte:(0,u.default)("$gte"),weakGt:(0,u.default)("$gt"),lt:y((0,u.default)("$lt")),lte:y((0,u.default)("$lte")),oneOf:(0,u.default)("$in"),notIn:y((0,u.default)("$nin")),between:(0,u.default)("$between"),like:function(t){return"string"===typeof t?{$regex:(0,l.default)(t)}:{}},notLike:function(t){return"string"===typeof t?{$and:[{$not:{$eq:null}},{$not:{$regex:(0,l.default)(t)}}]}:{}}},b={_fakeAlwaysTrue:{$eq:void 0}},g=function(t){var e=t.left,n=t.comparison;return(0,i.has)("column",n.right)?b:(0,u.default)(e,function(t){var e=t.operator,n=t.right,r=p(n);if("string"===typeof r){if("eq"===e)return{$eq:r};if("notEq"===e)return{$ne:r}}return v[e](r)}(n))},m=(0,i.propEq)("type"),w=function(t){return(0,a.default)([[m("and"),_],[m("or"),O],[m("where"),g],[m("on"),g]])(t)},x=function(t){return(0,i.pipe)((0,i.prop)("conditions"),(0,i.map)(w),(0,u.default)(t))},_=x("$and"),O=x("$or"),S=function(t){return(0,i.pipe)(i.length,(0,o.default)(t))},j=(0,a.default)([[S(0),(0,i.always)(void 0)],[S(1),i.head],[i.T,(0,u.default)("$and")]]),I=(0,i.pipe)(function(t){return(0,i.map)(w,t)},j),k=(0,i.ifElse)((0,i.propEq)("type","belongs_to"),(0,i.always)((0,f.columnName)("id")),(0,i.prop)("foreignKey")),E=(0,i.ifElse)((0,i.propEq)("type","belongs_to"),(0,i.prop)("key"),(0,i.always)((0,f.columnName)("id"))),P=(0,i.map)(function(t){return{type:"where",left:t.left,comparison:t.comparison}}),A=(0,i.pipe)((0,i.groupBy)((0,i.prop)("table")),i.values),C=function(t,e){var n=function(t,e){return(0,s.default)(t,A(e))}(t,e);return(0,i.map)(function(t){var e=r(t,2);return function(t,e){var n=r(t,2),i=n[0],o=n[1];return{table:i,query:I(e),originalConditions:P(e),mapKey:k(o),joinKey:E(o)}}(e[0],e[1])},n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(136),i=n(138),o=n(142),u=a(n(140)),s=a(n(84));function a(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=new r.Subject;return e.pipe((0,o.concatMap)(u.default,s.default)).subscribe(s.default),{push:function(n,r){e.next(function(t,e,n){return i.Observable.create(function(r){t(e,function(t){r.next(e),n(t),r.complete()})})}(t,n,r))}}};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(137))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(93);e.Subject=r.Subject},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(139))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(93);e.Observable=r.Observable},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.responseActions=e.actions=void 0;e.actions={SETUP:"SETUP",FIND:"FIND",QUERY:"QUERY",COUNT:"COUNT",BATCH:"BATCH",GET_DELETED_RECORDS:"GET_DELETED_RECORDS",DESTROY_DELETED_RECORDS:"DESTROY_DELETED_RECORDS",UNSAFE_RESET_DATABASE:"UNSAFE_RESET_DATABASE",GET_LOCAL:"GET_LOCAL",SET_LOCAL:"SET_LOCAL",REMOVE_LOCAL:"REMOVE_LOCAL"};e.responseActions={RESPONSE_SUCCESS:"RESPONSE_SUCCESS",RESPONSE_ERROR:"RESPONSE_ERROR"}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(4),o=n(3);function u(t){return function(e){return e.lift(new s(t))}}var s=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=Object(o.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(i.a),c=n(8),l=n(66);function f(t,e){return void 0===e&&(e=c.a),u(function(){return Object(l.a)(t,e)})}function h(t){return function(e){return e.lift(new p(t))}}var p=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.closingNotifier))},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(Object(o.a)(r,n)),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(i.a),y=n(1);function v(t,e){return void 0===e&&(e=null),function(n){return n.lift(new b(t,e))}}var b=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?m:g}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),g=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(y.a),m=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n===0&&r.push([]);for(var o=r.length;o--;){var u=r[o];u.push(t),u.length===e&&(r.splice(o,1),this.destination.next(u))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(y.a),w=n(10);function x(t){var e=arguments.length,n=c.a;Object(w.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new _(t,r,i,n))}}var _=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new S(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),O=function(){return function(){this.buffer=[]}}(),S=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;u.bufferTimeSpan=n,u.bufferCreationInterval=r,u.maxBufferSize=i,u.scheduler=o,u.contexts=[];var s=u.openContext();if(u.timespanOnly=null==r||r<0,u.timespanOnly){var a={subscriber:u,context:s,bufferTimeSpan:n};u.add(s.closeAction=o.schedule(j,n,a))}else{var c={subscriber:u,context:s},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:u,scheduler:o};u.add(s.closeAction=o.schedule(k,n,c)),u.add(o.schedule(I,r,l))}return u}return r.a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],u=o.buffer;u.push(t),u.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(j,n,r))}},e.prototype.openContext=function(){var t=new O;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(y.a);function j(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function I(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(k,n,{subscriber:r,context:o})),this.schedule(t,e))}function k(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var E=n(5);function P(t,e){return function(n){return n.lift(new A(t,e))}}var A=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new C(t,this.openings,this.closingSelector))},t}(),C=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(o.a)(i,n)),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new E.a,r={buffer:[],subscription:n};e.push(r);var i=Object(o.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(i.a);function D(t){return function(e){return e.lift(new N(t))}}var N=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new T(t,this.closingSelector))},t}(),T=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(r){return this.error(r)}t=new E.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(o.a)(this,e)),this.subscribing=!1},e}(i.a),M=n(14);function V(t){return function(e){var n=new R(t),r=e.lift(n);return n.caught=r}}var R=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new L(t,this.selector,this.caught))},t}(),L=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new M.a(this,void 0,void 0);this.add(r),Object(o.a)(this,n,void 0,void 0,r)}},e}(i.a),F=n(46);function q(t){return function(e){return e.lift(new F.a(t))}}var $=n(7),B=n(12);function z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"===typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object($.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(B.a)([e].concat(t)),new F.a(n))}}var W=n(34);function U(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(W.a.apply(void 0,[e].concat(t)))}}var J=n(63),K=n(24);function Y(t,e){return Object(K.a)(t,e,1)}function G(t,e){return Y(function(){return t},e)}function H(t){return function(e){return e.lift(new Q(t,e))}}var Q=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new X(t,this.predicate,this.source))},t}(),X=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(y.a);function Z(t){return function(e){return e.lift(new tt(t))}}var tt=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.durationSelector))},t}(),et=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(o.a)(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.a);function nt(t,e){return void 0===e&&(e=c.a),function(n){return n.lift(new rt(t,e))}}var rt=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new it(t,this.dueTime,this.scheduler))},t}(),it=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ot,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(y.a);function ot(t){t.debouncedNext()}function ut(t){return void 0===t&&(t=null),function(e){return e.lift(new st(t))}}var st=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new at(t,this.defaultValue))},t}(),at=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(y.a);function ct(t){return t instanceof Date&&!isNaN(+t)}var lt=n(18);function ft(t,e){void 0===e&&(e=c.a);var n=ct(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new ht(n,e))}}var ht=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new pt(t,this.delay,this.scheduler))},t}(),pt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.a(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new dt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(lt.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(lt.a.createComplete()),this.unsubscribe()},e}(y.a),dt=function(){return function(t,e){this.time=t,this.notification=e}}(),yt=n(2);function vt(t,e){return e?function(n){return new mt(n,e).lift(new bt(t))}:function(e){return e.lift(new bt(t))}}var bt=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.delayDurationSelector))},t}(),gt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(r){this.destination.error(r)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=Object(o.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(i.a),mt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new wt(t,this.source))},e}(yt.a),wt=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(y.a);function xt(){return function(t){return t.lift(new _t)}}var _t=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t))},t}(),Ot=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(y.a);function St(t,e){return function(n){return n.lift(new jt(t,e))}}var jt=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new It(t,this.keySelector,this.flushes))},t}(),It=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(o.a)(i,r)),i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(r){return void n.error(r)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.a);function kt(t,e){return function(n){return n.lift(new Et(t,e))}}var Et=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Pt(t,this.compare,this.keySelector))},t}(),Pt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"===typeof n&&(i.compare=n),i}return r.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(y.a);function At(t,e){return kt(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}var Ct=n(25),Dt=n(17),Nt=n(27);function Tt(t){return void 0===t&&(t=Rt),function(e){return e.lift(new Mt(t))}}var Mt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.errorFactory))},t}(),Vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(y.a);function Rt(){return new Nt.a}var Lt=n(11);function Ft(t){return function(e){return 0===t?Object(Lt.b)():e.lift(new qt(t))}}var qt=function(){function t(t){if(this.total=t,this.total<0)throw new Ct.a}return t.prototype.call=function(t,e){return e.subscribe(new $t(t,this.total))},t}(),$t=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(y.a);function Bt(t,e){if(t<0)throw new Ct.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(Dt.a)(function(e,n){return n===t}),Ft(1),n?ut(e):Tt(function(){return new Ct.a}))}}var zt=n(36);function Wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Object(W.a)(e,zt.a.apply(void 0,t))}}function Ut(t,e){return function(n){return n.lift(new Jt(t,e,n))}}var Jt=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t,this.predicate,this.thisArg,this.source))},t}(),Kt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(y.a);function Yt(){return function(t){return t.lift(new Gt)}}var Gt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t))},t}(),Ht=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(o.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.a),Qt=n(9);function Xt(t,e){return e?function(n){return n.pipe(Xt(function(n,r){return Object(B.a)(t(n,r)).pipe(Object(Qt.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Zt(t))}}var Zt=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new te(t,this.project))},t}(),te=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new M.a(this,void 0,void 0);this.destination.add(r),Object(o.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.a);function ee(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new ne(t,e,n))}}var ne=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.project,this.concurrent,this.scheduler))},t}(),re=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r.a(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);try{var i=(0,this.project)(t,r);if(this.scheduler){var o={subscriber:this,result:i,value:t,index:r};this.destination.add(this.scheduler.schedule(e.dispatch,0,o))}else this.subscribeToProjection(i,t,r)}catch(u){n.error(u)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(o.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(i.a);function ie(t){return function(e){return e.lift(new oe(t))}}var oe=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ue(t,this.callback))},t}(),ue=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new E.a(n)),r}return r.a(e,t),e}(y.a);function se(t,e){if("function"!==typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new ae(t,n,!1,e))}}var ae=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new ce(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),ce=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.predicate=n,u.source=r,u.yieldIndex=i,u.thisArg=o,u.index=0,u}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(y.a);function le(t,e){return function(n){return n.lift(new ae(t,n,!0,e))}}var fe=n(19);function he(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(Dt.a)(function(e,n){return t(e,n,r)}):fe.a,Ft(1),n?ut(e):Tt(function(){return new Nt.a}))}}var pe=n(58);function de(){return function(t){return t.lift(new ye)}}var ye=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ve(t))},t}(),ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype._next=function(t){},e}(y.a);function be(){return function(t){return t.lift(new ge)}}var ge=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new me(t))},t}(),me=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(y.a);function we(t){return function(e){return 0===t?Object(Lt.b)():e.lift(new xe(t))}}var xe=function(){function t(t){if(this.total=t,this.total<0)throw new Ct.a}return t.prototype.call=function(t,e){return e.subscribe(new _e(t,this.total))},t}(),_e=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(y.a);function Oe(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(Dt.a)(function(e,n){return t(e,n,r)}):fe.a,we(1),n?ut(e):Tt(function(){return new Nt.a}))}}function Se(t){return function(e){return e.lift(new je(t))}}var je=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new Ie(t,this.value))},t}(),Ie=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(y.a);function ke(){return function(t){return t.lift(new Ee)}}var Ee=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Pe(t))},t}(),Pe=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){this.destination.next(lt.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(lt.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(lt.a.createComplete()),t.complete()},e}(y.a);function Ae(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ce(t,e,n))}}var Ce=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new De(t,this.accumulator,this.seed,this.hasSeed))},t}(),De=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(y.a),Ne=n(38);function Te(t,e){return arguments.length>=2?function(n){return Object(Ne.a)(Ae(t,e),we(1),ut(e))(n)}:function(e){return Object(Ne.a)(Ae(function(e,n,r){return t(e,n,r+1)}),we(1))(e)}}function Me(t){return Te("function"===typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var Ve=n(64);function Re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Ve.a.apply(void 0,[e].concat(t)))}}var Le=n(47);function Fe(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof e?Object(K.a)(function(){return t},e,n):("number"===typeof e&&(n=e),Object(K.a)(function(){return t},n))}function qe(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new $e(t,e,n))}}var $e=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new Be(t,this.accumulator,this.seed,this.concurrent))},t}(),Be=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,t,e)}catch(i){return n.error(i)}this.active++,this._innerSub(r,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var r=new M.a(this,void 0,void 0);this.destination.add(r),Object(o.a)(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(i.a);function ze(t){return Te("function"===typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var We=n(59);function Ue(t,e){return function(n){var r;if(r="function"===typeof t?t:function(){return t},"function"===typeof e)return n.lift(new Je(r,e));var i=Object.create(n,We.b);return i.source=n,i.subjectFactory=r,i}}var Je=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}(),Ke=n(61);function Ye(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object($.a)(t[0])&&(t=t[0]),function(e){return e.lift(new Ge(t))}}var Ge=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new He(t,this.nextSources))},t}(),He=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r.a(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new M.a(this,void 0,void 0);this.destination.add(e),Object(o.a)(this,t,void 0,void 0,e)}else this.destination.complete()},e}(i.a);function Qe(){return function(t){return t.lift(new Xe)}}var Xe=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ze(t))},t}(),Ze=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(y.a),tn=n(73);function en(t,e){return function(n){return[Object(Dt.a)(t,e)(n),Object(Dt.a)(Object(tn.a)(t,e))(n)]}}function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(Qt.a)(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if("undefined"===typeof o)return;r=o}return r}}(t,n))(e)}}var rn=n(6);function on(t){return t?Ue(function(){return new rn.a},t):Ue(new rn.a)}var un=n(60);function sn(t){return function(e){return Ue(new un.a(t))(e)}}var an=n(30);function cn(){return function(t){return Ue(new an.a)(t)}}var ln=n(44);function fn(t,e,n,r){n&&"function"!==typeof n&&(r=n);var i="function"===typeof n?n:void 0,o=new ln.a(t,e,r);return function(t){return Ue(function(){return o},i)(t)}}var hn=n(65);function pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object($.a)(t[0])&&(t=t[0]),e.lift.call(hn.a.apply(void 0,[e].concat(t)))}}function dn(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(Lt.b)():t<0?e.lift(new yn(-1,e)):e.lift(new yn(t-1,e))}}var yn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new vn(t,this.count,this.source))},t}(),vn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(y.a);function bn(t){return function(e){return e.lift(new gn(t))}}var gn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new mn(t,this.notifier,e))},t}(),mn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new rn.a;try{e=(0,this.notifier)(this.notifications)}catch(n){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Object(o.a)(this,e)},e}(i.a);function wn(t){return void 0===t&&(t=-1),function(e){return e.lift(new xn(t,e))}}var xn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new _n(t,this.count,this.source))},t}(),_n=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(y.a);function On(t){return function(e){return e.lift(new Sn(t,e))}}var Sn=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new jn(t,this.notifier,this.source))},t}(),jn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new rn.a;try{r=(0,this.notifier)(n)}catch(u){return t.prototype.error.call(this,u)}i=Object(o.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(i.a),In=n(43);function kn(t){return function(e){return e.lift(new En(t))}}var En=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Pn(t),r=e.subscribe(n);return r.add(Object(o.a)(n,this.notifier)),r},t}(),Pn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.a);function An(t,e){return void 0===e&&(e=c.a),function(n){return n.lift(new Cn(t,e))}}var Cn=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Dn(t,this.period,this.scheduler))},t}(),Dn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Nn,n,{subscriber:i,period:n})),i}return r.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(y.a);function Nn(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function Tn(t,e){return function(n){return n.lift(new Mn(t,e))}}var Mn=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Vn(t,this.compareTo,this.comparator))},t}(),Vn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new Rn(e,i))),i}return r.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;try{o=n?n(r,i):r===i}catch(u){this.destination.error(u)}o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(y.a),Rn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(y.a);function Ln(){return new rn.a}function Fn(){return function(t){return Object(In.a)()(Ue(Ln)(t))}}function qn(t,e,n){var r;return r=t&&"object"===typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,u=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,a=t.scheduler,c=0,l=!1,f=!1;return function(t){c++,e&&!l||(l=!1,e=new ln.a(i,u,a),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){f=!0,e.complete()}}));var r=e.subscribe(this);this.add(function(){c--,r.unsubscribe(),n&&!f&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)})}}(r))}}function $n(t){return function(e){return e.lift(new Bn(t,e))}}var Bn=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new zn(t,this.predicate,this.source))},t}(),zn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Nt.a)},e}(y.a);function Wn(t){return function(e){return e.lift(new Un(t))}}var Un=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new Jn(t,this.total))},t}(),Jn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(y.a);function Kn(t){return function(e){return e.lift(new Yn(t))}}var Yn=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Ct.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new y.a(t)):e.subscribe(new Gn(t,this._skipCount))},t}(),Gn=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.a(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(y.a);function Hn(t){return function(e){return e.lift(new Qn(t))}}var Qn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Xn(t,this.notifier))},t}(),Xn=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var i=new M.a(r,void 0,void 0);return r.add(i),r.innerSubscription=i,Object(o.a)(r,n,void 0,void 0,i),r}return r.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(i.a);function Zn(t){return function(e){return e.lift(new tr(t))}}var tr=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new er(t,this.predicate))},t}(),er=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},e}(y.a);function nr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(w.a)(n)?(t.pop(),function(e){return Object(W.a)(t,e,n)}):function(e){return Object(W.a)(t,e)}}var rr=n(53),ir=n(32),or=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=rr.a);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!Object(ir.a)(n)||n<0)&&(i.delayTime=0),r&&"function"===typeof r.schedule||(i.scheduler=rr.a),i}return r.a(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=rr.a),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(yt.a);function ur(t,e){return void 0===e&&(e=0),function(n){return n.lift(new sr(t,e))}}var sr=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new or(e,this.delay,this.scheduler).subscribe(t)},t}();function ar(t,e){return"function"===typeof e?function(n){return n.pipe(ar(function(n,r){return Object(B.a)(t(n,r)).pipe(Object(Qt.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new cr(t))}}var cr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new lr(t,this.project))},t}(),lr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new M.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(o.a)(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(i.a);function fr(){return ar(fe.a)}function hr(t,e){return e?ar(function(){return t},e):ar(function(){return t})}function pr(t){return function(e){return e.lift(new dr(t))}}var dr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new yr(t),r=Object(o.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),yr=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.a);function vr(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new br(t,e))}}var br=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new gr(t,this.predicate,this.inclusive))},t}(),gr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(y.a),mr=n(16),wr=n(26);function xr(t,e,n){return function(r){return r.lift(new _r(t,e,n))}}var _r=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Or(t,this.nextOrObserver,this.error,this.complete))},t}(),Or=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=mr.a,o._tapError=mr.a,o._tapComplete=mr.a,o._tapError=r||mr.a,o._tapComplete=i||mr.a,Object(wr.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||mr.a,o._tapError=n.error||mr.a,o._tapComplete=n.complete||mr.a),o}return r.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(y.a),Sr={leading:!0,trailing:!1};function jr(t,e){return void 0===e&&(e=Sr),function(n){return n.lift(new Ir(t,e.leading,e.trailing))}}var Ir=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new kr(t,this.durationSelector,this.leading,this.trailing))},t}(),kr=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(o.a)(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(i.a);function Er(t,e,n){return void 0===e&&(e=c.a),void 0===n&&(n=Sr),function(r){return r.lift(new Pr(t,e,n.leading,n.trailing))}}var Pr=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new Ar(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Ar=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.duration=n,u.scheduler=r,u.leading=i,u.trailing=o,u._hasTrailingValue=!1,u._trailingValue=null,u}return r.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Cr,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(y.a);function Cr(t){t.subscriber.clearThrottle()}var Dr=n(48);function Nr(t){return void 0===t&&(t=c.a),function(e){return Object(Dr.a)(function(){return e.pipe(Ae(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),Object(Qt.a)(function(t){var e=t.current,n=t.last,r=t.value;return new Tr(r,e-n)}))})}}var Tr=function(){return function(t,e){this.value=t,this.interval=e}}(),Mr=n(62);function Vr(t,e,n){return void 0===n&&(n=c.a),function(r){var i=ct(t),o=i?+t-n.now():Math.abs(t);return r.lift(new Rr(o,i,e,n))}}var Rr=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Lr(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Lr=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;return u.absoluteTimeout=n,u.waitFor=r,u.withObservable=i,u.scheduler=o,u.action=null,u.scheduleTimeout(),u}return r.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(o.a)(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(i.a),Fr=n(45);function qr(t,e){return void 0===e&&(e=c.a),Vr(t,Object(Fr.a)(new Mr.a),e)}function $r(t){return void 0===t&&(t=c.a),Object(Qt.a)(function(e){return new Br(e,t.now())})}var Br=function(){return function(t,e){this.value=t,this.timestamp=e}}();function zr(t,e,n){return 0===n?[e]:(t.push(e),t)}function Wr(){return Te(zr,[])}function Ur(t){return function(e){return e.lift(new Jr(t))}}var Jr=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new Kr(t),r=e.subscribe(n);return r.closed||n.add(Object(o.a)(n,this.windowBoundaries)),r},t}(),Kr=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new rn.a,e.next(n.window),n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new rn.a;e.next(n)},e}(i.a);function Yr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Gr(t,e))}}var Gr=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Hr(t,this.windowSize,this.startWindowEvery))},t}(),Hr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new rn.a],i.count=0,e.next(i.windows[0]),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,u=0;u<o&&!this.closed;u++)i[u].next(t);var s=this.count-r+1;if(s>=0&&s%e===0&&!this.closed&&i.shift().complete(),++this.count%e===0&&!this.closed){var a=new rn.a;i.push(a),n.next(a)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(y.a);function Qr(t){var e=c.a,n=null,r=Number.POSITIVE_INFINITY;return Object(w.a)(arguments[3])&&(e=arguments[3]),Object(w.a)(arguments[2])?e=arguments[2]:Object(ir.a)(arguments[2])&&(r=arguments[2]),Object(w.a)(arguments[1])?e=arguments[1]:Object(ir.a)(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new Xr(t,n,r,e))}}var Xr=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new ti(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),Zr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(rn.a),ti=function(t){function e(e,n,r,i,o){var u=t.call(this,e)||this;u.destination=e,u.windowTimeSpan=n,u.windowCreationInterval=r,u.maxWindowSize=i,u.scheduler=o,u.windows=[];var s=u.openWindow();if(null!==r&&r>=0){var a={subscriber:u,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:u,scheduler:o};u.add(o.schedule(ri,n,a)),u.add(o.schedule(ni,r,c))}else{var l={subscriber:u,window:s,windowTimeSpan:n};u.add(o.schedule(ei,n,l))}return u}return r.a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new Zr;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(y.a);function ei(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function ni(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),u={action:this,subscription:null},s={subscriber:n,window:o,context:u};u.subscription=r.schedule(ri,e,s),this.add(u.subscription),this.schedule(t,i)}function ri(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function ii(t,e){return function(n){return n.lift(new oi(t,e))}}var oi=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new ui(t,this.openings,this.closingSelector))},t}(),ui=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(o.a)(i,n,n)),i}return r.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var u=void 0;try{u=(0,this.closingSelector)(e)}catch(f){return this.error(f)}var s=new rn.a,a=new E.a,c={window:s,subscription:a};this.contexts.push(c);var l=Object(o.a)(this,u,c);l.closed?this.closeWindow(this.contexts.length-1):(l.context=c,a.add(l)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(i.a);function si(t){return function(e){return e.lift(new ai(t))}}var ai=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ci(t,this.closingSelector))},t}(),ci=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new rn.a;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(i){return this.destination.error(i),void this.window.error(i)}this.add(this.closingNotification=Object(o.a)(this,n))},e}(i.a);function li(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"===typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new fi(r,n))}}var fi=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new hi(t,this.observables,this.project))},t}(),hi=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var u=n.length;i.values=new Array(u);for(var s=0;s<u;s++)i.toRespond.push(s);for(s=0;s<u;s++){var a=n[s];i.add(Object(o.a)(i,a,a,s))}return i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var u=o.indexOf(n);-1!==u&&o.splice(u,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.a),pi=n(49);function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(pi.b.apply(void 0,[e].concat(t)))}}function yi(t){return function(e){return e.lift(new pi.a(t))}}n.d(e,"audit",function(){return u}),n.d(e,"auditTime",function(){return f}),n.d(e,"buffer",function(){return h}),n.d(e,"bufferCount",function(){return v}),n.d(e,"bufferTime",function(){return x}),n.d(e,"bufferToggle",function(){return P}),n.d(e,"bufferWhen",function(){return D}),n.d(e,"catchError",function(){return V}),n.d(e,"combineAll",function(){return q}),n.d(e,"combineLatest",function(){return z}),n.d(e,"concat",function(){return U}),n.d(e,"concatAll",function(){return J.a}),n.d(e,"concatMap",function(){return Y}),n.d(e,"concatMapTo",function(){return G}),n.d(e,"count",function(){return H}),n.d(e,"debounce",function(){return Z}),n.d(e,"debounceTime",function(){return nt}),n.d(e,"defaultIfEmpty",function(){return ut}),n.d(e,"delay",function(){return ft}),n.d(e,"delayWhen",function(){return vt}),n.d(e,"dematerialize",function(){return xt}),n.d(e,"distinct",function(){return St}),n.d(e,"distinctUntilChanged",function(){return kt}),n.d(e,"distinctUntilKeyChanged",function(){return At}),n.d(e,"elementAt",function(){return Bt}),n.d(e,"endWith",function(){return Wt}),n.d(e,"every",function(){return Ut}),n.d(e,"exhaust",function(){return Yt}),n.d(e,"exhaustMap",function(){return Xt}),n.d(e,"expand",function(){return ee}),n.d(e,"filter",function(){return Dt.a}),n.d(e,"finalize",function(){return ie}),n.d(e,"find",function(){return se}),n.d(e,"findIndex",function(){return le}),n.d(e,"first",function(){return he}),n.d(e,"groupBy",function(){return pe.b}),n.d(e,"ignoreElements",function(){return de}),n.d(e,"isEmpty",function(){return be}),n.d(e,"last",function(){return Oe}),n.d(e,"map",function(){return Qt.a}),n.d(e,"mapTo",function(){return Se}),n.d(e,"materialize",function(){return ke}),n.d(e,"max",function(){return Me}),n.d(e,"merge",function(){return Re}),n.d(e,"mergeAll",function(){return Le.a}),n.d(e,"mergeMap",function(){return K.a}),n.d(e,"flatMap",function(){return K.a}),n.d(e,"mergeMapTo",function(){return Fe}),n.d(e,"mergeScan",function(){return qe}),n.d(e,"min",function(){return ze}),n.d(e,"multicast",function(){return Ue}),n.d(e,"observeOn",function(){return Ke.b}),n.d(e,"onErrorResumeNext",function(){return Ye}),n.d(e,"pairwise",function(){return Qe}),n.d(e,"partition",function(){return en}),n.d(e,"pluck",function(){return nn}),n.d(e,"publish",function(){return on}),n.d(e,"publishBehavior",function(){return sn}),n.d(e,"publishLast",function(){return cn}),n.d(e,"publishReplay",function(){return fn}),n.d(e,"race",function(){return pn}),n.d(e,"reduce",function(){return Te}),n.d(e,"repeat",function(){return dn}),n.d(e,"repeatWhen",function(){return bn}),n.d(e,"retry",function(){return wn}),n.d(e,"retryWhen",function(){return On}),n.d(e,"refCount",function(){return In.a}),n.d(e,"sample",function(){return kn}),n.d(e,"sampleTime",function(){return An}),n.d(e,"scan",function(){return Ae}),n.d(e,"sequenceEqual",function(){return Tn}),n.d(e,"share",function(){return Fn}),n.d(e,"shareReplay",function(){return qn}),n.d(e,"single",function(){return $n}),n.d(e,"skip",function(){return Wn}),n.d(e,"skipLast",function(){return Kn}),n.d(e,"skipUntil",function(){return Hn}),n.d(e,"skipWhile",function(){return Zn}),n.d(e,"startWith",function(){return nr}),n.d(e,"subscribeOn",function(){return ur}),n.d(e,"switchAll",function(){return fr}),n.d(e,"switchMap",function(){return ar}),n.d(e,"switchMapTo",function(){return hr}),n.d(e,"take",function(){return Ft}),n.d(e,"takeLast",function(){return we}),n.d(e,"takeUntil",function(){return pr}),n.d(e,"takeWhile",function(){return vr}),n.d(e,"tap",function(){return xr}),n.d(e,"throttle",function(){return jr}),n.d(e,"throttleTime",function(){return Er}),n.d(e,"throwIfEmpty",function(){return Tt}),n.d(e,"timeInterval",function(){return Nr}),n.d(e,"timeout",function(){return qr}),n.d(e,"timeoutWith",function(){return Vr}),n.d(e,"timestamp",function(){return $r}),n.d(e,"toArray",function(){return Wr}),n.d(e,"window",function(){return Ur}),n.d(e,"windowCount",function(){return Yr}),n.d(e,"windowTime",function(){return Qr}),n.d(e,"windowToggle",function(){return ii}),n.d(e,"windowWhen",function(){return si}),n.d(e,"withLatestFrom",function(){return li}),n.d(e,"zip",function(){return di}),n.d(e,"zipAll",function(){return yi})}]);
//# sourceMappingURL=90c77b15bfd3d612d485.worker.js.map