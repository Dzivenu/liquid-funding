(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{1493:function(e,t,n){"use strict";n.d(t,"h",function(){return g}),n.d(t,"i",function(){return j}),n.d(t,"a",function(){return y}),n.d(t,"b",function(){return O}),n.d(t,"l",function(){return k}),n.d(t,"m",function(){return S}),n.d(t,"k",function(){return C}),n.d(t,"g",function(){return B}),n.d(t,"d",function(){return D}),n.d(t,"e",function(){return F}),n.d(t,"f",function(){return L}),n.d(t,"j",function(){return M}),n.d(t,"c",function(){return R});var r=n(58),a=n(3),c=n.n(a),o=n(38),i=n(4),u=n(1641),s=n.n(u),f=n(1682),l=n.n(f),p=n(7),d=n(1683),m=n(1498),h=(new d.a).begin().find("ipfs/"),g=new s.a,b=l()({host:"test-ipfs.status.im",port:"2053",protocol:"https"}),v=l()({host:"api.thegraph.com","api-path":"/ipfs/api/v0/",protocol:"https",port:"443"});window.ipfsHttp=b,window.ipfsHttpTheGraph=v,window.jsIPFS=g,g.on("ready",function(){console.log("Node is ready to use!"),g.bootstrap.add("/ip4/35.188.209.83/tcp/4001/ipfs/QmZqW6QHdDVyHMvYktpA1PAuKgvqhwumbuFqFB5URedSbA")});var j=function(e){return h.test(e)},y=function(e,t,n){e.stopPropagation(),e.preventDefault();var r=e.target.files,a=w(r);console.log({files:r,formattedFiles:a}),E(a,t,n)},w=function(e){for(var t=[],n=0;n<e.length;n++)t.push(O(e[n]));return t},O=function(e){var t=e.name,n=(e.type,e);return{path:"/root/".concat(t),content:n}},x=function(e){var t=e.name,n=(e.type,e);return{path:"/root/".concat(t),content:n}},E=function(e,t,n){var r;g.add(e,{progress:function(e){return console.log("received: ".concat(e))}}).then(function(e){console.log(e),r=e[0].hash,t("ipfs/".concat(r)),P(r,n)}).catch(function(e){console.error(e)})},k=function(){var e=Object(i.a)(c.a.mark(function e(t,n){var r,a,i,u,s,f=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],a=[],i=r?x:O,u=r?S:N,Object.keys(t).forEach(function(e){a=[].concat(Object(o.a)(a),[i(t[e][0])])}),a.push({path:"/root/manifest.json",content:p.Buffer.from(n)}),e.next=8,u(a);case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.add(t,{progress:function(e){return console.log("received: ".concat(e))}});case 2:return n=e.sent,e.abrupt("return","ipfs/".concat(n.slice(-1)[0].hash));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.add(t);case 2:return n=e.sent,e.abrupt("return","ipfs/".concat(n.slice(-1)[0].hash));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/").slice(-1)[0],e.next=3,b.pin.add(n,{recursive:!0});case 3:r=e.sent,console.log({res:r});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(c.a.mark(function e(t){var n,a,o,i,u,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return n=e.sent,a=n.slice(-1)[0],o=a.content,i=new Uint8Array(o),u=new Blob([i],{type:Object(m.a)(a)}),s=URL.createObjectURL(u),e.abrupt("return",Object(r.a)({},a,{img:s}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.split("/").slice(-1)[0];return new Promise(function(e,n){g.get(t,function(t,r){t?n(t):e(r)})})},F=function(e){var t=e.split("/").slice(-1)[0];return new Promise(function(e,n){b.get(t,function(t,r){t?n(t):e(r)})})},L=function(e){var t=e.split("/").slice(-1)[0];return new Promise(function(e,n){v.get(t,function(t,r){t?n(t):e(r)})})},M=function(e){return e.includes("http")},R=function(e){return M(e)?e:"/root/".concat(e)}},1498:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var r={gif:"image/gif",jpg:"image/jpeg",png:"image/png",pdf:"application/pdf"},a=function(e){var t=e.split(".").slice(-1)[0].toLowerCase();return r[t]?r[t]:"image/jpeg"},c=function(e){return e.type.includes("video")}},1517:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=e?new Date(1e3*e):new Date,r=new Date,a=r-n;if(isNaN(a))return NaN;switch(t){case"years":return r.getFullYear()-n.getFullYear();case"months":return 12*r.getFullYear()+r.getMonth()-(12*n.getFullYear()+n.getMonth());case"weeks":return Math.floor(a/6048e5);case"days":return Math.floor(a/864e5);case"hours":return Math.floor(a/36e5);case"minutes":return Math.floor(a/6e4);case"seconds":return Math.floor(a/1e3);default:return}}function a(e){var t=new Date;return t.setDate(t.getDate()-e),"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(1e3*e);return t?"".concat(n.getDate()," ").concat(n.toLocaleString("default",{month:"short"})," ").concat(n.getFullYear()):"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear())}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c})},1587:function(e,t){},1588:function(e,t){},1609:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return p});n(1996),n(1766);var r=web3.utils,a=function(e){return"#status-".concat(e.replace(/\s/g,"").replace(/\W/g,"").toLowerCase())},c=function(e){return r.toHex(e)},o=function(e){return e.path.split("/").slice(-1)[0]},i=function(e){return"manifest.json"===o(e).toLowerCase()},u=function(e){return e?JSON.parse(e.find(i).content):null};var s=function(e){return!!e.find(i)},f=function(e){return!(!e||!s(e))&&(!!u(e).media.type.toLowerCase().includes("video")||void 0)};function l(e){return null!==e.match(/\.(jpeg|jpg|gif|png)$/)?"image":"video"}var p=function(e){if(!e||!s(e))return null;var t=u(e).media;if(t.type.includes("video")||t.type.includes("image")){if(t.url)return t.url;if(t.file&&"/root/"!==t.file)try{return function(e){var t=new Blob([e]);return URL.createObjectURL(t)}(e.find(function(e){return o(e)===t.file.split("/").slice(-1)[0]}).content)}catch(n){console.log({err:n})}}}},1616:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(58),o=n(92),i=n(4),u=n(0),s=n(1995),f=n(1517),l=n(1493),p=n(68),d=(n(24),n(38),n(422)),m=n(182),h=n(431);n.d(t,"a",function(){return N}),n.d(t,"b",function(){return B});var g=[l.d,l.e,l.f];function b(){return(b=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.profile?n(Object(f.c)(t.profile.creationTime,"days")):n(Object(f.c)(!1,"days"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(){return(v=Object(i.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.profile){e.next=2;break}return e.abrupt("return");case 2:r=t.profile.addr,n(r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e,t){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(a.a.mark(function e(t,n){var r,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:0,(0,g[r])(t).then(function(e){console.log("IPFS get sucessful on attempt: ",r+1),n(e)}).catch(function(){var e=Object(i.a)(a.a.mark(function e(c){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("IPFS getFilesWeb error: ",c,"Attempt: ",r+1),g[r+1]&&j(t,n,r+1);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(i.a)(a.a.mark(function e(t,n){var r,c,o,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]&&i[2],t&&t.profile){e.next=3;break}return e.abrupt("return");case 3:c=t.profile.url,o=c.split("/").slice(-1)[0],r&&console.log({CID:o,data:t,ipfs:l.h}),j(o,n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pledge.fetch();case 2:return n=e.sent,t.pledgeData=n,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=Object(i.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)(t);case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark(function e(t,n){var r,c,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t&&t.length){e.next=3;break}return e.abrupt("return",n(r));case 3:return t.forEach(function(e){var t=Object(h.a)(e);r.push(t)}),e.next=6,Promise.all(r);case 6:return c=e.sent,o=Object(s.a)(c),e.next=10,Promise.all(o.map(O));case 10:i=e.sent,n(i);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){var t=Object(u.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(u.useEffect)(function(){!function(e,t){k.apply(this,arguments)}(e,a)},[e]),r}var S=function(e){return"manifest.json"===e.path.split("/").slice(-1)[0].toLowerCase()},C=function(e,t){if(e&&e.profile&&e.profile.projectInfo){var n=e.profile.projectInfo,r=n.isPlaying,a=n.type,o=n.file;return Object(c.a)({},e.profile.projectInfo,{media:{isPlaying:r,type:a,file:o}})}if(!t)return null;var i=t.find(S);if(!i)return null;try{return JSON.parse(i.content)}catch(u){return null}};function P(){return(P=Object(i.a)(a.a.mark(function e(t,n,r){var c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.profile){e.next=2;break}return e.abrupt("return");case 2:return c=t.profile.projectInfo.goalToken,e.next=5,Object(p.g)(c,r);case 5:o=e.sent,n(o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e,t){var n=Object(u.useState)(null),r=Object(o.a)(n,2),a=r[0],c=r[1],i=Object(u.useState)(null),s=Object(o.a)(i,2),f=s[0],p=s[1],m=Object(u.useState)(null),h=Object(o.a)(m,2),g=h[0],j=h[1],y=Object(u.useState)(null),O=Object(o.a)(y,2),x=O[0],k=O[1],N=Object(u.useState)(null),S=Object(o.a)(N,2),B=S[0],D=S[1],F=Object(u.useState)(0),L=Object(o.a)(F,2),M=L[0],R=L[1],A=Object(u.useContext)(d.a),T=A.account,U=A.currencies,I=A.openSnackBar,W=A.syncWithRemote;Object(u.useEffect)(function(){l.h.on("ready",function(){k(!0)})},[e]),Object(u.useEffect)(function(){!function(e,t){E.apply(this,arguments)}(T,D)},[T]),Object(u.useEffect)(function(){!function(e,t){b.apply(this,arguments)}(t,c)},[t,e]),Object(u.useEffect)(function(){!function(e,t){v.apply(this,arguments)}(t,p)},[t,e]),Object(u.useEffect)(function(){!function(e,t){w.apply(this,arguments)}(t,j)},[x,t]),Object(u.useEffect)(function(){T&&U&&function(e,t,n){P.apply(this,arguments)}(t,R,U)},[T,t,U]);var Y=Object(u.useMemo)(function(){return C(t,g)},[t,g,e]);return{account:T,authorization:M,creator:f,projectAge:a,projectAssets:g,manifest:Y,delegateProfiles:B,openSnackBar:I,syncWithRemote:W}}},1643:function(e,t){},1645:function(e,t){},1646:function(e,t){},1647:function(e,t){},1648:function(e,t){},1649:function(e,t){},1650:function(e,t){},1651:function(e,t){},1652:function(e,t){},1653:function(e,t){},1654:function(e,t){},1655:function(e,t){},1656:function(e,t){},1657:function(e,t){},1659:function(e,t){},1660:function(e,t){},1661:function(e,t){},1662:function(e,t){},1666:function(e,t){},1668:function(e,t){},1669:function(e,t){},1670:function(e,t){},1671:function(e,t){},1672:function(e,t){},1673:function(e,t){},1675:function(e,t){},1677:function(e,t){},1678:function(e,t){},1679:function(e,t){},1680:function(e,t){},1681:function(e,t){},3656:function(e,t,n){"use strict";n.r(t);n(3),n(4);var r=n(58),a=n(0),c=n.n(a),o=n(154),i=n(1686),u=n.n(i),s=n(179),f=n(1926),l=n(1561),p=n(27),d=n(333),m=n(2059),h=n(1931),g=n(427),b=n(3657),v=n(1847),j=n.n(v),y=n(1996),w=n(1766),O=n(30),x=(n(213),n(1517),n(338)),E=(n(1493),n(1498)),k=n(1609),N=n(1616),S="https://our.status.im/content/images/2018/07/status_logo_blue_1--2-.png";var C=function(e){return!!e&&(!!Object(k.e)(e).media.type.toLowerCase().includes("video")||void 0)},P=function(e){return e.split("/").slice(-1)[0]},B=function(e){if(!e)return null;var t=Object(k.e)(e).media;if(t.type.includes("video")){if(t.url)return t.url;if(t.file&&"/root/"!==t.file)return function(e){var t=new Blob([e],{type:"video/mp4"});return URL.createObjectURL(t)}(e.find(function(e){return e.name===P(t.file)}).content)}},D=function(e){if(!e)return null;var t=Object(k.e)(e).avatar;if(!t||"/root/"===t)return S;if(t.includes("http"))return t;var n=Object(E.a)(t);return function(e,t){var n=new Blob([e],{type:t});return URL.createObjectURL(n)}(e.find(function(e){return e.name===P(t)}).content,n)};var F=Object(O.a)(function(e){return{root:{display:"grid",gridTemplateColumns:"1fr 5fr",gridTemplateRows:"1fr 4fr",gridColumnGap:"1em",gridRowGap:"36px",margin:"1.75rem 4.5rem",fontFamily:e.typography.fontFamily},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},title:{fontSize:"2.5rem"},subTitle:{fontSize:"1.5rem",fontWeight:200},creator:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"end"},creatorName:{fontSize:"1rem"},media:{objectFit:"cover"},fullWidth:{gridColumnStart:"1",gridColumnEnd:"3"},secondRow:{gridColumnStart:"1",gridColumnEnd:"3",display:"grid",gridTemplateColumns:"2fr 1fr",gridColumnGap:"3em"},infoBox:{display:"grid",gridTemplateRows:"0rem 2.5rem 2.5rem 2.5rem",gridRowGap:"2rem"},infoBoxSection:{display:"flex",flexDirection:"column"},infoText:{fontSize:"2rem"},raisedAmount:{fontSize:"2em",color:e.palette.primary.main},subtext:Object(r.a)({},e.typography.caption,{fontSize:"1rem"}),linearColorPrimary:{backgroundColor:"#00000014"},linearBarColorPrimary:{backgroundColor:e.palette.primary.main},link:{textDecoration:"none"}}})(function(e){var t=e.classes,n=e.match,r=e.profile,i=e.transfers,l=e.pledges,p=e.projectAddedEvents,d=n.params.id,v=n.params[0],O=Object(N.b)(d,p),E=O.account,k=O.projectAge,P=O.projectAssets,F=O.manifest,L=Object(a.useMemo)(function(){return Object(x.e)(l)},[l,d]),M=Object(a.useMemo)(function(){return function(e){return Object(y.a)(Object(w.a)(function(e){return e.owner},e))}(l)},[l,d]),R=Object(a.useMemo)(function(){return C(P)},[P,d]),A=Object(a.useMemo)(function(){return B(P)},[P,d]),T=Object(a.useMemo)(function(){return D(P)},[P,d]),U=L[0]?L[0][1]:0,I=F?Math.min(Number(U)/Number(F.goal)*100,100):0,W=r[0]?r[0].type:v,Y=(r[0]?r[0].addr.toUpperCase():null)===(E?E.toUpperCase():E),q=A||S;return console.log({profile:r,projectAssets:P,mediaUrl:A,mediaType:R,amountsPledged:L,pledges:l,transfers:i,match:n}),c.a.createElement(a.Fragment,null,!P&&c.a.createElement(g.a,null),P&&c.a.createElement("div",{className:t.root},c.a.createElement("div",{className:t.creator},c.a.createElement(b.a,{src:F&&T}),c.a.createElement(s.a,{className:t.creatorName},F&&"By ".concat(F.creator))),c.a.createElement("div",null,c.a.createElement(s.a,{className:t.title,component:"h2",gutterBottom:!0},F&&F.title),c.a.createElement(s.a,{className:t.subTitle,component:"h5",gutterBottom:!0},F&&F.subtitle)),c.a.createElement("div",{className:t.secondRow},R&&c.a.createElement(j.a,{width:"100%",height:"100%",url:A,playing:F.media.isPlaying,controls:!0}),!R&&c.a.createElement(m.a,{component:"img",alt:"video",className:t.media,src:q,title:"media-description"}),c.a.createElement("div",{className:t.infoBox},A||T?c.a.createElement(h.a,{classes:{colorPrimary:t.linearColorPrimary,barColorPrimary:t.linearBarColorPrimary},variant:"determinate",value:I}):c.a.createElement(h.a,null),c.a.createElement("div",{className:t.infoBoxSection},c.a.createElement("span",{className:t.raisedAmount},"".concat(U.toLocaleString()," ").concat(L[0]?L[0][0]:"")),c.a.createElement("span",{className:t.subtext},F&&"pledged of ".concat(Number(F.goal).toLocaleString()," goal"))),c.a.createElement("div",{className:t.infoBoxSection},c.a.createElement("span",{className:t.infoText},M),c.a.createElement("span",{className:t.subtext},"backers")),c.a.createElement("div",{className:t.infoBoxSection},c.a.createElement("span",{className:t.infoText},k),c.a.createElement("span",{className:t.subtext},"days active")),c.a.createElement("div",null,!Y&&c.a.createElement(o.b,{to:"/back-project/".concat(d),className:t.link},c.a.createElement(f.a,{color:"primary",variant:"contained",style:{height:"50px",width:"100%"}},"Back this ",W)),Y&&c.a.createElement(o.b,{to:"/project-pledges/".concat(d),className:t.link},c.a.createElement(f.a,{color:"primary",variant:"contained",style:{height:"50px",width:"100%"}},"View project pledges"))))),c.a.createElement("div",{className:t.fullWidth},c.a.createElement(u.a,{source:F&&F.description}))))});t.default=Object(d.withDatabase)(Object(l.a)(["match"],function(e){var t=e.database,n=e.match;return{profile:t.collections.get("profiles").query(p.Q.where("id_profile",n.params.id)).observe(),transfers:t.collections.get("lp_events").query(p.Q.where("event","Transfer")).observe(),projectAddedEvents:t.collections.get("lp_events").query(p.Q.where("event","ProjectAdded")).observe(),pledges:t.collections.get("pledges").query(p.Q.where("intended_project",n.params.id)).observe()}})(F))}}]);
//# sourceMappingURL=18.49b70f35.chunk.js.map